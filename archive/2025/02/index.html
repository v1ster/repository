
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="mars">
      
      
      
        <link rel="prev" href="../03/">
      
      
        <link rel="next" href="../01/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>2025/04 - Seaman's Notes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="lime">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#202504" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Seaman&#39;s Notes" class="md-header__button md-logo" aria-label="Seaman's Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4 8H2.5a1 1 0 0 0-1 1v5.25a.75.75 0 0 1-1.5 0V9a2.5 2.5 0 0 1 2.5-2.5H4V5.133a1.75 1.75 0 0 1 1.533-1.737l2.831-.353.76-.913c.332-.4.825-.63 1.344-.63h.782c.966 0 1.75.784 1.75 1.75V4h2.25a.75.75 0 0 1 0 1.5H13v4h2.25a.75.75 0 0 1 0 1.5H13v.75a1.75 1.75 0 0 1-1.75 1.75h-.782c-.519 0-1.012-.23-1.344-.63l-.761-.912-2.83-.354A1.75 1.75 0 0 1 4 9.867Zm6.276-4.91-.95 1.14a.753.753 0 0 1-.483.265l-3.124.39a.25.25 0 0 0-.219.248v4.734c0 .126.094.233.219.249l3.124.39a.752.752 0 0 1 .483.264l.95 1.14a.25.25 0 0 0 .192.09h.782a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25h-.782a.25.25 0 0 0-.192.09Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Seaman's Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2025/04
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/v1ster/repository" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
  </div>
  <div class="md-source__repository">
    v1ster/repository
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Seaman&#39;s Notes" class="md-nav__button md-logo" aria-label="Seaman's Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4 8H2.5a1 1 0 0 0-1 1v5.25a.75.75 0 0 1-1.5 0V9a2.5 2.5 0 0 1 2.5-2.5H4V5.133a1.75 1.75 0 0 1 1.533-1.737l2.831-.353.76-.913c.332-.4.825-.63 1.344-.63h.782c.966 0 1.75.784 1.75 1.75V4h2.25a.75.75 0 0 1 0 1.5H13v4h2.25a.75.75 0 0 1 0 1.5H13v.75a1.75 1.75 0 0 1-1.75 1.75h-.782c-.519 0-1.012-.23-1.344-.63l-.761-.912-2.83-.354A1.75 1.75 0 0 1 4 9.867Zm6.276-4.91-.95 1.14a.753.753 0 0 1-.483.265l-3.124.39a.25.25 0 0 0-.219.248v4.734c0 .126.094.233.219.249l3.124.39a.752.752 0 0 1 .483.264l.95 1.14a.25.25 0 0 0 .192.09h.782a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25h-.782a.25.25 0 0 0-.192.09Z"/></svg>

    </a>
    Seaman's Notes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/v1ster/repository" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
  </div>
  <div class="md-source__repository">
    v1ster/repository
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tags
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2025/08
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
      
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    2025/04
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2025/01
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2024/04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024/11
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2024/03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024/08
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2024/02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024/06
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2024/01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024/02
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2023/04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023/12
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2023/03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023/09
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2023/02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023/06
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2018/01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018/03
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../category/linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    linux
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="202504">2025/04</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-04-25 00:00:00">April 25, 2025</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="elf"><a class="toclink" href="../../../elf-%E6%96%87%E4%BB%B6%E6%9F%A5%E7%9C%8B/">ELF 文件查看</a></h2>
<p>(1) file：判断文件类型</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>$ file /bin/ls
</span></code></pre></div>
<p>(2) readelf：查看ELF文件的所有信息</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>$ readelf -a /bin/ls  # 显示全部信息
</span></code></pre></div>
<p>(3) objdump：反汇编 ELF 文件</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>$ objdump -d /bin/ls  # 反汇编代码段
</span></code></pre></div>
<p>(4) nm：列出符号表</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>$ nm /bin/ls  # 显示符号（函数、变量）
</span></code></pre></div>
<p>(5) ldd：查看动态依赖</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>$ ldd /bin/ls  # 显示依赖的共享库
</span></code></pre></div>
<p>(6) strings：提取文件中的字符串</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>$ strings /bin/ls | grep&quot;GNU&quot;# 查找包含&quot;GNU&quot;的字符串
</span></code></pre></div>
<p>(7) strip：移除ELF文件中的符号表和调试信息</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>$ strip -s program  # 减小文件体积
</span></code></pre></div>
<p>(8) patchelf：修改 ELF 文件的属性</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>$ patchelf --set-interpreter /lib64/ld-custom.so program  # 修改解释器
</span></code></pre></div>
<h2 id="_1"><a class="toclink" href="../../../elf-%E6%96%87%E4%BB%B6%E6%9F%A5%E7%9C%8B/#_1">参考</a></h2>
<p><a href="https://mp.weixin.qq.com/s/Rz44RG9NQJeaIh71ZC3cvA">五分钟彻底搞懂 Linux ELF 文件</a></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-04-25 00:00:00">April 25, 2025</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="yocoto"><a class="toclink" href="../../../yocoto-%E8%B0%83%E8%AF%95%E6%80%BB%E7%BB%93/">Yocoto 调试总结</a></h2>
<p>添加设备树编译, 修改文件 <code>sources/meta-nxp-harpoon/conf/layer.conf</code> 
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>KERNEL_DEVICETREE:append:imx8mm-lpddr4-evk = &quot; \
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>                                              freescale/imx8mm-evk-harpoon.dtb \
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>                                              freescale/imx8mm-evk-harpoon-avb.dtb \
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>                                              freescale/imx8mm-evk-harpoon-industrial.dtb \
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>                                              freescale/imx8mm-evk-harpoon-virtio-net.dtb \
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>+++
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>                                              freescale/sdp-dante.dtb \
</span></code></pre></div></p>
<p>添加 defconfig 配置, 修改文件 <code>sources/meta-nxp-harpoon/recipes-kernel/linux/linux-imx_%.bbappend</code>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>DELTA_KERNEL_DEFCONFIG:append:mx8mm-nxp-bsp = &quot;imx_ch1_defconfig&quot;
</span></code></pre></div></p>
<p>patch 文件生效, 修改文件  <code>sources/meta-nxp-harpoon/recipes-kernel/linux/linux-imx_%.bbappend</code>
patch 文件需要存储在 <code>sources/meta-nxp-harpoon/recipes-kernel/linux/files</code> 路径下
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a> `sources/meta-nxp-harpoon/recipes-kernel/linux/linux-imx_%.bbappend`
</span></code></pre></div></p>
<h3 id="_1"><a class="toclink" href="../../../yocoto-%E8%B0%83%E8%AF%95%E6%80%BB%E7%BB%93/#_1">其他的一些常用命令</a></h3>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># 获取源码</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>https://variwiki.com/index.php?title<span class="o">=</span>Yocto_Customizing_U-Boot
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>bitbake<span class="w"> </span>-c<span class="w"> </span>unpack<span class="w"> </span>virtual/kernel
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>bitbake<span class="w"> </span>-c<span class="w"> </span>unpack<span class="w"> </span>virtual/bootloader
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>cp<span class="w"> </span>-a<span class="w"> </span>tmp/work/imx8mm_lpddr4_evk-poky-linux/u-boot-imx/2023.04/git/.<span class="w"> </span>..local_repos/uboot-imx
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>cp<span class="w"> </span>-r<span class="w"> </span>tmp/work-shared/<span class="si">${</span><span class="nv">MACHINE</span><span class="si">}</span>/kernel-source<span class="w"> </span>../local_repos/
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="c1"># 还有一种方法，就是展开yocto扩展变量的值，可以通过检查bitbake -e命令的输出来检查变量的值 　</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>bitbake<span class="w"> </span>-e<span class="w"> </span>virtual/kernel<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>^S<span class="o">=</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">　</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="c1"># 如果您已经构建了主线版本，则可能需要使用以下方法重置构建目录</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>bitbake<span class="w"> </span>-c<span class="w"> </span>clean<span class="w"> </span>virtual/kernel<span class="w"> </span>virtual/bootloader
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="nb">source</span><span class="w"> </span>setup-environment<span class="w"> </span>build
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>bitbake-layers<span class="w">  </span>show-layers
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>bitbake-layers<span class="w"> </span>create-layer<span class="w"> </span>../sources/meta-ch1
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>bitbake-layers<span class="w"> </span>add-layer<span class="w"> </span>../sources/meta-ch1/
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>bitbake<span class="w"> </span>-c<span class="w"> </span>cleansstate<span class="w"> </span><span class="c1"># recipes</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>bitbake<span class="w"> </span>virtual/kernel
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>bitbake<span class="w"> </span>-c<span class="w"> </span>compile<span class="w"> </span>-f<span class="w"> </span>linux-imx
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>
</span><span id="__span-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a>dtc<span class="w"> </span>-I<span class="w"> </span>dtb<span class="w"> </span>-O<span class="w"> </span>dts<span class="w"> </span>*.dtb<span class="w"> </span>&gt;<span class="w"> </span>my.dts
</span><span id="__span-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a>
</span><span id="__span-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a>
</span><span id="__span-7-33"><a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="nb">export</span><span class="w">  </span><span class="nv">CROSS_COMPILE</span><span class="o">=</span>/home/dewey/workspace/platin-ch1/out/yinfan_huazhu-ch1/host/bin/aarch64-buildroot-linux-gnu-
</span><span id="__span-7-34"><a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="nb">export</span><span class="w"> </span><span class="nv">ARCH</span><span class="o">=</span>arm64
</span><span id="__span-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a>make<span class="w"> </span>defconfig<span class="w"> </span>imx.config
</span><span id="__span-7-36"><a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a>
</span><span id="__span-7-37"><a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a><span class="nb">export</span><span class="w"> </span><span class="nv">ARCH</span><span class="o">=</span>arm64
</span><span id="__span-7-38"><a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a><span class="nb">export</span><span class="w"> </span><span class="nv">CROSS_COMPILE</span><span class="o">=</span>aarch64-none-linux-gnu-
</span><span id="__span-7-39"><a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a><span class="w"> </span>make<span class="w"> </span>imx_v8_defconfig
</span><span id="__span-7-40"><a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a>
</span><span id="__span-7-41"><a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a><span class="c1"># 使用 make modules_install INSTALL_MOD_PATH=&lt;路径&gt; , 如,</span>
</span><span id="__span-7-42"><a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a>$<span class="w"> </span>make<span class="w"> </span>modules_install<span class="w"> </span><span class="nv">INSTALL_MOD_PATH</span><span class="o">=</span>/home/jello/kernel_modules
</span><span id="__span-7-43"><a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a>
</span><span id="__span-7-44"><a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a>//获取当前内核配置
</span><span id="__span-7-45"><a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a><span class="w"> </span>zcat<span class="w"> </span>/proc/config.gz<span class="w"> </span><span class="o">||</span><span class="w"> </span>cat<span class="w"> </span>/boot/<span class="o">{</span>config,config-<span class="k">$(</span>uname<span class="w"> </span>-r<span class="k">)</span><span class="o">}</span>
</span></code></pre></div>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-04-25 00:00:00">April 25, 2025</time></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="elfhello-world"><a class="toclink" href="../../../%E6%89%8B%E6%8A%8A%E6%89%8B%E8%A7%A3%E6%9E%90elf%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E4%BB%8Ehello-world%E5%88%B0%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%A5%A5%E7%A7%98/">手把手解析ELF文件格式：从Hello World到二进制奥秘</a></h2>
<p>大伙应该都知道无论是Linux下的可执行程序，还是共享库（<code>.so</code>）、核心转储文件（<code>core</code>），它们的底层格式都是 ELF（Executable and Linkable Format）。理解ELF文件，能让你获得哪些能力呢？我想应该有如下几点  </p>
<p>• 逆向分析：破解程序逻辑，分析恶意代码。</p>
<p>• 调试定位：通过崩溃的core文件快速定位问题。</p>
<p>• 性能优化：分析内存布局和函数调用关系。</p>
<p>本文将以一个包含 全局变量、局部变量、字符串常量 的“Hello World”程序为例，生成ELF文件，并逐字节解析其结构！</p>
<p><strong>第一步：生成示例ELF文件</strong>  </p>
<p>我们编写一个包含多种数据类型的程序，确保生成丰富的ELF段（section）。</p>
<p><strong>1. 示例代码</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>// hello_elf.c#include &lt;stdio.h&gt;int global_init = 42;           // 初始化的全局变量（.data段）int global_uninit;              // 未初始化的全局变量（.bss段）constchar *str = &quot;Hello ELF!&quot;; // 字符串常量（.rodata段）int main() {    int local_var = 100;        // 局部变量（栈中，ELF不直接存储）    staticint static_var = 0;  // 静态变量（.data或.bss段）    printf(&quot;%s\n&quot;, str);    return0;}
</span></code></pre></div>
<p><strong>2. 编译生成ELF文件</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>gcc -g -no-pie hello_elf.c -o hello_elf  # -g生成调试信息，-no-pie禁用地址随机化
</span></code></pre></div>
<p><strong>第二步：ELF文件全景速览</strong>  </p>
<p>使用工具快速查看ELF文件结构：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>file hello_elf               # 查看文件类型readelf -h hello_elf         # 查看ELF头readelf -l hello_elf         # 查看程序头表（加载信息）readelf -S hello_elf         # 查看节头表（段信息）objdump -d hello_elf         # 反汇编代码段
</span></code></pre></div>
<p><strong>第三步：逐字节解析ELF文件结构</strong>  </p>
<p>我们将从二进制层面解析ELF文件，重点关注以下部分：</p>
<ol>
<li>
<p>ELF头（ELF Header）</p>
</li>
<li>
<p>程序头表（Program Header Table）</p>
</li>
<li>
<p>代码段（.text）</p>
</li>
<li>
<p>数据段（.data、.bss、.rodata）</p>
</li>
<li>
<p>符号表（.symtab）</p>
</li>
<li>
<p>调试信息（.debug_*）</p>
</li>
</ol>
<hr />
<p><strong>1. ELF头（ELF Header）</strong>  </p>
<p>ELF头位于文件起始位置（0x0~0x40字节），描述文件基本信息。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>hexdump -C hello_elf -n 64  # 查看ELF头（前64字节）
</span></code></pre></div>
<p>输出示例：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>00000000  7f 45 4c 46 02 01 01 00  00 00 00 00 00 00 00 00  |.ELF............|00000010  02 00 3e 00 01 00 00 00  a0 04 40 00 00 00 00 00  |..&gt;.......@.....|00000020  40 00 00 00 00 00 00 00  10 3e 00 00 00 00 00 00  |@........&gt;......|00000030  00 00 00 00 40 00 38 00  09 00 40 00 1f 00 1c 00  |....@.8...@.....|
</span></code></pre></div>
<p>关键字段解析：<br />
• Magic：<code>7F 45 4C 46</code>（<code>0x7F</code>+<code>ELF</code>）。</p>
<p>• Class：<code>02</code>表示64位文件。</p>
<p>• Type：<code>01 00</code>（<code>0x0001</code>）表示可执行文件（<code>ET_EXEC</code>）。</p>
<p>• Machine：<code>3e 00</code>（<code>0x003e</code>）表示x86-64架构。</p>
<p>• Entry point：<code>a0 04 40 00</code>（<code>0x4004a0</code>），程序入口地址。</p>
<p>• Start of program headers：<code>40 00</code>（<code>0x40</code>），程序头表起始位置。</p>
<hr />
<p><strong>2. 程序头表（Program Header Table）</strong>  </p>
<p>程序头表指导操作系统如何加载程序到内存。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>readelf -l hello_elf
</span></code></pre></div>
<p>输出示例：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>Program Headers:  Type           Offset   VirtAddr           PhysAddr           FileSiz  MemSiz   Flg Align  LOAD           0x000000 0x0000000000400000 0x0000000000400000 0x0006b4 0x0006b4 R E 0x200000  LOAD           0x000e00 0x0000000000600e00 0x0000000000600e00 0x000228 0x000230 RW  0x200000  DYNAMIC        0x000e18 0x0000000000600e18 0x0000000000600e18 0x0001d0 0x0001d0 RW  0x8
</span></code></pre></div>
<p>• LOAD段：</p>
<p>• 第一个<code>LOAD</code>段为代码段（<code>.text</code>），权限<code>R E</code>（可读可执行）。</p>
<p>• 第二个<code>LOAD</code>段为数据段（<code>.data</code>、<code>.bss</code>），权限<code>RW</code>（可读可写）。</p>
<hr />
<p><strong>3. 代码段（.text）</strong>  </p>
<p>代码段存放可执行指令，对应<code>main</code>函数和库函数调用。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>objdump -d hello_elf
</span></code></pre></div>
<p>反汇编输出：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>00000000004004a0 &lt;main&gt;:  4004a0:   55                      push   %rbp  4004a1:   48 89 e5                mov    %rsp,%rbp  4004a4:   48 83 ec 10             sub    $0x10,%rsp  4004a8:   c7 45 fc 64 00 00 00    movl   $0x64,-0x4(%rbp)  # local_var=100  4004af:   48 8b 05 6a 0b 20 00    mov    0x200b6a(%rip),%rax # 601020 &lt;str&gt;  4004b6:   48 89 c7                mov    %rax,%rdi  4004b9:   e8 92 fe ff ff          call   400350 &lt;puts@plt&gt;  4004be:   b8 00 00 00 00          mov    $0x0,%eax  4004c3:   c9                      leave    4004c4:   c3                      ret    
</span></code></pre></div>
<p>• 机器码：如<code>55 48 89 e5</code>对应<code>push %rbp; mov %rsp, %rbp</code>。</p>
<p>• 函数调用：<code>call 400350</code>跳转到<code>puts@plt</code>（动态链接库函数）。</p>
<hr />
<p><strong>4. 数据段（.data、.bss、.rodata）</strong>  </p>
<p><strong>（1）.data段</strong><br />
存储已初始化的全局变量和静态变量。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>readelf -x .data hello_elf  # 查看.data段
</span></code></pre></div>
<p>输出示例：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>Hex dump of section &#39;.data&#39;:  0x00601020 00000000 00000000 20064000 00000000 ........ .@.....  0x00601030 2a000000                             *...            
</span></code></pre></div>
<p>• <code>0x2a</code>（十进制42）对应<code>global_init = 42</code>。</p>
<p>• <code>0x20064000</code>是字符串<code>"Hello ELF!"</code>的地址（在.rodata段）。</p>
<p><strong>（2）.rodata段</strong><br />
存储只读数据（如字符串常量）。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>readelf -x .rodata hello_elf
</span></code></pre></div>
<p>输出示例：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>Hex dump of section &#39;.rodata&#39;:  0x004005e0 01000200 48656c6c 6f20454c 462100    ....Hello ELF!.
</span></code></pre></div>
<p>• 字符串<code>"Hello ELF!"</code>以ASCII形式存储。</p>
<p><strong>（3）.bss段</strong><br />
存储未初始化的全局变量（程序加载时初始化为0）。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>readelf -x .bss hello_elf
</span></code></pre></div>
<p>输出示例：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>Hex dump of section &#39;.bss&#39;:  0x00601038 00000000 00000000                   ........        
</span></code></pre></div>
<p>• <code>global_uninit</code>在此段，初始值为0。</p>
<hr />
<p><strong>5. 符号表（.symtab）</strong>  </p>
<p>记录函数和变量的地址和类型。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>readelf -s hello_elf
</span></code></pre></div>
<p>输出示例：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>Symbol table &#39;.symtab&#39; contains 64 entries:   Num:    Value          Size Type    Bind   Vis      Ndx Name     1: 0000000000000000     0 FILE    LOCAL  DEFAULT  ABS hello_elf.c     8: 0000000000601038     4 OBJECT  GLOBAL DEFAULT   23 global_uninit     9: 0000000000601020     8 OBJECT  GLOBAL DEFAULT   21 str    10: 0000000000601028     4 OBJECT  GLOBAL DEFAULT   21 global_init    15: 00000000004004a0    37 FUNC    GLOBAL DEFAULT   13 main
</span></code></pre></div>
<p>• <code>main</code>函数地址为<code>0x4004a0</code>。</p>
<p>• <code>str</code>变量地址为<code>0x601020</code>，对应.rodata段的字符串地址。</p>
<hr />
<p><strong>6. 调试信息（.debug_*）</strong>  </p>
<p>编译时添加<code>-g</code>选项会生成调试信息，用于关联源代码和二进制指令。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>readelf -S hello_elf | grep debug  # 查看调试段
</span></code></pre></div>
<p>输出示例：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>  [27] .debug_aranges    PROGBITS        0000000000000000 000010a0  [28] .debug_info       PROGBITS        0000000000000000 000010d0  [29] .debug_abbrev     PROGBITS        0000000000000000 000013a0
</span></code></pre></div>
<p>• .debug_info：记录变量类型、函数参数等源码级信息。</p>
<hr />
<p><strong>第四步：动手实验——修改ELF文件</strong>  </p>
<p>通过修改ELF文件，直观感受其结构：</p>
<ol>
<li>
<p>修改字符串常量：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>printf &quot;Hello HACK!&quot; | dd of=hello_elf bs=1 seek=$((0x4005e4)) conv=notrunc
</span></code></pre></div>
<p>运行程序，输出将变为<code>Hello HACK!</code>。</p>
</li>
<li>
<p>修改全局变量：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>printf &quot;\x2b\x00\x00\x00&quot; | dd of=hello_elf bs=1 seek=$((0x601028)) conv=notrunc
</span></code></pre></div>
<p><code>global_init</code>的值从42（0x2a）变为43（0x2b）。</p>
</li>
</ol>
<hr />
<p><strong>第五步：ELF文件结构总结</strong></p>
<table>
<thead>
<tr>
<th>结构</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>ELF头</td>
<td>标识文件类型、架构、入口点、程序头表位置。</td>
</tr>
<tr>
<td>程序头表</td>
<td>指导操作系统加载段到内存。</td>
</tr>
<tr>
<td>.text段</td>
<td>存储可执行指令（如<code>main</code>函数）。</td>
</tr>
<tr>
<td>.data段</td>
<td>存储已初始化的全局变量和静态变量。</td>
</tr>
<tr>
<td>.bss段</td>
<td>存储未初始化的全局变量（程序加载时初始化为0）。</td>
</tr>
<tr>
<td>.rodata段</td>
<td>存储只读数据（如字符串常量）。</td>
</tr>
<tr>
<td>.symtab段</td>
<td>符号表，记录函数和变量的地址。</td>
</tr>
<tr>
<td>.debug_*段</td>
<td>调试信息，关联源代码和二进制指令。</td>
</tr>
</tbody>
</table>
<hr />
<p>好了，简单介绍到这里吧，一旦掌握ELF文件的核心结构。无论是调试崩溃的程序，还是逆向分析二进制文件，ELF文件都是你的“地图”</p>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.sections", "navigation.instant", "navigation.path", "navigation.indexes", "navigation.top"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>