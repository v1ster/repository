{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Blog","text":""},{"location":"blog/tags/","title":"Tags","text":"<p>Following is a list of relevant tags:</p>"},{"location":"blog/tags/#shell","title":"Shell","text":"<ul> <li>\u521b\u5efaASCII\u7801\u7684\u76ee\u5f55\u6811</li> </ul>"},{"location":"blog/tags/#wip","title":"WIP","text":"<ul> <li>OpenWrt \u4f7f\u7528\u8bb0\u5f55</li> </ul>"},{"location":"blog/tags/#apt","title":"apt","text":"<ul> <li>add-apt-repository \u547d\u4ee4\u5b89\u88c5,\u5378\u8f7d\u548c\u4f7f\u7528</li> <li>apt certificate verification failed</li> <li>apt \u547d\u4ee4\u4f7f\u7528\u4ee3\u7406</li> <li>apt-key \u6dfb\u52a0\u516c\u94a5</li> </ul>"},{"location":"blog/tags/#ccpp","title":"c/cpp","text":"<ul> <li>\u53bb\u6389\u5b8f__FILE__\u7684\u8def\u5f84</li> </ul>"},{"location":"blog/tags/#cheatsheet","title":"cheatsheet","text":"<ul> <li>Markdown \u901f\u67e5\u8868</li> <li>c \u6587\u4ef6IO</li> <li>c \u9884\u5904\u7406\u5668</li> </ul>"},{"location":"blog/tags/#git","title":"git","text":"<ul> <li>git  Merge vs Rebase</li> <li>git diff \u751f\u6210patch \u5e76\u5e94\u7528</li> <li>git pull request</li> <li>git \u4fee\u526a\u5206\u652f</li> <li>git \u4fee\u6539\u7b2c\u4e00\u4e2acommit \u4fe1\u606f</li> <li>git \u4fee\u6539\u914d\u7f6e\u6587\u4ef6</li> <li>git \u5206\u5757\u63a8\u9001</li> <li>git \u5408\u5e76commit</li> <li>git \u540c\u6b65Fork \u6e90\u4ed3\u5e93</li> <li>git \u5c06token \u6dfb\u52a0\u5230\u8fdc\u7a0b\u4ed3\u5e93\u94fe\u63a5\u4e2d</li> <li>\u4f7f\u7528git \u6253\u5305\u4ed3\u5e93</li> <li>git \u67e5\u770b\u5386\u53f2\u8bb0\u5f55</li> <li>git \u8bbe\u7f6e\u548c\u53d6\u6d88\u4ee3\u7406</li> <li>git\u5206\u5272commit \u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93</li> </ul>"},{"location":"blog/tags/#kernel","title":"kernel","text":"<ul> <li>CMOS Sensor \u7684\u4e00\u4e9b\u57fa\u672c\u6982\u5ff5</li> <li>Linux \u5185\u6838\u5f00\u53d1</li> <li>imx8mm sai rx \u65f6\u949f\u7ebf\u914d\u7f6e</li> <li>\u5185\u6838\u5185\u5b58\u7ba1\u7406</li> <li>\u5185\u6838\u7f51\u7edc\u8bbe\u5907\u9a71\u52a8</li> </ul>"},{"location":"blog/tags/#linux","title":"linux","text":"<ul> <li>Arch Linux \u786c\u76d8\u6269\u5bb9</li> <li>Arch linux ext4 \u6587\u4ef6\u7cfb\u7edf\u8f6c Btrfs</li> <li>Buildroot \u4f7f\u7528 crontab \u548c crond \u5b8c\u6210\u5b9a\u65f6\u4efb\u52a1</li> <li>ELF \u6587\u4ef6\u67e5\u770b</li> <li>Gentoo Linux \u5b89\u88c5\u6307\u5357</li> <li>LFS \u8bb0\u5f55</li> <li>OpenWrt \u4f7f\u7528\u8bb0\u5f55</li> <li>Shell \u547d\u4ee4\u53bb\u9664\u5b57\u7b26\u4e32\u4e2d\u56de\u8f66\u7b26</li> <li>Ubuntu \u5f7b\u5e95\u79fb\u9664Snap</li> <li>Ubuntu \u6ca1\u6709\u7f51\u7edc\u8fde\u63a5</li> <li>Yocoto \u8c03\u8bd5\u603b\u7ed3</li> <li>buildroot \u5982\u4f55\u4ec5\u83b7\u53d6 toolchain</li> <li>cloudflared \u5185\u7f51\u4ee3\u7406</li> <li>gentoo \u6e90\u8bbe\u7f6e</li> <li>linux Fan driver</li> <li>linux \u4e2d\u4f7f\u7528 ctrl+z \u505c\u6b62\u4efb\u52a1\u540e\u5982\u4f55\u6062\u590d\u4efb\u52a1</li> <li>linux \u7528\u6237\u4f7f\u7528</li> <li>linux \u7f29\u5c0f\u5206\u533a\u5927\u5c0f</li> <li>linux \u7f51\u7edc\u6392\u67e5</li> <li>openocd \u4f7f\u7528</li> <li>openvpn \u5c40\u57df\u7f51\u5185\u5206\u4eab\u7f51\u7edc</li> <li>repo \u521d\u59cb\u5316\u4ed3\u5e93</li> <li>rock5b \u8bbe\u7f6e\u8bb0\u5f55</li> <li>samba \u5206\u4eab\u6587\u4ef6</li> <li>samba \u7528\u6237\u7ba1\u7406</li> <li>trojan-gfw \u5b89\u88c5\u8bb0\u5f55</li> <li>ubuntu \u8bbe\u7f6e\u865a\u62df\u663e\u793a\u5668\u8f93\u51fa</li> <li>v2ray\u4e00\u952e\u811a\u672c\u6536\u96c6\u6574\u7406</li> <li>wireguard \u90e8\u7f72\u8bb0\u5f55</li> <li>\u5185\u6838\u9a71\u52a8\u521d\u59cb\u5316\u987a\u5e8f</li> <li>\u5220\u9664Ubunut Pro</li> <li>\u624b\u628a\u624b\u89e3\u6790ELF\u6587\u4ef6\u683c\u5f0f\uff1a\u4eceHello World\u5230\u4e8c\u8fdb\u5236\u5965\u79d8</li> <li>\u642d\u5efaclash \u5e76\u4e14\u5206\u4eab\u7f51\u7edc</li> <li>\u67e5\u770blinux \u7248\u672c\u4fe1\u606f &amp; \u66f4\u6539\u5bc6\u7801</li> <li>\u8bbe\u7f6e\u9759\u6001 IP \u5730\u5740</li> <li>\u9489\u9489\u65e0\u6cd5\u8f93\u5165\u4e2d\u6587</li> </ul>"},{"location":"blog/tags/#python","title":"python","text":"<ul> <li>python pip \u8bbe\u7f6e\u4ee3\u7406</li> <li>python \u67e5\u770b\u52a8\u6001\u94fe\u63a5\u5e93\u5730\u5740</li> </ul>"},{"location":"blog/tags/#ssh","title":"ssh","text":"<ul> <li>ssh \u5982\u4f55\u5411\u670d\u52a1\u5668\u6dfb\u52a0\u516c\u94a5</li> <li>ssh \u5feb\u901f\u5220\u9664known_hosts\u8bb0\u5f55</li> <li>ssh \u6dfb\u52a0\u4f7f\u7528\u79c1\u94a5</li> <li>ssh \u7aef\u53e3\u8f6c\u53d1</li> <li>ssh \u8bbe\u7f6e\u4ee3\u7406</li> </ul>"},{"location":"blog/tags/#system","title":"system","text":"<ul> <li>archlinux install record</li> </ul>"},{"location":"blog/tags/#tool","title":"tool","text":"<ul> <li>add-apt-repository \u547d\u4ee4\u5b89\u88c5,\u5378\u8f7d\u548c\u4f7f\u7528</li> <li>apt certificate verification failed</li> <li>apt \u547d\u4ee4\u4f7f\u7528\u4ee3\u7406</li> <li>apt-key \u6dfb\u52a0\u516c\u94a5</li> <li>cloudflared \u5185\u7f51\u4ee3\u7406</li> <li>freebsd 13 \u5b89\u88c5 samba server</li> <li>git  Merge vs Rebase</li> <li>git diff \u751f\u6210patch \u5e76\u5e94\u7528</li> <li>git \u4fee\u526a\u5206\u652f</li> <li>git \u4fee\u6539\u7b2c\u4e00\u4e2acommit \u4fe1\u606f</li> <li>git \u4fee\u6539\u914d\u7f6e\u6587\u4ef6</li> <li>git \u5206\u5757\u63a8\u9001</li> <li>git \u5408\u5e76commit</li> <li>git \u540c\u6b65Fork \u6e90\u4ed3\u5e93</li> <li>git \u5c06token \u6dfb\u52a0\u5230\u8fdc\u7a0b\u4ed3\u5e93\u94fe\u63a5\u4e2d</li> <li>\u4f7f\u7528git \u6253\u5305\u4ed3\u5e93</li> <li>git \u67e5\u770b\u5386\u53f2\u8bb0\u5f55</li> <li>git \u8bbe\u7f6e\u548c\u53d6\u6d88\u4ee3\u7406</li> <li>git\u5206\u5272commit \u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93</li> <li>samba \u5206\u4eab\u6587\u4ef6</li> <li>samba \u7528\u6237\u7ba1\u7406</li> <li>ssh \u5982\u4f55\u5411\u670d\u52a1\u5668\u6dfb\u52a0\u516c\u94a5</li> <li>ssh \u5feb\u901f\u5220\u9664known_hosts\u8bb0\u5f55</li> <li>ssh \u6dfb\u52a0\u4f7f\u7528\u79c1\u94a5</li> <li>ssh \u7aef\u53e3\u8f6c\u53d1</li> <li>ssh \u8bbe\u7f6e\u4ee3\u7406</li> <li>tmux \u4f7f\u7528</li> <li>vscode \u8bbe\u7f6e compare view</li> <li>windows \u4e2d\u6dfb\u52a0\u53f3\u952e\u83dc\u5355 - \u5728vscode \u4e2d\u6253\u5f00</li> <li>zsh \u589e\u52a0\u547d\u4ee4\u5386\u53f2\u8bb0\u5f55</li> <li>\u4f7f\u7528UEFI Shell\u5f15\u5bfcU\u76d8\u542f\u52a8</li> <li>\u521b\u5efaASCII\u7801\u7684\u76ee\u5f55\u6811</li> <li>\u5728 FreeBSD 13 \u4e0a\u5b89\u88c5 gitea</li> <li>\u642d\u5efaclash \u5e76\u4e14\u5206\u4eab\u7f51\u7edc</li> <li>\u67e5\u770bpython\u6240\u652f\u6301\u7684wheel\u5305</li> <li>\u9489\u9489\u65e0\u6cd5\u8f93\u5165\u4e2d\u6587</li> </ul>"},{"location":"blog/tags/#vscode","title":"vscode","text":"<ul> <li>vscode \u8bbe\u7f6e compare view</li> </ul>"},{"location":"blog/tags/#windows","title":"windows","text":"<ul> <li>Windows 10 \u5206\u4eab\u7f51\u7edc\u8bbe\u7f6e</li> </ul>"},{"location":"arch-linux-%E7%A1%AC%E7%9B%98%E6%89%A9%E5%AE%B9/","title":"Arch Linux \u786c\u76d8\u6269\u5bb9","text":"<p>\u6b63\u5e38\u5206\u533a\u540e,\u4f7f\u7528rsync \u540c\u6b65\u5206\u533a\u5185\u5bb9</p> <pre><code>rsync -a /src/* /dst/*\n</code></pre> <p>windows \u5f15\u5bfc\u4e22\u5931,\u4f7f\u7528\u547d\u4ee4\u91cd\u5efa <pre><code>diskpart\nlist disk\nselect disk *     // \u9009\u62e9\u4f60\u8981\u91cd\u5efaEFI\u5206\u533a\u7684\u76d8\u7684\u7f16\u53f7\uff0c\u4ee5\u6570\u5b57\u4ee3\u66ff*\nlist partition\ncreate partition efi size = 260     // 260M\uff0c\u5206\u914d\u7ed9EFI\u5206\u533a\u7684\u5bb9\u91cfformat quick fs = fat32\nexit\nbcdboot C:\\Windows                  // \u6ce8\u610f\u76d8\u7b26\n</code></pre></p> <p>arch linux \u5f15\u5bfc\u4e22\u5931.\u91cd\u5efa \u5728 archiso \u73af\u5883\u4e2d <pre><code>mount /dev/_root_partition /mnt\nmount --mkdir /dev/_efi_system_partition /mnt/boot\nswapon /dev/_swap_partition\n\npacstrap -K /mnt base linux-lts nvid linux-firmware amd-ucode\n\ngenfstab -U /mnt &gt;&gt; /mnt/etc/fstab\nrch-chroot /mnt\nmkinitcpio -P\n\nbootctl --esp-path=/boot --boot-path=/boot install\n</code></pre></p> <p>The loader configuration is stored in the file\u00a0<code>_esp_/loader/loader.conf</code>. See\u00a0loader.conf(5) \u00a7\u202fOPTIONS\u00a0for details. <pre><code>_esp_/loader/loader.conf\n\ndefault  arch.conf\ntimeout  4\nconsole-mode max\neditor   no\n</code></pre></p> <pre><code>_esp_/loader/entries/arch.conf\n\ntitle   Arch Linux\nlinux   /vmlinuz-linux\ninitrd  /intel-ucode.img\ninitrd  /initramfs-linux.img\noptions root=UUID=_xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx_ rw\n</code></pre>","tags":["linux"]},{"location":"arch-linux-%E7%A1%AC%E7%9B%98%E6%89%A9%E5%AE%B9/#_1","title":"\u53c2\u8003","text":"","tags":["linux"]},{"location":"arch-linux-%E7%A1%AC%E7%9B%98%E6%89%A9%E5%AE%B9/#linux","title":"\u8fc1\u79fblinux\u7cfb\u7edf\u5230\u65b0\u786c\u76d8","text":"","tags":["linux"]},{"location":"arch-linux-%E7%A1%AC%E7%9B%98%E6%89%A9%E5%AE%B9/#windowsefi","title":"Windows\u4e0b\u8bef\u5220EFI\u5206\u533a\u91cd\u5efa\u5f15\u5bfc\u7b80\u5355\u6559\u7a0b","text":"","tags":["linux"]},{"location":"arch-linux-%E7%A1%AC%E7%9B%98%E6%89%A9%E5%AE%B9/#systemd-boot","title":"systemd-boot","text":"","tags":["linux"]},{"location":"arch-linux-%E7%A1%AC%E7%9B%98%E6%89%A9%E5%AE%B9/#installation","title":"Installation","text":"","tags":["linux"]},{"location":"arch-linux-ext4-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%BD%AC-btrfs/","title":"ext4 \u6587\u4ef6\u7cfb\u7edf\u8f6c\u4e3a Btrfs","text":"<p>\u6ce8\u610f\u6240\u6709\u64cd\u4f5c\u5728LiveCD \u73af\u5883\u4e0b\u8fdb\u884c\u64cd\u4f5c</p> <ol> <li>\u68c0\u67e5\u6587\u4ef6\u7cfb\u7edf\u4fdd\u8bc1\u73b0\u6709\u5206\u533a\u6ca1\u6709\u95ee\u9898 <pre><code>fsck.ext4 /dev/nvme0n1p3\n</code></pre></li> <li>\u6587\u4ef6\u7cfb\u7edf\u8f6c\u6362 <pre><code>btrfs-convert /dev/nvme0n1p3\n</code></pre></li> <li>\u6302\u8f7d\u5206\u533a\u5e76\u4fee\u6539fstab <pre><code>mount /dev/nvme0n1p3 /mnt\nmount /dev/nvme0n1p4 /mnt/home\nmount /dev/nvme0n1p1 /mnt/boot\nsweapon /dev/nvme0n1p2\n\nmount -t proc none /mnt/proc\nmount -t sysfs none /mnt/sys\nmount -o bind /dev /mnt/dev\n\ngenfstab -U /mnt &gt; /mnt/etc/fstab\n</code></pre></li> <li>\u4f7f\u7528\u00a0<code>pacstrap</code>\u00a0\u811a\u672c\u5b89\u88c5\u57fa\u7840\u5305\uff1a <pre><code>arch-chroot /mnt\npacstrap /mnt base base-devel linux linux-firmware btrfs-progs\n# \u5982\u679c\u4f7f\u7528btrfs\u6587\u4ef6\u7cfb\u7edf\uff0c\u989d\u5916\u5b89\u88c5\u4e00\u4e2abtrfs-progs\u5305\npacstrap /mnt networkmanager vim sudo zsh zsh-completions\n\nmkinitcpio -P\n\nexit\n</code></pre></li> <li>\u542f\u7528\u900f\u660e\u538b\u7f29 <pre><code>btrfs filesystem defragment -r -v -czstd /mnt\n</code></pre></li> <li>\u4f7f\u7528balance \u6765\u56de\u6536\u6570\u636e <pre><code>btrfs subvolume delete /mnt/ext2_saved\nbtrfs balance start /mnt\nbtrfs balance status /mnt\n</code></pre></li> </ol>","tags":["linux"]},{"location":"arch-linux-ext4-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%BD%AC-btrfs/#_1","title":"\u6839\u76ee\u5f55\u6587\u4ef6\u8fc1\u79fb\u5230\u5b50\u5377","text":"<ol> <li>\u521b\u5efa\u5b50\u5377 <pre><code>sudo btrfs subvolume create /mnt/@\nsudo btrfs subvolume create /mnt/@home\nsudo btrfs subvol list /mnt\nID 256 gen 3500 top level 5 path @\nID 258 gen 3500 top level 5 path @home\n</code></pre></li> <li>\u540c\u6b65\u5b50\u533a\u6587\u4ef6 <pre><code>rsync -a /mnt /mnt/@\nrsync -a /mnt/home /mnt/@home\n</code></pre></li> <li>\u6302\u8f7d\u5206\u533a\u5e76\u4fee\u6539fstab <p>\u8fd9\u91cc\u8981\u6ce8\u610f\u91cd\u65b0\u6302\u8f7d\u5176\u4ed6\u7684\u5206\u533a <pre><code>mount -t btrfs -o subvol=/@,compress=zstd /dev//dev/nvme0n1p3 /mnt\nmount -t btrfs -o subvol=/@home,compress=zstd /dev//dev/nvme0n1p3 /mnt/home\n\ngenfstab -U /mnt &gt; /mnt/etc/fstab\n</code></pre></p> </li> <li>\u4fee\u6539systemd-boot \u5f15\u5bfc <pre><code>sudo blkid -p /dev/nvme0n1p3\n\nls /dev/disk/by-partuuid -la\ntotal 0\ndrwxr-xr-x 2 root root 160 Apr 14 16:07 .\ndrwxr-xr-x 8 root root 160 Apr 14 16:07 ..\nlrwxrwxrwx 1 root root \u00a015 Apr 14 16:07 1f52178e-ace5-43c8-a25a-666b6975533a -&gt; ../../nvme1n1p2\nlrwxrwxrwx 1 root root \u00a015 Apr 14 16:07 73d99787-e061-4aef-a610-278463f96cf6 -&gt; ../../nvme0n1p3\nlrwxrwxrwx 1 root root \u00a015 Apr 14 16:07 99ef2922-a9df-49e1-a193-d48b7fc9a40a -&gt; ../../nvme0n1p2\nlrwxrwxrwx 1 root root \u00a015 Apr 14 16:07 b339edf8-ea40-459e-b26d-dd70d49064b4 -&gt; ../../nvme1n1p3\nlrwxrwxrwx 1 root root \u00a015 Apr 14 16:07 be3bb32f-6193-472d-be7d-1a4f9f5d682e -&gt; ../../nvme0n1p1\nlrwxrwxrwx 1 root root \u00a015 Apr 14 16:07 c84bac03-8a3a-4f9e-a121-3a00d9187be3 -&gt; ../../nvme1n1p1\n\nvim /boot/loader/entries/arch.conf \u00a0\ntitle \u00a0\u00a0Arch Linux\nlinux \u00a0\u00a0/vmlinuz-linux\ninitrd \u00a0/amd-ucode.img\ninitrd \u00a0/initramfs-linux.img\noptions root=PARTUUID=73d99787-e061-4aef-a610-278463f96cf6 rw rootflags=subvol=/@\n</code></pre></li> </ol>","tags":["linux"]},{"location":"arch-linux-ext4-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%BD%AC-btrfs/#_2","title":"\u4fee\u6539\u5206\u533a\u5927\u5c0f","text":"<pre><code>[mars@mapc ~]$ sudo fdisk /dev/nvme0n1 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\n\nWelcome to fdisk (util-linux 2.40).\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nThis disk is currently in use - repartitioning is probably a bad idea.\nIt's recommended to umount all file systems, and swapoff all swap\npartitions on this disk.\n\n\nCommand (m for help): e\nPartition number (1-3, default 3): \u00a0\n\nNew &lt;size&gt;{K,M,G,T,P} in bytes or &lt;size&gt;S in sectors (default 915G): \u00a0\n\nPartition 3 has been resized.\n\nCommand (m for help): w\nThe partition table has been altered.\nSyncing disks.\n[mars@mapc ~]$ df -h \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\nFilesystem \u00a0\u00a0\u00a0\u00a0\u00a0Size \u00a0Used Avail Use% Mounted on\ndev \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a07.5G \u00a0\u00a0\u00a0\u00a00 \u00a07.5G \u00a0\u00a00% /dev\nrun \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a07.5G \u00a01.9M \u00a07.5G \u00a0\u00a01% /run\nefivarfs \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0148K \u00a0126K \u00a0\u00a018K \u00a088% /sys/firmware/efi/efivars\n/dev/nvme0n1p3 \u00a0512G \u00a0\u00a040G \u00a0471G \u00a0\u00a08% /\ntmpfs \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a07.5G \u00a0169M \u00a07.4G \u00a0\u00a03% /dev/shm\n/dev/nvme0n1p3 \u00a0512G \u00a0\u00a040G \u00a0471G \u00a0\u00a08% /home\n/dev/nvme0n1p1 \u00a0511M \u00a0297M \u00a0215M \u00a059% /boot\ntmpfs \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a07.5G \u00a0\u00a029M \u00a07.5G \u00a0\u00a01% /tmp\ntmpfs \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01.5G \u00a0\u00a076K \u00a01.5G \u00a0\u00a01% /run/user/1000\n/dev/nvme0n1p3 \u00a0512G \u00a0\u00a040G \u00a0471G \u00a0\u00a08% /mnt\n[mars@mapc ~]$ sudo btrfs filesystem resize max /mnt\nResize device id 1 (/dev/nvme0n1p3) from 512.00GiB to max\n[mars@mapc ~]$ df -h \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\nFilesystem \u00a0\u00a0\u00a0\u00a0\u00a0Size \u00a0Used Avail Use% Mounted on\ndev \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a07.5G \u00a0\u00a0\u00a0\u00a00 \u00a07.5G \u00a0\u00a00% /dev\nrun \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a07.5G \u00a01.9M \u00a07.5G \u00a0\u00a01% /run\nefivarfs \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0148K \u00a0126K \u00a0\u00a018K \u00a088% /sys/firmware/efi/efivars\n/dev/nvme0n1p3 \u00a0916G \u00a0\u00a040G \u00a0874G \u00a0\u00a05% /\ntmpfs \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a07.5G \u00a0169M \u00a07.4G \u00a0\u00a03% /dev/shm\n/dev/nvme0n1p3 \u00a0916G \u00a0\u00a040G \u00a0874G \u00a0\u00a05% /home\n/dev/nvme0n1p1 \u00a0511M \u00a0297M \u00a0215M \u00a059% /boot\ntmpfs \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a07.5G \u00a0\u00a029M \u00a07.5G \u00a0\u00a01% /tmp\ntmpfs \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a01.5G \u00a0\u00a076K \u00a01.5G \u00a0\u00a01% /run/user/1000\n/dev/nvme0n1p3 \u00a0916G \u00a0\u00a040G \u00a0874G \u00a0\u00a05% /mnt\n</code></pre>","tags":["linux"]},{"location":"arch-linux-ext4-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%BD%AC-btrfs/#_3","title":"\u53c2\u8003","text":"<p>Btrfs\uff1a\u8ba4\u8bc6\u3001\u4ece Ext4 \u8fc1\u79fb\u4e0e\u5feb\u7167\u65b9\u6848 archlinux \u57fa\u7840\u5b89\u88c5\u200b TLP \u5c06 Arch Linux \u5185\u6838\u4ece stable \u66f4\u6362\u4e3a LTS \u7684\u529e\u6cd5\u4e0e\u6848\u4f8b Kernel Linux ext4 \u6587\u4ef6\u7cfb\u7edf\u8f6c Btrfs</p>","tags":["linux"]},{"location":"buildroot-%E4%BD%BF%E7%94%A8-crontab-%E5%92%8C-crond-%E5%AE%8C%E6%88%90%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/","title":"Buildroot \u4f7f\u7528 crontab \u548c crond \u5b8c\u6210\u5b9a\u65f6\u4efb\u52a1","text":"<p>\u65b0\u5efa\u5b9a\u65f6\u6587\u4ef6\u914d\u7f6e <pre><code>mkdir -p /var/spool/cron/crontabs\n\ncrontab -e \n# \u624b\u52a8\u8f93\u5165\u4e0b\u9762\u7684\u914d\u7f6e\n# do daily/weekly/monthly maintenance\n# min   hour    day     month   weekday command\n*/1     *       *       *       *       run-parts /etc/periodic/15min\n0       *       *       *       *       run-parts /etc/periodic/hourly\n0       2       *       *       *       run-parts /etc/periodic/daily\n0       3       *       *       6       run-parts /etc/periodic/weekly\n0       5       1       *       *       run-parts /etc/periodic/monthly\n\n\nmkdir -p /etc/periodic/15min /etc/periodic/hourly /etc/periodic/daily /etc/periodic/mo\nnthly /etc/periodic/weekly\n\ncat &lt;&lt;EOF &gt; /etc/periodic/15min/test \n#!/bin/sh\necho \"[$0]$(date) Hi Mars ~\" &gt;&gt; /root/log.txt\nEOF\n\n# \u542f\u52a8\u5b9a\u65f6\u4efb\u52a1, -f \u524d\u53f0\u8fd0\u884c,\u9ed8\u8ba4\u540e\u53f0\u8fd0\u884c\ncrond -l 2 -f \n</code></pre></p>","tags":["linux"]},{"location":"cmos-sensor-%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/","title":"CMOS Sensor \u7684\u4e00\u4e9b\u57fa\u672c\u6982\u5ff5","text":"<ul> <li>pclk: \u662f\u63a7\u5236\u50cf\u7d20\u8f93\u51fa\u7684\u65f6\u949f\uff0c\u5373pixel\u91c7\u6837\u65f6\u949f\uff0c\u4e00\u4e2aclk\u91c7\u96c6\u4e00\u4e2a\u50cf\u7d20\u70b9 , \u5355\u4f4dMHz\u3002\u8868\u793a\u662f\u6bcf\u4e2a\u5355\u4f4d\u65f6\u95f4\u5185\uff08\u6bcf\u79d2\uff09\u91c7\u6837\u7684pixel\u6570\u91cf\u3002</li> <li>H_Blank/V_Blank: H_Blank: \u662f\u6307\u884c\u6d88\u9690\u6216\u79f0\u6c34\u5e73\u6d88\u9690</li> </ul>","tags":["kernel"]},{"location":"elf-%E6%96%87%E4%BB%B6%E6%9F%A5%E7%9C%8B/","title":"ELF \u6587\u4ef6\u67e5\u770b","text":"<p>(1) file\uff1a\u5224\u65ad\u6587\u4ef6\u7c7b\u578b</p> <pre><code>$ file /bin/ls\n</code></pre> <p>(2) readelf\uff1a\u67e5\u770bELF\u6587\u4ef6\u7684\u6240\u6709\u4fe1\u606f</p> <pre><code>$ readelf -a /bin/ls \u00a0# \u663e\u793a\u5168\u90e8\u4fe1\u606f\n</code></pre> <p>(3) objdump\uff1a\u53cd\u6c47\u7f16 ELF \u6587\u4ef6</p> <pre><code>$ objdump -d /bin/ls \u00a0# \u53cd\u6c47\u7f16\u4ee3\u7801\u6bb5\n</code></pre> <p>(4) nm\uff1a\u5217\u51fa\u7b26\u53f7\u8868</p> <pre><code>$ nm /bin/ls \u00a0# \u663e\u793a\u7b26\u53f7\uff08\u51fd\u6570\u3001\u53d8\u91cf\uff09\n</code></pre> <p>(5) ldd\uff1a\u67e5\u770b\u52a8\u6001\u4f9d\u8d56</p> <pre><code>$ ldd /bin/ls \u00a0# \u663e\u793a\u4f9d\u8d56\u7684\u5171\u4eab\u5e93\n</code></pre> <p>(6) strings\uff1a\u63d0\u53d6\u6587\u4ef6\u4e2d\u7684\u5b57\u7b26\u4e32</p> <pre><code>$ strings /bin/ls |\u00a0grep\"GNU\"# \u67e5\u627e\u5305\u542b\"GNU\"\u7684\u5b57\u7b26\u4e32\n</code></pre> <p>(7) strip\uff1a\u79fb\u9664ELF\u6587\u4ef6\u4e2d\u7684\u7b26\u53f7\u8868\u548c\u8c03\u8bd5\u4fe1\u606f</p> <pre><code>$ strip -s program \u00a0# \u51cf\u5c0f\u6587\u4ef6\u4f53\u79ef\n</code></pre> <p>(8) patchelf\uff1a\u4fee\u6539 ELF \u6587\u4ef6\u7684\u5c5e\u6027</p> <pre><code>$\u00a0patchelf --set-interpreter /lib64/ld-custom.so program \u00a0# \u4fee\u6539\u89e3\u91ca\u5668\n</code></pre>","tags":["linux"]},{"location":"elf-%E6%96%87%E4%BB%B6%E6%9F%A5%E7%9C%8B/#_1","title":"\u53c2\u8003","text":"<p>\u4e94\u5206\u949f\u5f7b\u5e95\u641e\u61c2 Linux ELF \u6587\u4ef6</p>","tags":["linux"]},{"location":"gentoo-linux-%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/","title":"Gentoo Linux \u5b89\u88c5\u6307\u5357","text":"<p>Gentoo Linux \u5b89\u88c5\u53ca\u4f7f\u7528\u6307\u5357</p>","tags":["linux"]},{"location":"lfs-%E8%AE%B0%E5%BD%95/","title":"LFS \u8bb0\u5f55","text":"","tags":["linux"]},{"location":"lfs-%E8%AE%B0%E5%BD%95/#1","title":"1) \u770b\u5f53\u524d\u76ee\u5f55\u603b\u5927\u5c0f\uff08\u4eba\u7c7b\u53ef\u8bfb\uff09","text":"<pre><code>du -sh .\n</code></pre>","tags":["linux"]},{"location":"lfs-%E8%AE%B0%E5%BD%95/#_1","title":"\u5907\u4efd","text":"<pre><code>tar -cJpf $HOME/lfs-temp-tools-12.3.tar.xz .\n</code></pre>","tags":["linux"]},{"location":"lfs-%E8%AE%B0%E5%BD%95/#_2","title":"\u8fd8\u539f","text":"<pre><code>cd $LFS\nrm -rf ./*\ntar -xpf $HOME/lfs-temp-tools-12.3.tar.xz\n</code></pre>","tags":["linux"]},{"location":"lfs-%E8%AE%B0%E5%BD%95/#entering-the-chroot-environment","title":"Entering the Chroot Environment","text":"<pre><code>sudo chroot \"$LFS\" /usr/bin/env -i   \\\n    HOME=/root                  \\\n    TERM=\"$TERM\"                \\\n    PS1='(lfs chroot) \\u:\\w\\$ ' \\\n    PATH=/usr/bin:/usr/sbin     \\\n    MAKEFLAGS=\"-j$(nproc)\"      \\\n    TESTSUITEFLAGS=\"-j$(nproc)\" \\\n    /bin/bash --login\n</code></pre>","tags":["linux"]},{"location":"lfs-%E8%AE%B0%E5%BD%95/#preparing-virtual-kernel-file-systems","title":"Preparing Virtual Kernel File Systems","text":"<pre><code>sudo mount -v --bind /dev $LFS/dev\n\nsudo mount -vt devpts devpts -o gid=5,mode=0620 $LFS/dev/pts\nsudo mount -vt proc proc $LFS/proc\nsudo mount -vt sysfs sysfs $LFS/sys\nsudo mount -vt tmpfs tmpfs $LFS/run\n\nif [ -h $LFS/dev/shm ]; then\n  sudo install -v -d -m 1777 $LFS$(realpath /dev/shm)\nelse\n  sudo mount -vt tmpfs -o nosuid,nodev tmpfs $LFS/dev/shm\nfi\n</code></pre>","tags":["linux"]},{"location":"linux-%E5%86%85%E6%A0%B8%E5%BC%80%E5%8F%91/","title":"Linux \u5185\u6838\u5f00\u53d1","text":"<p><code>cat /lib/modules/$(uname -r)/modules.builtin</code></p> <ul> <li> <p><code>lsmod</code> \u547d\u4ee4\u53ef\u4ee5\u5217\u51fa\u5f53\u524d\u7cfb\u7edf\u4e2d\u6240\u6709\u5df2\u7ecf\u52a0\u8f7d\u4e86\u7684\u6a21\u5757/\u9a71\u52a8</p> </li> <li> <p>modinfo\u547d\u4ee4\u53ef\u4ee5\u5355\u770b\u6307\u5b9a\u7684\u6a21\u5757/\u9a71\u52a8\u7684\u4fe1\u606f\uff0c\u5176\u4e2dalias\u6307\u7684\u662f\u8fd9\u4e2a\u6a21\u5757/\u9a71\u52a8\u6240\u652f\u6301\u7684\u786c\u4ef6\u7684\u578b\u53f7</p> </li> <li> <p>\u4f7f\u7528modprobe\u6216\u8005insmod\u547d\u4ee4\u53ef\u4ee5\u52a0\u8f7d\u9a71\u52a8\uff0c\u4f7f\u7528rmmod\u53ef\u4ee5\u5220\u9664\u4e00\u4e2a\u6a21\u5757/\u9a71\u52a8</p> </li> <li> </li> </ul> <p>Linux \u4e2d\u6240\u6709\u7684\u6a21\u5757\u90fd\u5b58\u653e\u5728 /lib/modules/2.6.32-279.el6.i686/modules.dep \u6587\u4ef6\u4e2d\uff0c\u5728\u5b89\u88c5\u6a21\u5757\u65f6\uff0c\u4f9d\u8d56\u8fd9\u4e2a\u6587\u4ef6\u67fb\u627e\u6240\u6709\u7684\u6a21\u5757\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u6307\u5b9a\u6a21\u5757\u6240\u5728\u4f4d\u7f6e\u7684\u7edd\u5bf9\u8def\u5f84\uff0c\u800c\u4e14\u4e5f\u4f9d\u9760\u8fd9\u4e2a\u6587\u4ef6\u6765\u89e3\u51b3\u6a21\u5757\u7684\u4f9d\u8d56\u6027\u3002</p> <p>\u5982\u679c\u8fd9\u4e2a\u6587\u4ef6\u4e22\u5931\u4e86\u600e\u4e48\u529e\uff1f\u4e0d\u7528\u62c5\u5fc3\uff0c\u4f7f\u7528 depmod \u547d\u4ee4\u4f1a\u81ea\u52a8\u626b\u63cf\u7cfb\u7edf\u4e2d\u5df2\u6709\u7684\u6a21\u5757\uff0c\u5e76\u751f\u6210 modules.dep \u6587\u4ef6\u3002\u547d\u4ee4\u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>[root@localhost ~]# depmod [\u9009\u9879]\n#\u4e0d\u52a0\u9009\u9879\uff0cdepmod\u547d\u4ee4\u4f1a\u626b\u63cf\u7cfb\u7edf\u4e2d\u7684\u5185\u6838\u6a21\u5757\uff0c\u5e76\u5199\u5165modules.dep\u6587\u4ef6\n\n\u9009\u9879\uff1a\n\n  -a\uff1a\u626b\u63cf\u6240\u6709\u6a21\u5757\uff1b\n  -A\uff1a\u626b\u63cf\u65b0\u6a21\u5757\uff0c\u53ea\u6709\u6709\u65b0\u6a21\u5757\u65f6\uff0c\u624d\u4f1a\u66f4\u65b0modules.dep\u6587\u4ef6\uff1b\n  -n\uff1a\u628a\u626b\u63cf\u7ed3\u679c\u4e0d\u5199\u5165modules.dep\u6587\u4ef6\uff0c\u800c\u662f\u8f93\u51fa\u5230\u5c4f\u5e55\u4e0a\uff1b\n</code></pre>","tags":["kernel"]},{"location":"linux-%E5%86%85%E6%A0%B8%E5%BC%80%E5%8F%91/#linux","title":"\u67e5\u770blinux \u5185\u6838\u9a71\u52a8","text":"","tags":["kernel"]},{"location":"linux-%E5%86%85%E6%A0%B8%E5%BC%80%E5%8F%91/#linux_1","title":"linux \u67e5\u770b\u8bbe\u5907\u548c\u9a71\u52a8\u5b89\u88c5\u4fe1\u606f","text":"","tags":["kernel"]},{"location":"linux-%E5%86%85%E6%A0%B8%E5%BC%80%E5%8F%91/#linux_2","title":"Linux \u5185\u6838\u7ba1\u7406","text":"","tags":["kernel"]},{"location":"linux-%E5%86%85%E6%A0%B8%E5%BC%80%E5%8F%91/#_1","title":"\u53c2\u8003","text":"<p>\u5982\u4f55\u67e5\u770bLinux \u5185\u6838\u5185\u7f6e\u9a71\u52a8 linux \u67e5\u770b\u8bbe\u5907\u4fe1\u606f\u548c\u9a71\u52a8 Linux \u5185\u6838\u6a21\u5757\u7ba1\u7406(\u67e5\u770b\\\u6dfb\u52a0\u548c\u5220\u9664)</p>","tags":["kernel"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/","title":"Markdown \u901f\u67e5\u8868","text":"","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#obsidian","title":"Obsidian \u8bed\u6cd5","text":"<ul> <li>\u659c\u4f53 \u659c\u4f53</li> <li>\u7c97\u4f53 \u7c97\u4f53</li> <li>\u7c97\u659c\u4f53</li> <li>\u5220\u9664\u7ebf</li> <li><code>\u884c\u5185\u4ee3\u7801</code></li> <li>\u6587\u7248\u9ad8\u4eae</li> <li>\u811a\u6ce8, <sup>1</sup></li> </ul>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#markdown","title":"Markdown \u901f\u67e5\u8868","text":"<p>Thanks for visiting The Markdown Guide!</p> <p>This Markdown cheat sheet provides a quick overview of all the Markdown syntax elements. It can\u2019t cover every edge case, so if you need more information about any of these elements, refer to the reference guides for basic syntax and extended syntax.</p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#basic-syntax","title":"Basic Syntax","text":"<p>These are the elements outlined in John Gruber\u2019s original design document. All Markdown applications support these elements.</p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#heading","title":"Heading","text":"","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#h1","title":"H1","text":"","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#h2","title":"H2","text":"","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#h3","title":"H3","text":"","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#bold","title":"Bold","text":"<p>bold text</p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#italic","title":"Italic","text":"<p>italicized text</p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#blockquote","title":"Blockquote","text":"<p>blockquote</p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#ordered-list","title":"Ordered List","text":"<ol> <li>First item</li> <li>Second item</li> <li>Third item</li> </ol>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#unordered-list","title":"Unordered List","text":"<ul> <li>First item</li> <li>Second item</li> <li>Third item</li> </ul>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#code","title":"Code","text":"<p><code>code</code></p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#horizontal-rule","title":"Horizontal Rule","text":"","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#link","title":"Link","text":"<p>Markdown Guide</p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#image","title":"Image","text":"","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#extended-syntax","title":"Extended Syntax","text":"<p>These elements extend the basic syntax by adding additional features. Not all Markdown applications support these elements.</p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#table","title":"Table","text":"Syntax Description Header Title Paragraph Text","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#fenced-code-block","title":"Fenced Code Block","text":"<pre><code>{\n\u00a0 \"firstName\": \"John\",\n\u00a0 \"lastName\": \"Smith\",\n\u00a0 \"age\": 25\n}\n</code></pre>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#footnote","title":"Footnote","text":"<p>Here's a sentence with a footnote. <sup>2</sup></p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#heading-id","title":"Heading ID","text":"","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#custom-id","title":"My Great Heading","text":"","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#definition-list","title":"Definition List","text":"<p>term</p> <p>: definition</p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#strikethrough","title":"Strikethrough","text":"<p>The world is flat.</p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#task-list","title":"Task List","text":"<ul> <li>[x] Write the press release</li> <li>[ ] Update the website</li> <li>[ ] Contact the media</li> </ul>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#emoji","title":"Emoji","text":"<p>That is so funny! :joy:</p> <p>(See also Copying and Pasting Emoji)</p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#highlight","title":"Highlight","text":"<p>I need to highlight these very important words.</p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#subscript","title":"Subscript","text":"<p>H<sub>2</sub>O</p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#superscript","title":"Superscript","text":"<p>X<sup>2</sup></p>","tags":["cheatsheet"]},{"location":"markdown-%E9%80%9F%E6%9F%A5%E8%A1%A8/#_1","title":"\u53c2\u8003","text":"<ul> <li>Markdown \u901f\u67e5\u8868</li> <li>\u683c\u5f0f\u5316\u4f60\u7684\u7b14\u8bb0</li> </ul> <ol> <li> <p>\u8fd9\u662f\u4e00\u4e2a\u811a\u6ce8!\u00a0\u21a9</p> </li> <li> <p>This is the footnote.\u00a0\u21a9</p> </li> </ol>","tags":["cheatsheet"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/","title":"1. \u5b89\u88c5PVE \u914d\u7f6e\u7f51\u7edc","text":"","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#11-pve","title":"1.1 \u4e0b\u8f7d&amp; \u5b89\u88c5PVE","text":"<ul> <li>\u4e0b\u8f7dPVE \u4e0b\u8f7d\u5730\u5740</li> <li>\u4f7f\u7528 Ventoy\u5b89\u88c5PVE</li> </ul>","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#12-pve","title":"1.2 \u914d\u7f6ePVE\u7f51\u7edc","text":"<p>\u7ecf\u8fc7\u591a\u6b21\u914d\u7f6e\u7f51\u53e3,\u53d1\u73b0\u4f7f\u7528\u6709\u7f51\u7edc\u7684PVE\u7f51\u7edc\u7aef\u53e3\u8bbe\u7f6e\u4e3a\u63a7\u5236\u7aef\u53e3\u6700\u597d,\u4e0d\u7136\u7f51\u7edc\u4e0d\u597d\u914d\u7f6e.\u4f8b\u5982:</p> Name Ports description vmbr0 enp1s0 enp1s0 \u8fde\u63a5\u8def\u7531\u5668 vmbr1 eno1, enp2s0,enp4s eno1 \u4e3a\u534a\u53cc\u5de5,\u5176\u4ed6\u4e3a\u5168\u53cc\u5de5 <p>vmbr0 \u8bbe\u7f6eip, gateway\u548cDNS,vmbr1\u4e0d\u7528\u8bbe\u7f6e.</p>","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#2-openwrt","title":"2. \u5b89\u88c5 OpenWrt","text":"","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#21-openwrt","title":"2.1 \u4e0b\u8f7d&amp; \u5b89\u88c5 OpenWrt","text":"<ul> <li>ImmortWrt \u4e0b\u8f7d\u5730\u5740</li> <li>\u914d\u7f6e\u865a\u62df\u673a</li> <li>\u6dfb\u52a0\u955c\u50cf\u5230\u865a\u62df\u673a\u786c\u76d8 <pre><code>qm importdisk 102 /var/lib/vz/template/iso//immortalwrt-x86-64-generic-ext4-combined-efi.img local-lvm\n</code></pre></li> </ul>","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#211-openwrt","title":"2.1.1 \u914d\u7f6eOpenWrt \u7f51\u7edc","text":"<ol> <li> <p>\u4fee\u6539IP \u5730\u5740</p> </li> <li> <p>\u6253\u5f00\u7f51\u7edc\u63a5\u53e3,\u914d\u7f6e</p> </li> </ol>","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#22-openclash","title":"2.2 \u4e0b\u8f7d\u6700\u65b0\u7684OpenClash","text":"<ul> <li>OpenClash\u4e0b\u8f7d\u5730\u5740</li> </ul>","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#23-wip","title":"2.3 [WIP]\u4f7f\u7528\u7f51\u7edc\u5171\u4eab\u786c\u76d8","text":"<p>https://zhucebaike.com/samba-on-openwrt/ https://bbs.shumeipan.com/topic/144</p>","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#231","title":"2.3.1 \u5bfc\u5165\u786c\u76d8","text":"<p>https://www.cnblogs.com/aozhejin/p/15863016.html</p> <pre><code>ls /dev/disk/by-id\n\nqm set 102 --sata1 /dev/disk/by-id/ata-SanDisk_SSD_PLUS_1000GB_23115L800072-part5\n</code></pre>","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#232","title":"2.3.2 \u521b\u5efa\u7cfb\u7edf\u7528\u6237","text":"","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#233-smaba","title":"2.3.3 \u521b\u5efaSmaba \u7528\u6237","text":"<pre><code># \u5b89\u88c5\u7528\u6237\u5de5\u5177\nopkg install shadow-groupmod shadow-useradd\n# \u521b\u5efa\u7528\u6237\u5e76\u8bbe\u7f6e\u5bc6\u7801\nuseradd -m smbusers &amp;&amp; passwd smbusers\n# \u4fee\u6539\u7528\u6237\u6240\u5c5e\u7ec4\u540d\u79f0\uff08\u521b\u5efa\u7528\u6237\u540c\u65f6\u4f1a\u521b\u5efa\u540c\u540d\u7528\u6237\u7ec4\u3002Windows \u4f7f\u7528\u73af\u5883\u4e0d\u5141\u8bb8\u7528\u6237\u548c\u7ec4\u4f7f\u7528\u76f8\u540c\u540d\u79f0\uff09\ngroupmod -n smbgroups smbusers\n\nsmbpasswd -a smbusers\n</code></pre>","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#234-smaba","title":"2.3.4 Smaba \u53c2\u6570\u914d\u7f6e","text":"","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#235","title":"2.3.5 \u6dfb\u52a0\u5171\u4eab\u76ee\u5f55","text":"","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#24-wiparia2","title":"2.4 [WIP]\u4f7f\u7528Aria2 \u914d\u7f6e\u4e0b\u8f7d\u6587\u4ef6","text":"<p>https://opclash.com/luyou/159.html</p> <ol> <li>aria2\u603b\u662f\u201c\u672a\u8fd0\u884c\u201d \u6838\u5bf9\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u548c\u9ed8\u8ba4\u4e0b\u8f7d\u8def\u5f84,==\u9ed8\u8ba4\u4e0b\u8f7d\u8def\u5f84==\u9700\u8981\u6dfb\u52a0\u53cd\u659c\u6760<code>/mnt/share/download/</code></li> <li>\u9644\u52a0\u9009\u9879\u6dfb\u52a0,\u4e0b\u8f7dBT \u78c1\u529b\u94fe\u63a5\u5f3a\u5236\u4fdd\u5b58 <pre><code>force-save=true\nseed-ratio=0.0\n</code></pre></li> <li>aria2\u4e0b\u8f7d\uff0c\u63d0\u793aRPC\u670d\u52a1\u672a\u8fde\u63a5 \u9700\u8981\u5f006800\u7aef\u53e3 <pre><code>nano /etc/config/aria2\n\nconfig aria2 'main'\n    option bt_enable_lpd 'true'\n    option enable_dht 'true'\n    option follow_torrent 'true'\n    option file_allocation 'none'\n    option save_session_interval '30'\n    list header ''\n    list extra_settings ''\n    option enabled '1'\n    option rpc_listen_port '6800'\n    option config_dir '/mnt/sda3/aria2'\u00a0\u00a0\u8fd9\u4e2a\u8def\u5f84\u6309\u81ea\u5df1\u7684\u6539\u4e00\u4e0b\n    option dir '/mnt/sda3/download'\u00a0\u00a0\u8fd9\u4e2a\u8def\u5f84\u6309\u81ea\u5df1\u7684\u6539\u4e00\u4e0b\n    option enable_log 'true'\n    option log_level 'debug'\n    option rpc_auth_method 'none'\n    option user 'root'\n</code></pre></li> <li>openwrt \u5173\u4e8e\u7f51\u9875\u8bbe\u7f6eAria2\u51fa\u73b0\u4e00\u4e2a\u6216\u591a\u4e2a\u5fc5\u9009\u9879\u503c\u4e3a\u7a7a \u9ed8\u8ba4\u9a8c\u8bc1\u65b9\u5f0f\u4e3a\u8d26\u6237\u5bc6\u7801\u9a8c\u8bc1\u65b9\u5f0f,\u4fee\u6539\u8bbe\u7f6e<code>option rpc_auth_method 'none'</code> <pre><code>nano /etc/config/aria2\n\nconfig aria2 'main'\n    option bt_enable_lpd 'true'\n    option enable_dht 'true'\n    option follow_torrent 'true'\n    option file_allocation 'none'\n    option save_session_interval '30'\n    list header ''\n    list extra_settings ''\n    option enabled '1'\n    option rpc_listen_port '6800'\n    option config_dir '/mnt/sda3/aria2'\n    option dir '/mnt/sda3/download'\n    option enable_log 'true'\n    option log_level 'debug'\n    option rpc_auth_method 'none'\n    option user 'root'\n</code></pre></li> </ol>","tags":["linux","WIP"]},{"location":"openwrt-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/#_1","title":"\u53c2\u8003","text":"<ul> <li>\u5173\u4e8earia2\u6700\u5b8c\u6574\u7684\u4e00\u7bc7</li> <li>OpenWrt \u5b89\u88c5\u914d\u7f6e Samba \u5b9e\u73b0\u7f51\u7edc\u6587\u4ef6\u5171\u4eab</li> <li>openwrt \u5173\u4e8e\u7f51\u9875\u8bbe\u7f6eAria2\u51fa\u73b0\u4e00\u4e2a\u6216\u591a\u4e2a\u5fc5\u9009\u9879\u503c\u4e3a\u7a7a</li> <li>OpenWrt \u5b89\u88c5\u53ca\u914d\u7f6e Aria2 \u8fdc\u7a0b\u4e0b\u8f7d\u6559\u7a0b</li> <li>linux\u78c1\u76d8\u5206\u533afdisk\u547d\u4ee4\u64cd\u4f5c\uff08\u5b9e\u8df5\uff09</li> <li>\u7528\u8fd9\u4e9b OpenWRT \u63d2\u4ef6\u6765\u6b66\u88c5\u4f60\u7684\u8def\u7531\u5668</li> <li>\u5728PVE\u4e2d\uff0c\u7ed9\u865a\u62df\u673a\u6302\u8f7d\u72ec\u7acb\u7684\u786c\u76d8</li> <li>PVE\u865a\u62df\u673a\u7684\u5b89\u88c5</li> <li>OpenWrt\u642d\u5efa\u6587\u4ef6\u5171\u4eab\u670d\u52a1\u2014\u2014\u57fa\u4e8esamba</li> </ul>","tags":["linux","WIP"]},{"location":"shell-%E5%91%BD%E4%BB%A4%E5%8E%BB%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E5%9B%9E%E8%BD%A6%E7%AC%A6/","title":"Shell \u547d\u4ee4\u53bb\u9664\u5b57\u7b26\u4e32\u4e2d\u56de\u8f66\u7b26","text":"<p>\u5728 Shell \u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>tr</code> \u6216 <code>sed</code> \u547d\u4ee4\u6765\u53bb\u9664\u5b57\u7b26\u4e32\u4e2d\u7684 <code>'\\r'</code> \u5b57\u7b26\u3002\u4ee5\u4e0b\u662f\u4e24\u79cd\u65b9\u6cd5\u7684\u793a\u4f8b\uff1a</p>","tags":["linux"]},{"location":"shell-%E5%91%BD%E4%BB%A4%E5%8E%BB%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E5%9B%9E%E8%BD%A6%E7%AC%A6/#tr","title":"\u4f7f\u7528 <code>tr</code> \u547d\u4ee4","text":"<pre><code>echo -e \"Hello\\rWorld\\r!\" | tr -d '\\r'\n</code></pre>","tags":["linux"]},{"location":"shell-%E5%91%BD%E4%BB%A4%E5%8E%BB%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E5%9B%9E%E8%BD%A6%E7%AC%A6/#sed","title":"\u4f7f\u7528 <code>sed</code> \u547d\u4ee4","text":"<pre><code>echo -e \"Hello\\rWorld\\r!\" | sed 's/\\r//g'\n</code></pre> <p>\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u4f1a\u8f93\u51fa\uff1a</p> <pre><code>HelloWorld!\n</code></pre> <p>\u4f60\u53ef\u4ee5\u5c06 <code>echo -e \"Hello \\r World \\r!\"</code> \u66ff\u6362\u4e3a\u4f60\u5b9e\u9645\u7684\u5b57\u7b26\u4e32\u6216\u6587\u4ef6\u5185\u5bb9\u3002</p>","tags":["linux"]},{"location":"ubuntu-%E5%BD%BB%E5%BA%95%E7%A7%BB%E9%99%A4snap/","title":"Ubuntu \u5f7b\u5e95\u79fb\u9664Snap","text":"","tags":["linux"]},{"location":"ubuntu-%E5%BD%BB%E5%BA%95%E7%A7%BB%E9%99%A4snap/#snap","title":"\u5f7b\u5e95\u79fb\u9664Snap","text":"<p>\uff081\uff09\u5220\u6389\u6240\u6709\u7684\u5df2\u7ecf\u5b89\u88c5\u7684 Snap \u8f6f\u4ef6\u3002 <pre><code>for p in $(snap list | awk '{print $1}'); do\n  sudo snap remove $p\ndone\n</code></pre> \u65e0\u6cd5\u5220\u9664snapd,\u56e0\u4e3a\u591a\u7248\u672c <pre><code>snap list --all\n\nsudo snap remove snapd --revision 13886\n\nsudo apt autoremove --purge snapd\n</code></pre> \u65e0\u6cd5\u5220\u9664firefox[^1] <pre><code>sudo systemctl stop var-snap-firefox-common-host\\\\x2dhunspell.mount\nsudo systemctl disable var-snap-firefox-common-host\\\\x2dhunspell.mount\nsnap remove --purge firefox\n</code></pre></p> <p>\uff082\uff09\u5220\u9664 Snap \u7684 Core \u6587\u4ef6\u3002 <pre><code>sudo systemctl stop snapd\nsudo systemctl disable --now snapd.socket\n\nfor m in /snap/core/*; do\n   sudo umount $m\ndone\n</code></pre></p> <p>\uff083\uff09\u5220\u9664 Snap \u7684\u7ba1\u7406\u5de5\u5177\u3002 sudo apt autoremove --purge snapd \uff084\uff09\u5220\u9664 Snap \u7684\u76ee\u5f55\u3002</p> <p><pre><code>rm -rf ~/snap\nsudo rm -rf /snap\nsudo rm -rf /var/snap\nsudo rm -rf /var/lib/snapd\nsudo rm -rf /var/cache/snapd\n</code></pre> \uff085\uff09\u914d\u7f6e APT \u53c2\u6570\uff1a\u7981\u6b62 apt \u5b89\u88c5 snapd\u3002(\u53c2\u770bpt_preferences) <pre><code>sudo sh -c \"cat &gt; /etc/apt/preferences.d/no-snapd.pref\" &lt;&lt; EOL\nPackage: snapd\nPin: release a=*\nPin-Priority: -10\nEOL\n</code></pre> \u9a8c\u8bc1 <pre><code>apt list snapd\n\nsudo apt install snapd\n</code></pre></p> <p>\u7981\u7528 snap Firefox \u7684\u66f4\u65b0\uff08Server \u7248\u4e5f\u53ef\u4ee5\u914d\u7f6e\uff09\uff1a <pre><code>sudo sh -c \"cat &gt; /etc/apt/preferences.d/no-firefox.pref\" &lt;&lt; EOL\nPackage: firefox\nPin: release a=*\nPin-Priority: -10\nEOL\n</code></pre> \u5b89\u88c5\u684c\u9762\u73af\u5883 <pre><code>sudo apt update\nsudo apt install ubuntu-desktop\n# or\nsudo apt install ubuntu-desktop-minimal\n# \u5b89\u88c5 Gnome \u8f6f\u4ef6\u5546\u5e97\nsudo apt install gnome-software\n\n# \u5b89\u88c5 DEB \u683c\u5f0f\u7684 Firefox\nsudo add-apt-repository ppa:mozillateam/ppa\n\n# \u5c06 Firefox \u5b98\u65b9 PPA \u4ed3\u5e93\u4e2d\u7684 firefox \u8bbe\u4e3a\u9ad8\u4f18\u5148\u7ea7\uff1a\nsudo sh -c \"cat &gt; /etc/apt/preferences.d/mozillateam-firefox.pref\" &lt;&lt; EOL\nPackage: firefox*\nPin: release o=LP-PPA-mozillateam\nPin-Priority: 501\nEOL\n\n# \u5b89\u88c5\u6700\u65b0\u7248\u7684 deb \u7248 Firefox\uff1a\nsudo apt update\napt list firefox  #\u73b0\u5728\u5df2\u7ecf\u4e0d\u662f Snap firefox\nsudo apt install firefox\n# \u6216\u8005 Firefox ESR\nsudo apt install firefox-esr\n</code></pre></p>","tags":["linux"]},{"location":"ubuntu-%E5%BD%BB%E5%BA%95%E7%A7%BB%E9%99%A4snap/#snap_1","title":"\u6062\u590dSnap \u7684\u65b9\u6cd5","text":"<pre><code>sudo rm /etc/apt/preferences.d/no-snap.pref\nsudo rm /etc/apt/preferences.d/no-firefox.pref\nsudo rm /etc/apt/preferences.d/mozillateam-firefox.pref\nsudo apt update\nsudo snap install snap-store\nsudo apt install firefox\n</code></pre>","tags":["linux"]},{"location":"ubuntu-%E5%BD%BB%E5%BA%95%E7%A7%BB%E9%99%A4snap/#_1","title":"\u53c2\u8003","text":"<ul> <li>Completely remove firefox snap package</li> </ul>","tags":["linux"]},{"location":"ubuntu-%E6%B2%A1%E6%9C%89%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5/","title":"Ubuntu \u6ca1\u6709\u7f51\u7edc\u8fde\u63a5","text":"<p><pre><code>sudo gedit /etc/NetworkManager/NetworkManager.conf\n</code></pre> \u5c06 <code>managed</code> \u7684 false \u6539\u4e3a true \uff0c\u6700\u7ec8\u4fee\u6539\u4e3a\uff1a <pre><code>sudo service network-manager stop\nsudo rm /var/lib/NetworkManager/NetworkManager.state\nsudo service network-manager start\n</code></pre> \u91cd\u542f\u7f51\u7edc\u670d\u52a1: <pre><code>sudo service network-manager stop\nsudo rm /var/lib/NetworkManager/NetworkManager.state\nsudo service network-manager start\n</code></pre></p>","tags":["linux"]},{"location":"windows-10-%E5%88%86%E4%BA%AB%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE/","title":"windows","text":"<p>\u6253\u5f00\u63a7\u5236\u9762\u677f\u4e2d\u7684\u7f51\u7edc\u8fde\u63a5\uff0c\u5207\u6362\u5230\u5171\u4eab\u6807\u7b7e\uff0c\u5c06\u201c\u5141\u8bb8\u5176\u5b83\u7f51\u7edc\u7528\u6237\u901a\u8fc7\u6b64\u8ba1\u7b97\u673a\u7684Internet\u8fde\u63a5\u6765\u8fde\u63a5\u201d\uff0c\u7136\u540e\u9009\u62e9\u9700\u8981\u5171\u4eab\u81f3\u7684\u7f51\u5361\u3002</p> <p>\u9009\u4e2d\u4e4b\u540e\uff0c\u7cfb\u7edf\u4f1a\u5c06\u76ee\u6807\u7f51\u5361\u7684IP\u5730\u5740\u81ea\u52a8\u8bbe\u7f6e\u4e3a\u201c192.168.137.1\u201d\uff0c\u8fd9\u6837\u670d\u52a1\u7aef\u5c31\u914d\u7f6e\u597d\u4e86\u3002\u7136\u540e\u4f60\u9700\u8981\u5728\u4e0d\u80fd\u4e0a\u7f51\u7684\u5ba2\u6237\u673a\u4e0a\uff0c\u586b\u5165\u4e00\u4e2a\u540c\u7f51\u6bb5\u7684IP\u5730\u5740\uff0c\u5982\uff1a192.168.137.10 \u63a9\u7801\u5730\u5740\u586b\u5199\u4e3a\uff1a55.255.255.0 \u7f51\u5173\u4e3a\uff1a192.168.137.1\uff0c\u8fd9\u6837\u6211\u4eec\u5ba2\u6237\u7aef\u5c31\u53ef\u4ee5\u901a\u8fc7\u670d\u52a1\u7aef\u7684\u7f51\u7edc\u4e0a\u7f51\u4e86\u3002</p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cWindows\u5728\u91cd\u65b0\u542f\u52a8\u540e\uff0c\u5171\u4eab\u7684\u8bbe\u7f6e\u867d\u7136\u8fd8\u5728\uff0c\u4f46\u5b9e\u9645\u4e0d\u80fd\u4e0a\u7f51\u4e86\uff0c\u8fd9\u5e94\u8be5\u662f\u5fae\u8f6f\u7684\u4e00\u4e2abug\u3002\u6211\u4eec\u505a\u5982\u4e0b\u5904\u7406\uff1a</p> <p>\u4f7f\u7528Win + R\u5feb\u6377\u952e\u8c03\u51fa\u8fd0\u884c\u7a97\u53e3\uff0c\u8f93\u5165regedit,\u6253\u5f00\u6ce8\u518c\u8868\u7f16\u8f91\u5668\uff0c\u4f9d\u6b21\u5b9a\u4f4d\u5230\u5982\u4e0b\u4f4d\u7f6e\uff1a</p> <pre><code>HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\SharedAccess\n\u5728\u7a7a\u767d\u5904\u53f3\u51fb\u9f20\u6807\uff0c\u65b0\u5efa\"DWORD\uff0832\u4f4d\uff09\u503c\uff08D\uff09\uff0c\u540d\u79f0\u53eb\u505a\"EnableRebootPersistConnection\"\uff0c\u5c06\u6570\u503c\u6570\u636e\u6539\u4e3a1\u3002\n</code></pre> <p>\u4fdd\u5b58\u540e\u91cd\u542f\u8ba1\u7b97\u673a\uff0c\u4e0b\u6b21\u91cd\u542f\u5c31\u4f1a\u81ea\u52a8\u5f00\u542f\u8fde\u63a5\u4e86\u3002</p>","tags":["windows"]},{"location":"windows-10-%E5%88%86%E4%BA%AB%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE/#_1","title":"\u53c2\u8003","text":"<ul> <li>\u5feb\u901f\u7684\u7f51\u7edc\u5171\u4eab\u65b9\u6cd5?</li> </ul>","tags":["windows"]},{"location":"yocoto-%E8%B0%83%E8%AF%95%E6%80%BB%E7%BB%93/","title":"Yocoto \u8c03\u8bd5\u603b\u7ed3","text":"<p>\u6dfb\u52a0\u8bbe\u5907\u6811\u7f16\u8bd1, \u4fee\u6539\u6587\u4ef6 <code>sources/meta-nxp-harpoon/conf/layer.conf</code> <pre><code>KERNEL_DEVICETREE:append:imx8mm-lpddr4-evk = \" \\\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 freescale/imx8mm-evk-harpoon.dtb \\\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 freescale/imx8mm-evk-harpoon-avb.dtb \\\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 freescale/imx8mm-evk-harpoon-industrial.dtb \\\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 freescale/imx8mm-evk-harpoon-virtio-net.dtb \\\n+++\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 freescale/sdp-dante.dtb \\\n</code></pre></p> <p>\u6dfb\u52a0 defconfig \u914d\u7f6e, \u4fee\u6539\u6587\u4ef6 <code>sources/meta-nxp-harpoon/recipes-kernel/linux/linux-imx_%.bbappend</code> <pre><code>DELTA_KERNEL_DEFCONFIG:append:mx8mm-nxp-bsp = \"imx_ch1_defconfig\"\n</code></pre></p> <p>patch \u6587\u4ef6\u751f\u6548, \u4fee\u6539\u6587\u4ef6  <code>sources/meta-nxp-harpoon/recipes-kernel/linux/linux-imx_%.bbappend</code> patch \u6587\u4ef6\u9700\u8981\u5b58\u50a8\u5728 <code>sources/meta-nxp-harpoon/recipes-kernel/linux/files</code> \u8def\u5f84\u4e0b <pre><code> `sources/meta-nxp-harpoon/recipes-kernel/linux/linux-imx_%.bbappend`\n</code></pre></p>","tags":["linux"]},{"location":"yocoto-%E8%B0%83%E8%AF%95%E6%80%BB%E7%BB%93/#_1","title":"\u5176\u4ed6\u7684\u4e00\u4e9b\u5e38\u7528\u547d\u4ee4","text":"<pre><code># \u83b7\u53d6\u6e90\u7801\nhttps://variwiki.com/index.php?title=Yocto_Customizing_U-Boot\nbitbake -c unpack virtual/kernel\nbitbake -c unpack virtual/bootloader\ncp -a tmp/work/imx8mm_lpddr4_evk-poky-linux/u-boot-imx/2023.04/git/. ..local_repos/uboot-imx\ncp -r tmp/work-shared/${MACHINE}/kernel-source ../local_repos/\n\n# \u8fd8\u6709\u4e00\u79cd\u65b9\u6cd5\uff0c\u5c31\u662f\u5c55\u5f00yocto\u6269\u5c55\u53d8\u91cf\u7684\u503c\uff0c\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5bitbake -e\u547d\u4ee4\u7684\u8f93\u51fa\u6765\u68c0\u67e5\u53d8\u91cf\u7684\u503c \u3000\n\nbitbake -e virtual/kernel | grep ^S=\n\u3000\n# \u5982\u679c\u60a8\u5df2\u7ecf\u6784\u5efa\u4e86\u4e3b\u7ebf\u7248\u672c\uff0c\u5219\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u91cd\u7f6e\u6784\u5efa\u76ee\u5f55\n\nbitbake -c clean virtual/kernel virtual/bootloader\n\nsource setup-environment build\n\nbitbake-layers  show-layers\n\nbitbake-layers create-layer ../sources/meta-ch1\n\nbitbake-layers add-layer ../sources/meta-ch1/\n\nbitbake -c cleansstate # recipes\n\nbitbake virtual/kernel\n\nbitbake -c compile -f linux-imx\n\ndtc -I dtb -O dts *.dtb &gt; my.dts\n\n\nexport  CROSS_COMPILE=/home/dewey/workspace/platin-ch1/out/yinfan_huazhu-ch1/host/bin/aarch64-buildroot-linux-gnu-\nexport ARCH=arm64\nmake defconfig imx.config\n\nexport ARCH=arm64\nexport CROSS_COMPILE=aarch64-none-linux-gnu-\n make imx_v8_defconfig\n\n# \u4f7f\u7528 make modules_install INSTALL_MOD_PATH=&lt;\u8def\u5f84&gt; , \u5982,\n$ make modules_install INSTALL_MOD_PATH=/home/jello/kernel_modules\n\n//\u83b7\u53d6\u5f53\u524d\u5185\u6838\u914d\u7f6e\n zcat /proc/config.gz || cat /boot/{config,config-$(uname -r)}\n</code></pre>","tags":["linux"]},{"location":"add-apt-repository-%E5%91%BD%E4%BB%A4%E5%AE%89%E8%A3%85%E5%8D%B8%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8/","title":"add-apt-repository \u547d\u4ee4\u5b89\u88c5,\u5378\u8f7d\u548c\u4f7f\u7528","text":"","tags":["apt","tool"]},{"location":"add-apt-repository-%E5%91%BD%E4%BB%A4%E5%AE%89%E8%A3%85%E5%8D%B8%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8/#_1","title":"\u5b89\u88c5","text":"<pre><code>sudo:  add-apt-repository: command not found\n\nsudo apt install software-properties-common\n</code></pre>","tags":["apt","tool"]},{"location":"add-apt-repository-%E5%91%BD%E4%BB%A4%E5%AE%89%E8%A3%85%E5%8D%B8%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8/#_2","title":"\u4f7f\u7528","text":"<pre><code>sudo add-apt-repositry ppa:xxxxxxx\n</code></pre>","tags":["apt","tool"]},{"location":"add-apt-repository-%E5%91%BD%E4%BB%A4%E5%AE%89%E8%A3%85%E5%8D%B8%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8/#ppa","title":"\u79fb\u9664\u4e0d\u7528\u7684PPA","text":"<ol> <li>\u4f7f\u7528software &amp; update \u79fb\u9664 software &amp; updates -&gt; other software -&gt; \u9009\u62e9PPA \u4ed3\u5e93\u70b9\u51fbremove</li> <li>\u4f7f\u7528Terminal \u5220\u9664 <pre><code># \u901a\u5e38\u6211\u4eec\u4f7f\u7528\u4ee5\u4e0b\u6307\u4ee4\u52a0\u5165PPA :\nsudo add-apt-repository \"PPA_YOU_NEED\"\n# \u8981\u5220\u9664\u53ea\u9700\u8981\u540e\u65b9\u63a5\u4e0aremove \u53c2\u6570:\nsudo add-apt-repository --remove \"PPA_YOU_NEED\"\n\n# \u624b\u52a8\u5220\u9664PPA\n# \u9996\u5148\u663e\u793a\u5b89\u88c5\u7684PPA\nsudo ls /etc/apt/sources.list.d/ -l\n\u603b\u8ba1 12\n-rw-r--r-- 1 root root 154  4\u6708 25 21:02 apandada1-ubuntu-foliate-jammy.list\n-rw-r--r-- 1 root root 190  4\u6708 25 21:02 google-chrome.list\n-rw-r--r-- 1 root root 203  4\u6708 25 21:02 vscode.list\n# \u5220\u9664foliate\nsudo rm etc/apt/sources.list.d/apandada1-ubuntu-foliate-jammy.list\n</code></pre></li> <li>\u4f7f\u7528ppa-purge \u5220\u9664PPA\u548c\u8f6f\u4ef6 <pre><code># \u5b89\u88c5ppa-purge\nsudo apt install ppa-purge\n# \u4f7f\u7528ppa-purge \u5220\u9664\nsudo ppa-purge \"PPA_YOU_WANT_TO_REMOVE\"\n# PPA url \u53ef\u4ee5\u901a\u8fc7software &amp; updates -&gt; other software \u67e5\u770b\n# \u4f7f\u7528\u4f8b\u5b50\nsudo ppa-purge http://ppa.launchpad.net/nginx/stable/ubuntu\n</code></pre></li> </ol>","tags":["apt","tool"]},{"location":"add-apt-repository-%E5%91%BD%E4%BB%A4%E5%AE%89%E8%A3%85%E5%8D%B8%E8%BD%BD%E5%92%8C%E4%BD%BF%E7%94%A8/#_3","title":"\u53c2\u8003","text":"<ul> <li>\u5982\u4f55\u79fb\u9664\u4e0d\u8981\u7684 PPA \u5009\u5eab</li> <li>add-apt-repository: command not found</li> <li>\u5982\u4f55\u5728Ubuntu/Debian\u4e2d\u6dfb\u52a0Apt\u4ed3\u5e93</li> </ul>","tags":["apt","tool"]},{"location":"apt-certificate-verification-failed/","title":"apt certificate verification failed","text":"<pre><code>touch /etc/apt/apt.conf.d/99verify-peer.conf \\\n&amp;&amp; echo &gt;&gt;/etc/apt/apt.conf.d/99verify-peer.conf \"Acquire { https::Verify-Peer false }\"\n\n apt-get -o Acquire::http::proxy=\"http://192.168.137.1:7890/\" update\n</code></pre>","tags":["apt","tool"]},{"location":"apt-certificate-verification-failed/#_1","title":"\u53c2\u8003","text":"<ul> <li>apt-get update failed because certificate verification failed because handshake failed on nodesource</li> </ul>","tags":["apt","tool"]},{"location":"apt-%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86/","title":"apt \u547d\u4ee4\u4f7f\u7528\u4ee3\u7406","text":"<pre><code># \u5728\u7ec8\u7aef\nexport http_proxy=http://yourproxyaddress:proxyport\n\n# \u6c38\u4e45\u8bbe\u7f6e\nsudo nano /etc/apt/apt.conf\n# \u5728\u6587\u4ef6\u4e2d\u6dfb\u52a0, \u4fdd\u5b58\u5e76\u9000\u51fa\nAcquire::http::Proxy \"http://yourproxyaddress:proxyport\";\nAcquire::https::Proxy \"http://yourproxyaddress:proxyport\";\n\n# \u5728.bashrc \u4e2d\u6dfb\u52a0\nnano ~/.bashrc\n\nhttp_proxy=http://username:password@yourproxyaddress:proxyport\n\nexport http_proxy\n# \u4fdd\u5b58\u5e76\u9000\u51fa\nsource ~/.bashrc\n\n# \u4e34\u65f6\u4f7f\u7528\nsudo apt -o Acquire::http::proxy=\"http://192.168.137.1:7890/\" update\n</code></pre> <ol> <li>Not\u00a0signed\u00a0-\u00a0bullseye <pre><code>sudo apt-get install -y wget\nsource /etc/os-release\nexport DISTRO=\"${VERSION_CODENAME}-stable\"\nwget -O - apt.radxa.com/$DISTRO/public.key | sudo apt-key add -\nsudo apt-get update\n</code></pre></li> </ol>","tags":["apt","tool"]},{"location":"apt-key-%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5/","title":"apt-key \u6dfb\u52a0\u516c\u94a5","text":"<p>\u68c0\u7d22 key \u5e76\u6dfb\u52a0 key : <pre><code>curl -s URL | sudo gpg --no-default-keyring --keyring gnupg-ring:/etc/apt/trusted.gpg.d/NAME.gpg --import\n\ncat URL.pub | sudo gpg --no-default-keyring --keyring gnupg-ring:/etc/apt/trusted.gpg.d/NAME.gpg --import\n\napt-key export BE1229CF|sudo gpg --dearmour -o /etc/apt/trusted.gpg.d/microsoft.gpg\n</code></pre></p> <p>\u6388\u6743\u7528\u6237 _apt : <pre><code>sudo chown _apt /etc/apt/trusted.gpg.d/NAME.gpg\n</code></pre></p>","tags":["apt","tool"]},{"location":"apt-key-%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5/#_1","title":"\u53c2\u8003","text":"<ol> <li>linux-\u8b66\u544a:apt-key is deprecated.</li> <li>Warning: apt-key is deprecated (SOLVED)</li> </ol>","tags":["apt","tool"]},{"location":"archlinux-install-record/","title":"archlinux install record","text":"","tags":["system"]},{"location":"archlinux-install-record/#1","title":"1. \u5206\u533a","text":"","tags":["system"]},{"location":"archlinux-install-record/#2","title":"2. \u5b89\u88c5 &amp; \u914d\u7f6e\u73af\u5883","text":"<pre><code>ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\nhwclock --systohc\n\npacman -S --needed base-devel vim dhcpcd\npacman -S --overwrite amd-ucode\n\nln -s /usr/bin/vim /usr/bin/vi\n\nuseradd -m -G wheel mars\npasswd mars\npacman -S sudo\nvisudo\n\npacman -S networkmanager\n\n#\u5b89\u88c5\u4e2d\u6587\u5b57\u4f53\nsudo pacman -S noto-fonts-cjk\n</code></pre>","tags":["system"]},{"location":"archlinux-install-record/#_1","title":"\u5b89\u88c5\u684c\u9762","text":"<p>\u5b89\u88c5\u684c\u9762\u9700\u8981\u5b89\u88c5 \u663e\u793a\u670d\u52a1(xorg \u6216 wayland),\u5b89\u88c5\u663e\u5361\u9a71\u52a8\u548c\u684c\u9762\u5e94\u7528</p>","tags":["system"]},{"location":"archlinux-install-record/#display-server","title":"Display server","text":"<p><code>qt5-wayland</code>\u00a0\u548c\u00a0<code>glfw-wayland</code>\u00a0\u5206\u522b\u4e3a QT5 \u548c\u00a0GLFW\u00a0\u63d0\u4f9b Wayland \u517c\u5bb9 API <pre><code>sudo pacman -S --needed wayland \\\n        xorg-xwayland libxcb egl-wayland \\\n        glfw-wayland qt5-wayland qt6-wayland gtk3 gtk4 \\\n        xorg-xlsclients\n</code></pre></p> <p>\u7528\u00a0<code>xlsclients</code>\u00a0\u68c0\u6d4b XWayland <pre><code>$ xlsclients\nmapc  gsd-xsettings\nmapc  ibus-x11\nmapc  google-chrome\nmapc  electron\nmapc  mutter-x11-frames\n</code></pre></p>","tags":["system"]},{"location":"archlinux-install-record/#_2","title":"\u5b89\u88c5\u663e\u5361\u9a71\u52a8","text":"<pre><code>sudo pacman -S --needed xf86-video-amdgpu nvidia-lts\n</code></pre> <p>\u67e5\u770b\u4f7f\u7528\u9a71\u52a8 <pre><code>$ lspci -k | grep -E \"VGA|3D\"  -A 3\n01:00.0 VGA compatible controller: NVIDIA Corporation TU106M [GeForce RTX 2060 Mobile] (rev a1)\n    Subsystem: Lenovo TU106M [GeForce RTX 2060 Mobile]\n    Kernel driver in use: nvidia\n    Kernel modules: nouveau, nvidia_drm, nvidia\n--\n06:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Renoir (rev c6)\n    Subsystem: Lenovo Renoir\n    Kernel driver in use: amdgpu\n    Kernel modules: amdgpu\n</code></pre></p> <ul> <li>can't start wayland session</li> </ul> <p>\u67e5\u770b\u5b8c\u6574\u7cfb\u7edf\u65e5\u5fd7 <pre><code>sudo journalctl -b | curl -F 'file=@-' 0x0.st\n</code></pre></p> <p>gnome \u5f3a\u5236\u542f\u7528 wayland <pre><code>7\u6708 08 13:56:50 mapc systemd[1406]: Reached target GNOME Session Manager is ready.\n7\u6708 08 13:56:50 mapc systemd[1406]: Starting GNOME Shell on Wayland...\n7\u6708 08 13:56:50 mapc systemd[1406]: Starting GNOME Shell on X11...\n7\u6708 08 13:56:50 mapc systemd[1406]: org.gnome.Shell@wayland.service: Skipped due to 'exec-condition'.\n7\u6708 08 13:56:50 mapc systemd[1406]: Condition check resulted in GNOME Shell on Wayland being skipped.\n\n# /etc/udev/rules.d/\u00a0override those in\u00a0/usr/lib/udev/rules.d/\nsudo ln -s /dev/null /etc/udev/rules.d/61-gdm.rules\n</code></pre></p>","tags":["system"]},{"location":"archlinux-install-record/#_3","title":"\u5b89\u88c5\u684c\u9762\u8f6f\u4ef6","text":"","tags":["system"]},{"location":"archlinux-install-record/#_4","title":"\u914d\u7f6e","text":"<p>\u9a71\u52a8\u65e9\u542f\u52a8 <pre><code>sudo vi\n</code></pre></p> <p>\u591a\u5c4f\u5e55 <pre><code>sudo vi /etc/X11/xorg.conf\n\nSection \"Device\"\n    Identifier    \"Device0\"\n    Driver        \"nvidia\"\n    VendorName    \"NVIDIA Corporation\"\n    BusID         \"PCI:1:0:0\"\nEndSection\n\nSection \"Device\"\n    Identifier   \"Device1\"\n    Driver       \"amdgpu\"\n    BusID        \"PCI:6:0:0\"\nEndSection\n</code></pre></p> <p>\u81ea\u52a8\u767b\u5f55 <pre><code>sudo vi /etc/gdm/custom.conf\n\n# GDM configuration storage\n\n[daemon]\n# Uncomment the line below to force the login screen to use Xorg\n#WaylandEnable=false\n\nAutomaticLoginEnable=True\nAutomaticLogin=mars\n\n[security]\n\n[xdmcp]\n\n[chooser]\n\n[debug]\n# Uncomment the line below to turn on debugging\n#Enable=true\n</code></pre></p>","tags":["system"]},{"location":"archlinux-install-record/#_5","title":"\u53c2\u8003","text":"<ul> <li>arch wiki</li> <li>arch gdm wiki</li> <li>Use Wayland with proprietary NVIDIA drivers</li> </ul>","tags":["system"]},{"location":"buildroot-%E5%A6%82%E4%BD%95%E4%BB%85%E8%8E%B7%E5%8F%96-toolchain/","title":"buildroot \u5982\u4f55\u4ec5\u83b7\u53d6 toolchain","text":"<p>A more recent way to build just the toolchain, which can be used both within and outside of Buildroot, is documented in the\u00a0Buildroot manual.</p> <p>Though\u00a0<code>make toolchain</code>\u00a0in Luca's answer does build the toolchain, it also places other host dependencies into\u00a0<code>output/host/</code>, making it slightly more difficult to get a clean toolchain as compared to\u00a0<code>make sdk</code>\u00a0below, which produces a toolchain tarball in\u00a0<code>output/images/</code>:</p>","tags":["linux"]},{"location":"buildroot-%E5%A6%82%E4%BD%95%E4%BB%85%E8%8E%B7%E5%8F%96-toolchain/#613-build-an-external-toolchain-with-buildroot","title":"6.1.3. Build an external toolchain with Buildroot","text":"<p>The Buildroot internal toolchain option can be used to create an external toolchain. Here are a series of steps to build an internal toolchain and package it up for reuse by Buildroot itself (or other projects).</p> <p>Create a new Buildroot configuration, with the following details:</p> <ul> <li>Select the appropriate\u00a0Target options\u00a0for your target CPU architecture</li> <li>In the\u00a0Toolchain\u00a0menu, keep the default of\u00a0Buildroot toolchain\u00a0for\u00a0Toolchain type, and configure your toolchain as desired</li> <li>In the\u00a0System configuration\u00a0menu, select\u00a0None\u00a0as the\u00a0Init system\u00a0and\u00a0none\u00a0as\u00a0/bin/sh</li> <li>In the\u00a0Target packages\u00a0menu, disable\u00a0BusyBox</li> <li>In the\u00a0Filesystem images\u00a0menu, disable\u00a0tar the root filesystem</li> </ul> <p>Then, we can trigger the build, and also ask Buildroot to generate a SDK. This will conveniently generate for us a tarball which contains our toolchain:</p> <pre><code>make sdk\n</code></pre> <p>This produces the SDK tarball in\u00a0<code>$(O)/images</code>, with a name similar to\u00a0<code>arm-buildroot-linux-uclibcgnueabi_sdk-buildroot.tar.gz</code>. Save this tarball, as it is now the toolchain that you can re-use as an external toolchain in other Buildroot projects.</p>","tags":["linux"]},{"location":"buildroot-%E5%A6%82%E4%BD%95%E4%BB%85%E8%8E%B7%E5%8F%96-toolchain/#_1","title":"\u53c2\u8003","text":"<p>Buildroot: install and build the toolchain only Using the generated toolchain outside Buildroot</p>","tags":["linux"]},{"location":"c-%E6%96%87%E4%BB%B6io/","title":"c \u6587\u4ef6IO","text":"<p>\u6807\u51c6\u6587\u4ef6\u63cf\u8ff0\u7b26 </p> \u6587\u4ef6\u63cf\u8ff0\u7b26 \u7528\u9014 POSIX \u540d\u79f0 stdio \u6d41 0 \u6807\u51c6\u8f93\u5165 STDIN_FILENO stdin 1 \u6807\u51c6\u8f93\u51fa STDOUT_FILENO stdout 2 \u6807\u51c6\u9519\u8bef STDERR_FILENO stderr","tags":["cheatsheet"]},{"location":"c-%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/","title":"c \u9884\u5904\u7406\u5668","text":"","tags":["cheatsheet"]},{"location":"c-%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/#_1","title":"\u5185\u7f6e\u5b8f","text":"<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\n   printf(\"File :%s\\n\", __FILE__ );\n   printf(\"Date :%s\\n\", __DATE__ );\n   printf(\"Time :%s\\n\", __TIME__ );\n   printf(\"Line :%d\\n\", __LINE__ );\n   printf(\"ANSI :%d\\n\", __STDC__ );\n\n}\n</code></pre>","tags":["cheatsheet"]},{"location":"c-%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/#_2","title":"\u53c2\u8003","text":"<ul> <li>c\u9884\u5904\u7406\u5668</li> </ul>","tags":["cheatsheet"]},{"location":"cloudflared-%E5%86%85%E7%BD%91%E4%BB%A3%E7%90%86/","title":"cloudflared \u5185\u7f51\u4ee3\u7406","text":"","tags":["linux","tool"]},{"location":"cloudflared-%E5%86%85%E7%BD%91%E4%BB%A3%E7%90%86/#cloudflared","title":"cloudflared\u6545\u969c\u89e3\u51b3","text":"<pre><code>sudo sysctl -w net.ipv4.ping_group_range='0 100'\nsudo nano /proc/sys/net/ipv4/ping_group_range\n</code></pre>","tags":["linux","tool"]},{"location":"cloudflared-%E5%86%85%E7%BD%91%E4%BB%A3%E7%90%86/#ssh","title":"ssh\u4ee3\u7406","text":"","tags":["linux","tool"]},{"location":"cloudflared-%E5%86%85%E7%BD%91%E4%BB%A3%E7%90%86/#_1","title":"\u53c2\u8003","text":"<ol> <li>HOW TO: Remote access a Raspberry Pi using a Cloudflare tunnel (node-red and ssh).</li> <li>Cloudflare Docs</li> <li>\u7528 Cloudflare Tunnel \u8fdb\u884c\u5185\u7f51\u7a7f\u900f</li> </ol>","tags":["linux","tool"]},{"location":"freebsd-13-%E5%AE%89%E8%A3%85-samba-server/","title":"freebsd 13 \u5b89\u88c5 samba server","text":"","tags":["tool"]},{"location":"freebsd-13-%E5%AE%89%E8%A3%85-samba-server/#_1","title":"\u5185\u6838\u4f18\u5316","text":"<p>Edit\u00a0<code>/etc/sysctl.conf</code></p> <pre><code>kern.maxfiles=25600\nkern.maxfilesperproc=16384\nnet.inet.tcp.sendspace=65536\nnet.inet.tcp.recvspace=65536\n</code></pre> <p>enable asynchronous I/O.This can be accomplished by adding the following line to the file\u00a0<code>/boot/loader.conf</code>:</p> <pre><code>aio_load=\"YES\"\n</code></pre> <p>To get it working without restarting, additionally execute the following command:</p> <pre><code>kldload aio\n</code></pre>","tags":["tool"]},{"location":"freebsd-13-%E5%AE%89%E8%A3%85-samba-server/#installation","title":"Installation","text":"<pre><code>pkg search samba4\nsamba413-4.13.17_8 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Free SMB/CIFS and AD/DC server and client for Unix\nsamba416-4.16.11_2 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Free SMB/CIFS and AD/DC server and client for Unix\nsudo pkg install samba416\n</code></pre>","tags":["tool"]},{"location":"freebsd-13-%E5%AE%89%E8%A3%85-samba-server/#config","title":"Config","text":"<p>create a file called <code>/usr/local/etc/smb4.conf</code></p> <pre><code>[global]\n    workgroup = MYGROUP\n    realm = mygroup.local\n    netbios name = NAS\n\n[davd data]\n    path = /home/davd\n    public = no\n    writable = yes\n    printable = no\n    guest ok = no\n    valid users = davd\n</code></pre> <p>Then just enable Samba and start it:</p> <pre><code>sysrc samba_server_enable=YES\nservice samba_server start\n</code></pre>","tags":["tool"]},{"location":"freebsd-13-%E5%AE%89%E8%A3%85-samba-server/#user-creation","title":"User creation","text":"<p>Now that the server is running, you can\u2019t still access your files because you got no credentials to log in with. By default Samba relies on system users, so after you created your system user using\u00a0<code>adduser</code>, enable it for Samba:</p> <pre><code>pdbedit -a -u davd\n</code></pre> <p>You are prompted to enter a password which will be used to authenticate against Samba.</p>","tags":["tool"]},{"location":"freebsd-13-%E5%AE%89%E8%A3%85-samba-server/#_2","title":"\u53c2\u8003","text":"<p>Samba fileserver on FreeBSD (Update FreeBSD 12) How-To: Setup NFS and Samba on FreeBSD 13</p>","tags":["tool"]},{"location":"gentoo-%E6%BA%90%E8%AE%BE%E7%BD%AE/","title":"gentoo \u6e90\u8bbe\u7f6e","text":"<p>\u5728<code>/etc/portage/make.conf</code> \u4e2d\u6dfb\u52a0: <pre><code>...\n\nGENTOO_MIRRORS=\"https://mirrors.ustc.edu.cn/gentoo\"\n</code></pre></p> <p>\u7f51\u6613     Portage: \u5df2\u5931\u6548     Distfiles:\u00a0http://mirrors.163.com/gentoo/</p> <p>\u641c\u72d0     Portage: \u4e0d\u63d0\u4f9b     Distfiles:\u00a0http://mirrors.sohu.com/gentoo/</p> <p>\u963f\u91cc\u4e91     Portage\uff1a\u4e0d\u63d0\u4f9b     Distfiles:\u00a0http://mirrors.aliyun.com/gentoo/</p> <p>[*]\u4e2d\u56fd\u79d1\u5b66\u6280\u672f\u5927\u5b66\uff08USTC\uff09     Portage:\u00a0http://mirrors.ustc.edu.cn/gentoo/     Distfiles: rsync://rsync.mirrors.ustc.edu.cn/gentoo-portage/</p> <p>\u53a6\u95e8\u5927\u5b66     Portage: \u4e0d\u63d0\u4f9b     Distfiles:\u00a0http://mirrors.xmu.edu.cn/gentoo/</p> <p>\u65e5\u672c\u5317\u9646\u5c16\u7aef\u79d1\u5b66\u6280\u672f\u5927\u5b66\u9662\u5927\u5b66\uff08JAIST\uff09     Portage: \u4e0d\u63d0\u4f9b     Distfiles:\u00a0http://ftp.iij.ad.jp/pub/linux/gentoo/</p>","tags":["linux"]},{"location":"gentoo-%E6%BA%90%E8%AE%BE%E7%BD%AE/#_1","title":"\u53c2\u8003","text":"<ul> <li>\u56fd\u5185\u771f\u7684\u662f\u6ca1\u591a\u5c11\u7528gentoo\u4e86\u5417\uff1f</li> </ul>","tags":["linux"]},{"location":"git--merge-vs-rebase/","title":"git  Merge vs Rebase","text":"","tags":["git","tool"]},{"location":"git--merge-vs-rebase/#_1","title":"\u53c2\u8003","text":"<ul> <li>Merge vs Rebase - \u77e5\u4e4e (zhihu.com)</li> </ul>","tags":["git","tool"]},{"location":"git-diff-%E7%94%9F%E6%88%90patch-%E5%B9%B6%E5%BA%94%E7%94%A8/","title":"git diff \u751f\u6210patch \u5e76\u5e94\u7528","text":"<pre><code>git diff lwdev:ipa_c master &gt; dev1201.patch\n\ngit apply --directory=ipa_c --stat  dev1201.patch\ngit apply --directory=ipa_c --check  dev1201.patch\ngit apply --directory=ipa_c dev1201.patch\n</code></pre>","tags":["git","tool"]},{"location":"git-diff-%E7%94%9F%E6%88%90patch-%E5%B9%B6%E5%BA%94%E7%94%A8/#_1","title":"\u4fee\u590d\u5c3e\u968f\u7a7a\u767d","text":"<pre><code>git apply --reject --whitespace=fix  *.patch\n</code></pre>","tags":["git","tool"]},{"location":"git-diff-%E7%94%9F%E6%88%90patch-%E5%B9%B6%E5%BA%94%E7%94%A8/#commit-patch","title":"\u901a\u8fc7commit \u751f\u6210patch","text":"<pre><code> git format-patch 064c076cff2896e0a2bbb6af57415d74c055eff2 //HEAD~n commit\n</code></pre>","tags":["git","tool"]},{"location":"git-pull-request/","title":"\u5982\u4f55\u4f18\u96c5\u7684 pull request","text":"<p>\u5982\u4f55\u4f18\u96c5\u5730pull request</p>","tags":["git"]},{"location":"git-%E4%BF%AE%E5%89%AA%E5%88%86%E6%94%AF/","title":"git \u4fee\u526a\u5206\u652f","text":"<pre><code># \u4fee\u526a\u4e0d\u5b58\u5728 \u8fdc\u7a0b\u5206\u652f\ngit fetch --prune\n# \u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740\ngit remote -v\n# \u5220\u9664\u8fdc\u7a0b\u5206\u652f\ngit push &lt;remote&gt; --delete &lt;branch&gt;\n# \u63a8\u9001\u672c\u5730\u5206\u652f\u5230\u8fdc\u7a0b\ngit checkout -b feature-branch\ngit push origin feature-branch:origin-branch\n# \u62c9\u53bb\u8fdc\u7a0b\u5206\u652f\u5230\u672c\u5730\ngit checkout -b feature-branch origin/feature-branch\n</code></pre>","tags":["git","tool"]},{"location":"git-%E4%BF%AE%E6%94%B9%E7%AC%AC%E4%B8%80%E4%B8%AAcommit-%E4%BF%A1%E6%81%AF/","title":"git \u4fee\u6539\u7b2c\u4e00\u4e2acommit \u4fe1\u606f","text":"\u4fee\u6539 commit \u63d0\u4ea4\u4fe1\u606f\u573a\u666f \u64cd\u4f5c\u547d\u4ee4 \u4fee\u6539\u6700\u65b0 commit \u7684\u63d0\u4ea4\u4fe1\u606f <code>git commit --amend</code> \u4fee\u6539\u67d0\u5386\u53f2 commit \u7684\u63d0\u4ea4\u4fe1\u606f <code>git rebase -i father_commitId</code> \u4fee\u6539\u7b2c\u4e00\u4e2a commit \u7684\u63d0\u4ea4\u4fe1\u606f <code>git rebase -i --root</code>","tags":["git","tool"]},{"location":"git-%E4%BF%AE%E6%94%B9%E7%AC%AC%E4%B8%80%E4%B8%AAcommit-%E4%BF%A1%E6%81%AF/#_1","title":"\u53c2\u8003","text":"<p>\u5982\u4f55\u4fee\u6539\u7b2c\u4e00\u4e2a commit \u7684\u63d0\u4ea4\u4fe1\u606f</p>","tags":["git","tool"]},{"location":"git-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/","title":"git \u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<pre><code># \u67e5\u770bgit\u914d\u7f6e\ngit config --list --show-origin\n\n# \u7f16\u8f91\u914d\u7f6e\ngit config --global --edit\n\n# \u6dfb\u52a0\u914d\u7f6e\n[core]\n    editor = code --wait  --new-window\n    # editor = nano -w\n[diff]\n    tool = vscode-diff\n[difftool]\n    prompt = false\n[difftool \"vscode-diff\"]\n    cmd = code --wait --diff $LOCAL $REMOTE\n[merge]\n    tool = vscode-merge\n[mergetool \"vscode-merge\"]\n    cmd = code --wait $MERGED\n</code></pre>","tags":["git","tool"]},{"location":"git-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#_1","title":"\u53c2\u8003","text":"<ul> <li>Git\u67e5\u770b\u548c\u7f16\u8f91\u914d\u7f6e\u5e76\u8bbe\u7f6e\u9ed8\u8ba4\u7f16\u8f91\u5668\u4e3aVSCode</li> <li>A3.1 Appendix C: Git Commands - Setup and Config</li> </ul>","tags":["git","tool"]},{"location":"git-%E5%88%86%E5%9D%97%E6%8E%A8%E9%80%81/","title":"git \u5206\u5757\u63a8\u9001","text":"<pre><code># Adjust the following variables as necessary\nREMOTE=backups\nBRANCH=$(git rev-parse --abbrev-ref HEAD)\nBATCH_SIZE=500\n\n# check if the branch exists on the remote\nif git show-ref --quiet --verify refs/remotes/$REMOTE/$BRANCH; then\n    # if so, only push the commits that are not on the remote already\n    range=$REMOTE/$BRANCH..HEAD\nelse\n    # else push all the commits\n    range=HEAD\nfi\n# count the number of commits to push\nn=$(git log --first-parent --format=format:x $range | wc -l)\n\n# push each batch\nfor i in $(seq $n -$BATCH_SIZE 1); do\n    # get the hash of the commit to push\n    h=$(git log --first-parent --reverse --format=format:%H --skip $i -n1)\n    echo \"Pushing $h...\"\n    git push $REMOTE ${h}:refs/heads/$BRANCH\ndone\n# push the final partial batch\ngit push $REMOTE HEAD:refs/heads/$BRANCH\n</code></pre>","tags":["git","tool"]},{"location":"git-%E5%90%88%E5%B9%B6commit/","title":"git \u5408\u5e76commit","text":"<pre><code># \u4f7f\u7528rebase \u64cd\u4f5c\u6765\u5408\u5e76commit\ngit rebase -i &lt;after-this-commit&gt;\n# \u4eceHEAD\u7248\u672c\u5f00\u59cb\u5f80\u8fc7\u53bb\u65703\u4e2a\u7248\u672c\ngit rebase -i HEAD~3\n# \u8f93\u5165rebase\u547d\u4ee4\u4e4b\u540e\u4f1a\u6253\u5f00\u4e00\u4e2a\u7f16\u8f91\u5668 \u53c2\u8003\u4e0b\u9762\u6765\u4fee\u6539\u6587\u672c:\n# Commands:\n# p, pick &lt;commit&gt; = use commit\n# r, reword &lt;commit&gt; = use commit, but edit the commit message\n# e, edit &lt;commit&gt; = use commit, but stop for amending\n# s, squash &lt;commit&gt; = use commit, but meld into previous commit\n# f, fixup [-C | -c] &lt;commit&gt; = like \"squash\" but keep only the previous\n#                    commit's log message, unless -C is used, in which case\n#                    keep only this commit's message; -c is same as -C but\n#                    opens the editor\n# x, exec &lt;command&gt; = run command (the rest of the line) using shell\n# b, break = stop here (continue rebase later with 'git rebase --continue')\n# d, drop &lt;commit&gt; = remove commit\n# l, label &lt;label&gt; = label current HEAD with a name\n# t, reset &lt;label&gt; = reset HEAD to a label\n# m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]\n#         create a merge commit using the original merge commit's\n#         message (or the oneline, if no original merge commit was\n#         specified); use -c &lt;commit&gt; to reword the commit message\n# u, update-ref &lt;ref&gt; = track a placeholder for the &lt;ref&gt; to be updated\n#                       to this position in the new commits. The &lt;ref&gt; is\n#                       updated at the end of the rebase\n#\n# These lines can be re-ordered; they are executed from top to bottom.\n#\n# If you remove a line here THAT COMMIT WILL BE LOST.\n#\n# However, if you remove everything, the rebase will be aborted.\n\n# \u63a8\u8350\u4f7f\u7528fixup \u5408\u5e76commit \u548c\u4f7f\u7528reword \u6765\u4fee\u6539\u63d0\u4ea4\u4fe1\u606f\n</code></pre>","tags":["git","tool"]},{"location":"git-%E5%90%88%E5%B9%B6commit/#_1","title":"\u53c2\u8003","text":"<ul> <li>Git-rebase-\u5408\u5e76\u591a\u4e2acommit</li> <li>Git \u5408\u5e76\u591a\u4e2a commit\uff0c\u4fdd\u6301\u5386\u53f2\u7b80\u6d01</li> </ul>","tags":["git","tool"]},{"location":"git-%E5%90%8C%E6%AD%A5fork-%E6%BA%90%E4%BB%93%E5%BA%93/","title":"git \u540c\u6b65Fork \u6e90\u4ed3\u5e93","text":"","tags":["git","tool"]},{"location":"git-%E5%90%8C%E6%AD%A5fork-%E6%BA%90%E4%BB%93%E5%BA%93/#1","title":"1. \u914d\u7f6e\u4e0a\u6e38\u4ed3\u5e93\u5730\u5740","text":"<pre><code>git remote -v\n&gt; origin  https://github.com/YOUR_USERNAME/YOUR_FORK.git (fetch)\n&gt; origin  https://github.com/YOUR_USERNAME/YOUR_FORK.git (push)\n\ngit remote add upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git\ngit remote -v\n&gt; origin    https://github.com/YOUR_USERNAME/YOUR_FORK.git (fetch)\n&gt; origin    https://github.com/YOUR_USERNAME/YOUR_FORK.git (push)\n&gt; upstream  https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (fetch)\n&gt; upstream  https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (push)\n</code></pre>","tags":["git","tool"]},{"location":"git-%E5%90%8C%E6%AD%A5fork-%E6%BA%90%E4%BB%93%E5%BA%93/#2-fork","title":"2. \u540c\u6b65fork\u4ed3\u5e93","text":"<pre><code>git fetch upstream\n&gt; remote: Counting objects: 75, done.\n&gt; remote: Compressing objects: 100% (53/53), done.\n&gt; remote: Total 62 (delta 27), reused 44 (delta 9)\n&gt; Unpacking objects: 100% (62/62), done.\n&gt; From https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY\n&gt;  * [new branch]      main     -&gt; upstream/main\n\ngit checkout main\n&gt; Switched to branch 'main'\n\ngit merge upstream/main\n&gt; Updating a422352..5fdff0f\n&gt; Fast-forward\n&gt;  README                    |    9 -------\n&gt;  README.md                 |    7 ++++++\n&gt;  2 files changed, 7 insertions(+), 9 deletions(-)\n&gt;  delete mode 100644 README\n&gt;  create mode 100644 README.md\n\ngit merge upstream/main\n&gt; Updating 34e91da..16c56ad\n&gt; Fast-forward\n&gt;  README.md                 |    5 +++--\n&gt;  1 file changed, 3 insertions(+), 2 deletions(-)\n</code></pre>","tags":["git","tool"]},{"location":"git-%E5%90%8C%E6%AD%A5fork-%E6%BA%90%E4%BB%93%E5%BA%93/#_1","title":"\u53c2\u8003","text":"<ol> <li>syncing a fork</li> <li>gitlab\u6216github\u4e0bfork\u540e\u5982\u4f55\u540c\u6b65\u6e90\u7684\u65b0\u66f4\u65b0\u5185\u5bb9\uff1f</li> </ol>","tags":["git","tool"]},{"location":"git-%E5%B0%86token-%E6%B7%BB%E5%8A%A0%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E9%93%BE%E6%8E%A5%E4%B8%AD/","title":"git \u5c06token \u6dfb\u52a0\u5230\u8fdc\u7a0b\u4ed3\u5e93\u94fe\u63a5\u4e2d","text":"<p>\u5c06token \u6dfb\u52a0\u5230\u8fdc\u7a0b\u4ed3\u5e93\u94fe\u63a5\u4e2d</p> <pre><code>git remote set-url origin https://&lt;your_token&gt;@github.com/&lt;USERNAME&gt;/&lt;REPO&gt;.git\n</code></pre> <ul> <li><code>&lt;your_token&gt;</code>\uff1a\u6362\u6210\u4f60\u81ea\u5df1\u5f97\u5230\u7684token</li> <li><code>&lt;USERNAME&gt;</code>:\u662f\u4f60\u81ea\u5df1github\u7684\u7528\u6237\u540d</li> <li><code>&lt;REPO&gt;</code>\uff1a\u662f\u4f60\u7684\u4ed3\u5e93\u540d\u79f0</li> </ul>","tags":["git","tool"]},{"location":"git-%E5%B0%86token-%E6%B7%BB%E5%8A%A0%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E9%93%BE%E6%8E%A5%E4%B8%AD/#_1","title":"\u53c2\u8003","text":"<ul> <li>Github\u4f7f\u7528\u57fa\u4e8e\u4ee4\u724c\u7684\u8eab\u4efd\u9a8c\u8bc1</li> </ul>","tags":["git","tool"]},{"location":"%E4%BD%BF%E7%94%A8git-%E6%89%93%E5%8C%85%E4%BB%93%E5%BA%93/","title":"\u4f7f\u7528git \u6253\u5305\u4ed3\u5e93","text":"<pre><code>git archive --format=zip --output=\"./release.zip\"  commit\n</code></pre>","tags":["git","tool"]},{"location":"git-%E6%9F%A5%E7%9C%8B%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95/","title":"git \u67e5\u770b\u5386\u53f2\u8bb0\u5f55","text":"<pre><code>git log --graph --abbrev-commit --decorate --date=relative --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)' --all\n</code></pre> <pre><code>git log --all --decorate --oneline --grap\n</code></pre>","tags":["git","tool"]},{"location":"git-%E8%AE%BE%E7%BD%AE%E5%92%8C%E5%8F%96%E6%B6%88%E4%BB%A3%E7%90%86/","title":"git \u8bbe\u7f6e\u548c\u53d6\u6d88\u4ee3\u7406","text":"<pre><code>git config --global http.proxy http://127.0.0.1:1080\ngit config --global https.proxy http://127.0.0.1:1080\n\ngit config --global http.proxy 'socks5://127.0.0.1:1080'\ngit config --global https.proxy 'socks5://127.0.0.1:1080'\n\ngit config --global --unset http.proxy\ngit config --global --unset https.proxy\n\n#\u53ea\u5bf9github.com\ngit config --global http.https://github.com.proxy http://192.168.137.1:7890\n#\u53d6\u6d88\u4ee3\u7406\ngit config --global --unset http.https://github.com.proxy)\n</code></pre>","tags":["git","tool"]},{"location":"git-%E8%AE%BE%E7%BD%AE%E5%92%8C%E5%8F%96%E6%B6%88%E4%BB%A3%E7%90%86/#_1","title":"\u53c2\u8003","text":"<ol> <li>git\u8bbe\u7f6e\u548c\u53d6\u6d88\u4ee3\u7406</li> </ol>","tags":["git","tool"]},{"location":"git%E5%88%86%E5%89%B2commit-%E6%8E%A8%E9%80%81%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/","title":"git\u5206\u5272commit \u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93","text":"<pre><code># Adjust the following variables as necessary\nREMOTE=origin\nBRANCH=$(git rev-parse --abbrev-ref HEAD)\nBATCH_SIZE=500\n\n# check if the branch exists on the remote\nif git show-ref --quiet --verify refs/remotes/$REMOTE/$BRANCH; then\n\u00a0 \u00a0 # if so, only push the commits that are not on the remote already\n\u00a0 \u00a0 range=$REMOTE/$BRANCH..HEAD\nelse\n\u00a0 \u00a0 # else push all the commits\n\u00a0 \u00a0 range=HEAD\nfi\n\n# count the number of commits to push\nn=$(git log --first-parent --format=format:x $range | wc -l)\n\n# push each batch\nfor i in $(seq $n -$BATCH_SIZE 1); do\n\u00a0 \u00a0 # get the hash of the commit to push\n\u00a0 \u00a0 h=$(git log --first-parent --reverse --format=format:%H --skip $i -n1)\n\u00a0 \u00a0 echo \"Pushing $h...\"\n\u00a0 \u00a0 git push $REMOTE ${h}:refs/heads/$BRANCH\ndone\n\n# push the final partial batch\ngit push $REMOTE HEAD:refs/heads/$BRANCH\n</code></pre>","tags":["git","tool"]},{"location":"git%E5%88%86%E5%89%B2commit-%E6%8E%A8%E9%80%81%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/#_1","title":"\u53c2\u8003","text":"<ul> <li>Github remote push pack size exceeded</li> </ul>","tags":["git","tool"]},{"location":"imx8mm-sai-rx-%E6%97%B6%E9%92%9F%E7%BA%BF%E9%85%8D%E7%BD%AE/","title":"imx8mm sai rx \u65f6\u949f\u7ebf\u914d\u7f6e","text":"<pre><code>For future reference, here is the summary of what these device tree properties do to the fsl-sai configuration:  \n\u4e3a\u4e86\u4f9b\u5c06\u6765\u53c2\u8003\uff0c\u4ee5\u4e0b\u603b\u7ed3\u4e86\u8fd9\u4e9b\u8bbe\u5907\u6811\u5c5e\u6027\u5bf9 fsl-sai \u914d\u7f6e\u7684\u4f5c\u7528\uff1a\n\n* Adding no synchronization properties results in the default configuration which is Rx synchronized with Tx\u00a0  \n* \u4e0d\u6dfb\u52a0\u540c\u6b65\u5c5e\u6027\u4f1a\u5bfc\u81f4\u9ed8\u8ba4\u914d\u7f6e\uff0c\u5373 Rx \u4e0e Tx \u540c\u6b65\n\n* Adding\u00a0**fsl,sai-synchronous-rx**\u00a0results with Tx being synchronized with Rx\u00a0  \n* \u6dfb\u52a0**fsl,sai-synchronous-rx**\u7ed3\u679c\uff0cTx \u4e0e Rx \u540c\u6b65\n\n*Adding\u00a0**fsl,sai-asynchronous**\u00a0clears synchronization bits for both Tx and Rx, thus operating on their timing.  \n*\u6dfb\u52a0**fsl,sai-asynchronous**\u4f1a\u6e05\u9664 Tx \u548c Rx \u7684\u540c\u6b65\u4f4d\uff0c\u4ece\u800c\u6309\u5176\u65f6\u5e8f\u8fdb\u884c\u64cd\u4f5c\u3002\n\n* Adding both\u00a0**fsl,sai-synchronous-rx**\u00a0\u00a0and\u00a0**fsl,sai-asynchronous**\u00a0ends up in an error as they are mutually exclusive  \n* \u540c\u65f6\u6dfb\u52a0**fsl,sai-synchronous-rx**\u548c**fsl,sai-asynchronous**\u6700\u7ec8\u4f1a\u51fa\u73b0\u9519\u8bef\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u4e92\u65a5\u7684\n</code></pre>","tags":["kernel"]},{"location":"imx8mm-sai-rx-%E6%97%B6%E9%92%9F%E7%BA%BF%E9%85%8D%E7%BD%AE/#_1","title":"\u4f8b\u5b50","text":"<pre><code>&amp;sai3 {\n\n\u00a0 \u00a0 pinctrl-names = \"default\";\n\n\u00a0 \u00a0 pinctrl-0 = &lt;&amp;pinctrl_sai3&gt;;\n\n\u00a0 \u00a0 assigned-clocks = &lt;&amp;clk IMX8MM_CLK_SAI3_SRC&gt;,\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 &lt;&amp;clk IMX8MM_CLK_SAI3_DIV&gt;;\n\n\u00a0 \u00a0 assigned-clock-parents = &lt;&amp;clk IMX8MM_AUDIO_PLL1_OUT&gt;;\n\n\u00a0 \u00a0 assigned-clock-rates = &lt;0&gt;,&lt;24576000&gt;;\n\n\u00a0 \u00a0 fsl,sai-synchronous-rx;\n\n\u00a0 \u00a0 status = \"okay\";\n\n};\n</code></pre>","tags":["kernel"]},{"location":"imx8mm-sai-rx-%E6%97%B6%E9%92%9F%E7%BA%BF%E9%85%8D%E7%BD%AE/#_2","title":"\u53c2\u8003","text":"<ul> <li>How to Sync SAI RX to TX? </li> <li>fsl-sai.txt</li> </ul>","tags":["kernel"]},{"location":"linux-fan-driver/","title":"Linux fan driver","text":"<pre><code>+   fan0: fan {\n+       compatible = \"gpio-fan\";\n+       pinctrl-names = \"default\";\n+       pinctrl-0 = &lt;&amp;pinctrl_fan&gt;;\n+       gpio-fan,speed-map = &lt;0     0\n+                     13000 1&gt;;\n+       gpios = &lt;&amp;gpio5 4 GPIO_ACTIVE_HIGH&gt;;\n+       #cooling-cells = &lt;2&gt;;\n+   };\n+\n+   thermal-zones {\n+       soc-thermal {\n+           trips {\n+               active1: trip2 {\n+                   temperature = &lt;60000&gt;;\n+                   hysteresis = &lt;2000&gt;;\n+                   type = \"active\";\n+               };\n+           };\n+\n+           cooling-maps {\n+               map1 {\n+                   trip = &lt;&amp;active1&gt;;\n+                   cooling-device = &lt;&amp;fan0 1 THERMAL_NO_LIMIT&gt;;\n+               };\n+           };\n+       };\n+   };\n</code></pre>","tags":["linux"]},{"location":"linux-fan-driver/#_1","title":"\u53c2\u8003","text":"<p>imx8mp-phyboard-pollux-rdk.dts.patch rk3399 linux \u98ce\u6247\u8c03\u8bd5 Rockchip RK3399 - GPIO&amp;PWM\u98ce\u6247\u8c03\u8bd5 </p>","tags":["linux"]},{"location":"linux-%E4%B8%AD%E4%BD%BF%E7%94%A8-ctrlz-%E5%81%9C%E6%AD%A2%E4%BB%BB%E5%8A%A1%E5%90%8E%E5%A6%82%E4%BD%95%E6%81%A2%E5%A4%8D%E4%BB%BB%E5%8A%A1/","title":"linux \u4e2d\u4f7f\u7528 ctrl+z \u505c\u6b62\u4efb\u52a1\u540e\u5982\u4f55\u6062\u590d\u4efb\u52a1","text":"<p>ctrl+z\u7684\u4f5c\u7528\u662f\u505c\u6b62\u4efb\u52a1\uff0c\u8981\u6062\u590d\u505c\u6b62\u7684\u4efb\u52a1\u8981\u4f7f\u7528fg\u547d\u4ee4</p> <pre><code>[root@localhost ~]# jobs\n[1]+  \u5df2\u505c\u6b62               top\n[root@localhost ~]# fg 1\n</code></pre> <p>fg [\u4efb\u52a1\u5e8f\u53f7]\uff0c\u76f4\u63a5\u7528fg\u547d\u4ee4\uff0c\u6062\u590d\u7684\u662f\u6700\u65b0\u505c\u6b62\u7684\u4e00\u6761\u4efb\u52a1</p>","tags":["linux"]},{"location":"linux-%E4%B8%AD%E4%BD%BF%E7%94%A8-ctrlz-%E5%81%9C%E6%AD%A2%E4%BB%BB%E5%8A%A1%E5%90%8E%E5%A6%82%E4%BD%95%E6%81%A2%E5%A4%8D%E4%BB%BB%E5%8A%A1/#_1","title":"\u53c2\u8003","text":"<p> Linux\u4e2d\u4f7f\u7528ctrl+z\u505c\u6b62\u4efb\u52a1\u540e\u5982\u4f55\u6062\u590d\u4efb\u52a1</p>","tags":["linux"]},{"location":"linux-%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8/","title":"linux \u7528\u6237\u4f7f\u7528","text":"","tags":["linux"]},{"location":"linux-%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8/#_1","title":"\u67e5\u770b\u7528\u6237\u7ec4","text":"<pre><code>groups\nrock sudo audio video\ngroups rock\nrock : rock sudo audio video xrdp\n</code></pre> <p>\u6dfb\u52a0\u7528\u6237\u8ffd\u52a0\u5230\u7ec4</p> <pre><code>sudo usermod -a -G group user\n</code></pre>","tags":["linux"]},{"location":"linux-%E7%BC%A9%E5%B0%8F%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F/","title":"linux \u7f29\u5c0f\u5206\u533a\u5927\u5c0f","text":"<p>\u91cd\u542f\u5230\u00a0<code>LiveCD</code></p> <pre><code># \u67e5\u770b\u5206\u533a \u6216\u8005\u4f7f\u7528 fdisk -l\nlsblk\n# \u68c0\u67e5\u8c03\u6574\u7684\u5206\u533a\ne2fsck -f /dev/sda1\n# \u5206\u533a\u8c03\u6574\u5230\u524d100G\u7a7a\u95f4\nresize2fs /dev/sda1 100G\n\u5220\u9664sda1 \u5206\u533a\u5e76\u91cd\u65b0\u65b0\u5efasda1 \u5206\u533a\u4e3a\u7f29\u5c0f\u540e\u7684\u5927\u5c0f,w\u4fdd\u5b58\nfdisk /dev/sda\n# \u518d\u6b21\u68c0\u67e5\u5206\u533a\ne2fsck -f /dev/sda1\n</code></pre>","tags":["linux"]},{"location":"linux-%E7%BC%A9%E5%B0%8F%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F/#_1","title":"\u53c2\u8003","text":"<p>\u65e0\u635f\u8c03\u6574EXT4\u5206\u533a\u5927\u5c0f  \u5728\u7ec8\u7aef\u4e0b\u8c03\u6574ext4\u6587\u4ef6\u7cfb\u7edf\u7684\u5927\u5c0f ProxmoxVE(PVE) \u51cf\u5c0f\u7f29\u51cf\u865a\u62df\u673a\u786c\u76d8\u8bbe\u7f6e\u7684\u7a7a\u95f4\u5927\u5c0f Resize disks</p>","tags":["linux"]},{"location":"linux-%E7%BD%91%E7%BB%9C%E6%8E%92%E6%9F%A5/","title":"linux \u7f51\u7edc\u6392\u67e5","text":"<p>\u67e5\u770b\u7f51\u5173</p> <p><code>route  -n</code></p> <p>\u67e5\u770b DNS</p> <p><code>nslookup baidu.com</code></p>","tags":["linux"]},{"location":"linux-%E7%BD%91%E7%BB%9C%E6%8E%92%E6%9F%A5/#_1","title":"\u53c2\u8003","text":"<p>Linux\u7cfb\u7edf\u6392\u67e54\u2014\u2014\u7f51\u7edc\u7bc7</p>","tags":["linux"]},{"location":"openocd-%E4%BD%BF%E7%94%A8/","title":"openocd \u4f7f\u7528","text":"","tags":["linux"]},{"location":"openocd-%E4%BD%BF%E7%94%A8/#openocd_1","title":"\u5b89\u88c5openocd","text":"<pre><code>apt-get install libhidapi-dev libhidapi-libusb0  libgpiod-dev # CMSIS-DAP \u5fc5\u9700\u8981\u5b89\u88c5HIDAPI\napt install openocd\n</code></pre>","tags":["linux"]},{"location":"openocd-%E4%BD%BF%E7%94%A8/#cmsis-dap","title":"CMSIS-DAP \u8fde\u63a5","text":"<ul> <li>\u67e5\u770b usb \u4fe1\u606f</li> </ul> <pre><code>$ lsusb  \n[...]  \nBus 001 Device 007: ID 03eb:2111 Atmel Corp.  \n[...]  \n\n~$ lsusb -v -s 001:007 | grep \"iSerial\"  \niSerial 3 ATML1803040200001055\n</code></pre> <ul> <li>\u6dfb\u52a0udev \u89c4\u5219</li> </ul> <pre><code> sudo vim /etc/udev/rules.d/49-cmsis-dap.rules &lt;&lt;EOF\nSUBSYSTEMS==\"usb\", ATTRS{idVendor}==\"03eb\", ATTRS{idProduct}==\"2111\", MODE:=\"0666\", OWNER=\"user\"\nEOF\n</code></pre> <p>\u4f7f\u7528 CMSIS-DAP \u8fde\u63a5MCU</p> <pre><code>openocd -f interface/cmsis-dap.cfg -f target/stm32f1x.cfg\n\nOpen On-Chip Debugger 0.10.0\nLicensed under GNU GPL v2\nFor bug reports, read\n        http://openocd.org/doc/doxygen/bugs.html\nInfo : auto-selecting first available session transport \"swd\". To override use 'transport select '.        \nadapter speed: 1000 kHz\nadapter_nsrst_delay: 100\nnone separate\ncortex_m reset_config sysresetreq\nInfo : CMSIS-DAP: SWD  Supported\nInfo : CMSIS-DAP: Interface Initialised (SWD)\nInfo : CMSIS-DAP: FW Version = 2.2.1R\nInfo : SWCLK/TCK = 1 SWDIO/TMS = 1 TDI = 0 TDO = 0 nTRST = 0 nRESET = 0\nInfo : CMSIS-DAP: Interface ready\nInfo : clock speed 1000 kHz\nInfo : SWD DPIDR 0x1ba01477\nInfo : stm32f1x.cpu: hardware has 6 breakpoints, 4 watchpoints\nError: stm32f1x.cpu -- clearing lockup after double fault\nPolling target stm32f1x.cpu failed, trying to reexamine\nInfo : stm32f1x.cpu: hardware has 6 breakpoints, 4 watchpoints\n...\n</code></pre>","tags":["linux"]},{"location":"openocd-%E4%BD%BF%E7%94%A8/#_1","title":"\u9644\u5f55","text":"<ul> <li>\u66f4\u65b0udev,\u521b\u5efa\u4e00\u4e2aopenocd \u8fde\u63a5\u914d\u7f6e\u6587\u4ef6</li> </ul> <pre><code>~$ sudo udevadm trigger  \n~$ cat atmel_sam4s_xplained_pro.cfg  \ninterface cmsis-dap  \ncmsis_dap_vid_pid 0x03eb 0x2111  \ncmsis_dap_serial ATML1803040200001055  \nset CHIPNAME ATSAM4SD32C  \nsource [find board/atmel_sam4s_xplained_pro.cfg]  \n\n~$ openocd -f atmel_sam4s_xplained_pro.cfg\n</code></pre>","tags":["linux"]},{"location":"openvpn-%E5%B1%80%E5%9F%9F%E7%BD%91%E5%86%85%E5%88%86%E4%BA%AB%E7%BD%91%E7%BB%9C/","title":"Brief","text":"<p>\u9996\u5148\u8bbe\u7f6e\u5185\u7f51\u673a\u5668\u7684\u6d41\u91cf\u8bf7\u6c42\u8def\u7531\u5230 vpn client</p> <pre><code>ip route add 192.168.0.0/24 via 192.168.1.4\n</code></pre> <p>\u4fdd\u5b58\u5230\u6587\u4ef6\u5939\u4e2d</p> <pre><code>nano /etc/conf.d/net\n\nroutes_wlan1=\"192.168.0.0/24 via 192.168.1.4\n    default via 192.168.1.1\"\n</code></pre> <p>\u8bbe\u7f6e vpn client \u63a5\u6536\u6d41\u91cf</p> <pre><code>iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -j SNAT --to-source 192.168.1.4\n</code></pre> <p>\u5982\u679c\u662fopenwrt \u5219\u8bbe\u7f6e\u9632\u706b\u5899\u533a\u57df,\u5e76\u8bbe\u7f6eNAT \u8f6c\u53d1</p>","tags":["linux"]},{"location":"openvpn-%E5%B1%80%E5%9F%9F%E7%BD%91%E5%86%85%E5%88%86%E4%BA%AB%E7%BD%91%E7%BB%9C/#_1","title":"\u53c2\u8003","text":"<ul> <li>Adding a permanent static route</li> <li>\u4f7f\u7528openv\u5c41\u6069\u5b9e\u73b0\u529e\u516c\u5ba4\u548cIDC\u673a\u623f\u4e92\u901a</li> </ul>","tags":["linux"]},{"location":"python-pip-%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/","title":"pip \u8bbe\u7f6e\u4ee3\u7406","text":"<ol> <li>\u5355\u6b21\u8bbe\u7f6e\u4ee3\u7406 <pre><code>pip install pandas --proxy=http://127.0.0.1:7890\n</code></pre></li> </ol>","tags":["python"]},{"location":"python-pip-%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/#_1","title":"\u53c2\u8003","text":"<ul> <li>python\u8bbe\u7f6e\u4ee3\u7406\u548c\u6dfb\u52a0\u955c\u50cf\u6e90\u4ecb\u7ecd</li> </ul>","tags":["python"]},{"location":"python-%E6%9F%A5%E7%9C%8B%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93%E5%9C%B0%E5%9D%80/","title":"python \u67e5\u770b\u52a8\u6001\u94fe\u63a5\u5e93\u5730\u5740","text":"<pre><code>python3\n&gt;&gt;&gt; import sys\n# linux\n&gt;&gt;&gt; sys.path\n[''\uff0c '/usr/lib/python310.zip'\uff0c '/usr/lib/python3.10'\uff0c '/usr/Lib/python3.10/Lib-dynload'\uff0c '/usr/local/lib/python3.10/dist-packages'\uff0c '/usr/lib/python3/dist-packages']\n# or windows\n&gt;&gt;&gt; sys.path\n['D:\\\\Portable\\\\bin\\\\python-3.11.4-embed-amd64\\\\Lib\\\\site-packages', 'D:\\\\Portable\\\\bin\\\\python-3.11.4-embed-amd64\\\\python311.zip', 'D:\\\\Portable\\\\bin\\\\python-3.11.4-embed-amd64']\n</code></pre>","tags":["python"]},{"location":"repo-%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BB%93%E5%BA%93/","title":"repo \u62c9\u53d6\u4ed3\u5e93","text":"<pre><code>repo init --repo-url=ssh://gerrit/tools/python2-repo -u ssh://gerrit/xpert/platform/manifest -m platin-ch-1.xml\n</code></pre>","tags":["linux"]},{"location":"repo-%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BB%93%E5%BA%93/#_1","title":"\u540c\u6b65\u4ed3\u5e93","text":"<pre><code>repo sync --force-sync\n</code></pre>","tags":["linux"]},{"location":"rock5b-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/","title":"rock5b \u8bbe\u7f6e\u8bb0\u5f55","text":"<ol> <li> <p>\u8bbe\u7f6e\u7528\u6237\u81ea\u52a8\u767b\u9646\u684c\u9762 <pre><code>sudo  vi  /etc/lightdm/lightdm.conf\n\n---\n#autologin-user=\n+++\nautologin-user=USER\n</code></pre></p> </li> <li> <p>\u4fee\u6539\u5bc6\u7801 <pre><code>sudo su\npasswd rock\n</code></pre></p> </li> <li> <p>\u8bbe\u7f6eimx219 \u83b7\u53d6\u5168\u5206\u8fa8\u7387 <pre><code>media-ctl -d /dev/media0 --set-v4l2 '\"m00_b_imx219 3-0010\":0[fmt:SRGGB10_1X10/3280x2464]'\n\n# media-ctl -d /dev/media0 --set-v4l2 '\"rockchip-csi2-dphy0\":0[fmt:SRGGB10_1X10/3280x2464]'\n\nmedia-ctl -d /dev/media1 --set-v4l2 '\"rkisp-isp-subdev\":0[fmt:SRGGB10_1X10/3280x2464]'\n\nmedia-ctl -d /dev/media1 --set-v4l2 '\"rkisp-isp-subdev\":2[fmt:SRGGB10_1X10/3280x2464]'\n\nmedia-ctl -d /dev/media1 --set-v4l2 '\"rkisp-isp-subdev\":0[crop:(0,0)/3280x2464]'\n\nmedia-ctl -d /dev/media1 --set-v4l2 '\"rkisp-isp-subdev\":2[crop:(0,0)/3280x2464]'\n</code></pre></p> </li> <li> <p>\u67e5\u770b\u62d3\u6251\u7ed3\u6784 <pre><code>media-ctl -p -d 0\n</code></pre></p> </li> <li> <p>\u8bbe\u7f6e\u65f6\u95f4 <pre><code>sudo date -s \"2023-08-17 14:22:00\"\nsudo hwclock -w\n</code></pre></p> </li> <li> <p>\u8bbe\u7f6e\u7f51\u7edc</p> </li> <li> <p>\u914d\u7f6esource code <pre><code>git clone -b dev-rkr3.4 http://192.168.137.1:8080/test/rk3588-kernel.git kernel\ngit clone -b master https://github.com/radxa/rkbin.git rkbin\ngit clone -b dev http://192.168.137.1:808\n0/rockchip/rk3588-build.git build\n</code></pre></p> </li> <li> <p>\u8bbe\u7f6egit \u4ee3\u7406 <pre><code>git config --global http.https://github.com.proxy http://192.168.137.1:7890\n</code></pre></p> </li> </ol>","tags":["linux"]},{"location":"rock5b-%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95/#_1","title":"\u53c2\u8003","text":"<ul> <li>debian10\u600e\u4e48\u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u767b\u5f55\u5230\u684c\u9762</li> <li>debian\u7cfb\u7edf\u4e4b\u4fee\u6539\u65f6\u95f4\u4e0e\u65f6\u533a</li> </ul>","tags":["linux"]},{"location":"samba-%E5%88%86%E4%BA%AB%E6%96%87%E4%BB%B6/","title":"samba \u5206\u4eab\u6587\u4ef6","text":"","tags":["linux","tool"]},{"location":"samba-%E5%88%86%E4%BA%AB%E6%96%87%E4%BB%B6/#_1","title":"\u6302\u8f7d\u786c\u76d8","text":"<pre><code># \u67e5\u770b\u786c\u76d8\u4fe1\u606f\nsudo fdisk -l\n\n# \u4e34\u65f6\u6302\u8f7d\u786c\u76d8\nsudo mount /dev/sdb1 /mnt\n\n# \u67e5\u770b\u6302\u8f7d\u70b9\ndf -h\n\n# \u901a\u8fc7blkid \u67e5\u627e\u6240\u6709\u786c\u76d8UUID\nsudo blkid\n\n# \u6c38\u4e45\u6302\u8f7d\u70b9\nsudo nano /etc/fstab\n# \u6700\u540e\u4e00\u884c\u6dfb\u52a0\nUUID=4C16080A1607F3AC   /mnt    ntfs    defaults    0   0\n# \u6267\u884c\u6302\u8f7d\nsudo mount -a\n</code></pre>","tags":["linux","tool"]},{"location":"samba-%E5%88%86%E4%BA%AB%E6%96%87%E4%BB%B6/#smaba","title":"\u914d\u7f6esmaba","text":"<pre><code>sudo nano /etc/samba/smb.conf\nuseradd sambauser\nsudo useradd sambauser\n# \u67e5\u770bsamba\u670d\u52a1\u5668\u4e2d\u5df2\u62e5\u6709\u54ea\u4e9b\u7528\u6237\nsudo pdbedit -L\n# \u5220\u9664samba\u670d\u52a1\u4e2d\u7684\u67d0\u4e2a\u7528\u6237\nsmbpasswd -x sambauser\nsudo smbpasswd -a sambauser\nsudo service smbd restart\n</code></pre>","tags":["linux","tool"]},{"location":"samba-%E5%88%86%E4%BA%AB%E6%96%87%E4%BB%B6/#smbconf","title":"smb.conf","text":"<pre><code>#\n# Sample configuration file for the Samba suite for Debian GNU/Linux.\n#\n#\n# This is the main Samba configuration file. You should read the\n# smb.conf(5) manual page in order to understand the options listed\n# here. Samba has a huge number of configurable options most of which\n# are not shown in this example\n#\n# Some options that are often worth tuning have been included as\n# commented-out examples in this file.\n# \u00a0- When such options are commented with \";\", the proposed setting\n# \u00a0 \u00a0differs from the default Samba behaviour\n# \u00a0- When commented with \"#\", the proposed setting is the default\n# \u00a0 \u00a0behaviour of Samba but the option is considered important\n# \u00a0 \u00a0enough to be mentioned here\n#\n# NOTE: Whenever you modify this file you should run the command\n# \"testparm\" to check that you have not made any basic syntactic\n# errors.\n#======================= Global Settings =======================\n\n[global]\n\n## Browsing/Identification ###\n\n# Change this to the workgroup/NT-domain name your Samba server will part of\n\u00a0 \u00a0workgroup = WORKGROUP\n\u00a0 \u00a0\n#### Networking ####\n# The specific set of interfaces / networks to bind to\n# This can be either the interface name or an IP address/netmask;\n# interface names are normally preferred\n; \u00a0 interfaces = 127.0.0.0/8 eth0\n\n# Only bind to the named interfaces and/or networks; you must use the\n# 'interfaces' option above to use this.\n# It is recommended that you enable this feature if your Samba machine is\n# not protected by a firewall or is a firewall itself. \u00a0However, this\n# option cannot handle dynamic or non-broadcast interfaces correctly.\n; \u00a0 bind interfaces only = yes\n\n#### Debugging/Accounting ####\n# This tells Samba to use a separate log file for each machine\n# that connects\n\u00a0 \u00a0log file = /var/log/samba/log.%m\n\n# Cap the size of the individual log files (in KiB).\n\u00a0 \u00a0max log size = 50\n\u00a0 \u00a0\n# We want Samba to only log to /var/log/samba/log.{smbd,nmbd}.\n# Append syslog@1 if you want important messages to be sent to syslog too.\n\u00a0 \u00a0logging = file\n\n# Do something sensible when Samba crashes: mail the admin a backtrace\n\u00a0 \u00a0panic action = /usr/share/samba/panic-action %d\n\n####### Authentication #######\n# Server role. Defines in which mode Samba will operate. Possible\n# values are \"standalone server\", \"member server\", \"classic primary\n# domain controller\", \"classic backup domain controller\", \"active\n# directory domain controller\".\n#\n# Most people will want \"standalone server\" or \"member server\".\n# Running as \"active directory domain controller\" will require first\n# running \"samba-tool domain provision\" to wipe databases and create a\n# new domain.\n\u00a0 \u00a0server role = standalone server\n\u00a0 \u00a0\n\u00a0 \u00a0obey pam restrictions = yes\n\n# This boolean parameter controls whether Samba attempts to sync the Unix\n# password with the SMB password when the encrypted SMB password in the\n# passdb is changed.\n\u00a0 \u00a0unix password sync = yes\n\n# For Unix password sync to work on a Debian GNU/Linux system, the following\n# parameters must be set (thanks to Ian Kahan &lt;&lt;kahan@informatik.tu-muenchen.de&gt; for\n# sending the correct chat script for the passwd program in Debian Sarge).\n\u00a0 \u00a0passwd program = /usr/bin/passwd %u\n\u00a0 \u00a0passwd chat = *Enter\\snew\\s*\\spassword:* %n\\n *Retype\\snew\\s*\\spassword:* %n\\n *password\\supdated\\ssuccessfully* .\n\n# This boolean controls whether PAM will be used for password changes\n# when requested by an SMB client instead of the program listed in\n# 'passwd program'. The default is 'no'.\n\u00a0 \u00a0pam password change = yes\n\n# This option controls how unsuccessful authentication attempts are mapped\n# to anonymous connections\n\u00a0 \u00a0map to guest = bad user\n\n########## Domains ###########\n#\n# The following settings only takes effect if 'server role = classic\n# primary domain controller', 'server role = classic backup domain controller'\n# or 'domain logons' is set\n#\n\n# It specifies the location of the user's\n# profile directory from the client point of view) The following\n# required a [profiles] share to be setup on the samba server (see\n# below)\n; \u00a0 logon path = \\\\%N\\profiles\\%U\n\n# Another common choice is storing the profile in the user's home directory\n# (this is Samba's default)\n# \u00a0 logon path = \\\\%N\\%U\\profile\n\n# The following setting only takes effect if 'domain logons' is set\n# It specifies the location of a user's home directory (from the client\n# point of view)\n; \u00a0 logon drive = H:\n# \u00a0 logon home = \\\\%N\\%U\n\n# The following setting only takes effect if 'domain logons' is set\n# It specifies the script to run during logon. The script must be stored\n# in the [netlogon] share\n# NOTE: Must be store in 'DOS' file format convention\n; \u00a0 logon script = logon.cmd\n\n# This allows Unix users to be created on the domain controller via the SAMR\n# RPC pipe. \u00a0The example command creates a user account with a disabled Unix\n# password; please adapt to your needs\n; add user script = /usr/sbin/adduser --quiet --disabled-password --gecos \"\" %u\n\n# This allows machine accounts to be created on the domain controller via the\n# SAMR RPC pipe. \u00a0\n# The following assumes a \"machines\" group exists on the system\n; add machine script \u00a0= /usr/sbin/useradd -g machines -c \"%u machine account\" -d /var/lib/samba -s /bin/false %u\n\n# This allows Unix groups to be created on the domain controller via the SAMR\n# RPC pipe. \u00a0\n; add group script = /usr/sbin/addgroup --force-badname %g\n\n############ Misc ############\n# Using the following line enables you to customise your configuration\n# on a per machine basis. The %m gets replaced with the netbios name\n# of the machine that is connecting\n; \u00a0 include = /home/samba/etc/smb.conf.%m\n\n# Some defaults for winbind (make sure you're not using the ranges\n# for something else.)\n; \u00a0 idmap config * : \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0backend = tdb\n; \u00a0 idmap config * : \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0range \u00a0 = 3000-7999\n; \u00a0 idmap config YOURDOMAINHERE : backend = tdb\n; \u00a0 idmap config YOURDOMAINHERE : range \u00a0 = 100000-999999\n; \u00a0 template shell = /bin/bash\n\n# Setup usershare options to enable non-root users to share folders\n# with the net usershare command.\n\n# Maximum number of usershare. 0 means that usershare is disabled.\n# \u00a0 usershare max shares = 100\n\n# Allow users who've been granted usershare privileges to create\n# public shares, not just authenticated ones\n\u00a0 \u00a0usershare allow guests = yes\n\n#======================= Share Definitions =======================\n[homes]\n\u00a0 \u00a0comment = Home Directories\n\u00a0 \u00a0browseable = no\n\n# By default, the home directories are exported read-only. Change the\n# next parameter to 'no' if you want to be able to write to them.\n\u00a0 \u00a0read only = yes\n\u00a0 \u00a0\n# File creation mask is set to 0700 for security reasons. If you want to\n# create files with group=rw permissions, set next parameter to 0775.\n\u00a0 \u00a0create mask = 0700\n\n# Directory creation mask is set to 0700 for security reasons. If you want to\n# create dirs. with group=rw permissions, set next parameter to 0775.\n\u00a0 \u00a0directory mask = 0700\n\n# By default, \\\\server\\username shares can be connected to by anyone\n# with access to the samba server.\n# The following parameter makes sure that only \"username\" can connect\n# to \\\\server\\username\n# This might need tweaking when using external authentication schemes\n\u00a0 \u00a0valid users = %S\n\n# Un-comment the following and create the netlogon directory for Domain Logons\n# (you need to configure Samba to act as a domain controller too.)\n;[netlogon]\n; \u00a0 comment = Network Logon Service\n; \u00a0 path = /home/samba/netlogon\n; \u00a0 guest ok = yes\n; \u00a0 read only = yes\n\n# Un-comment the following and create the profiles directory to store\n# users profiles (see the \"logon path\" option above)\n# (you need to configure Samba to act as a domain controller too.)\n# The path below should be writable by all users so that their\n\n# profile directory may be created the first time they log on\n;[profiles]\n; \u00a0 comment = Users profiles\n; \u00a0 path = /home/samba/profiles\n; \u00a0 guest ok = no\n; \u00a0 browseable = no\n; \u00a0 create mask = 0600\n; \u00a0 directory mask = 0700\n\n[share]\n\u00a0 \u00a0comment = Share file\n\u00a0 \u00a0path = /mnt\n\u00a0 \u00a0browseable = no\n\u00a0 \u00a0writable = yes\n\u00a0 \u00a0guest ok = no\n\u00a0 \u00a0valid users = sambauser\n\u00a0 \u00a0create mask = 0777\n\u00a0 \u00a0directory mask = 0777\n\u00a0 \u00a0wins support = yes\n\n# Uncomment to allow remote administration of Windows print drivers.\n# You may need to replace 'lpadmin' with the name of the group your\n# admin users are members of.\n\n# Please note that you also need to set appropriate Unix permissions\n# to the drivers directory for these users to have write rights in it\n\n\u00a0 \u00a0write list = root, @lpadmin, sambauser\n\n\u00a0 \u00a0vfs object = recycle\n\u00a0 \u00a0recycle:repository = .deleted/%U\n\u00a0 \u00a0recycle:versions = Yes\n\u00a0 \u00a0recycle:keeptree = Yes\n\u00a0 \u00a0recycle:maxsize = 0\n\u00a0 \u00a0recycle:exclude = .tmp\n\u00a0 \u00a0recycle:noversion = *.doc\n</code></pre>","tags":["linux","tool"]},{"location":"samba-%E5%88%86%E4%BA%AB%E6%96%87%E4%BB%B6/#_2","title":"\u53c2\u8003","text":"<ul> <li>Debian \u6302\u8f7d\u786c\u76d8</li> <li>smb.conf \u914d\u7f6e</li> <li>SAMBA \u670d\u52a1\u5668</li> </ul>","tags":["linux","tool"]},{"location":"samba-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/","title":"samba \u7528\u6237\u7ba1\u7406","text":"","tags":["linux","tool"]},{"location":"samba-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/#ubuntu","title":"ubuntu\u4e0b\u5171\u4eab\u6587\u4ef6\u5939\u5bc6\u7801\u8bbe\u7f6e\u548c\u91cd\u7f6e","text":"<p>\u8bbe\u7f6e\u8d26\u53f7\u5bc6\u7801\u548c\u91cd\u7f6e\u5bc6\u7801\u7684\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <pre><code> sudo\u00a0smbpasswd\u00a0-a\u00a0user\u00a0\u00a0\n New\u00a0SMB\u00a0password:\u00a0\u00a0\n Retype\u00a0new\u00a0SMB\u00a0password:\n</code></pre> <p>\u4ee5\u4e0b\u662f \u4f7f\u8d26\u53f7 champwang \u5931\u6548\uff1a <pre><code>\u00a0sudo\u00a0smbpasswd\u00a0-d\u00a0champwang\n [sudo]\u00a0password\u00a0for\u00a0user:\u00a0\u00a0\u00a0\n Disabled\u00a0user\u00a0champwang.\n</code></pre></p> <p>\u53bb\u9664\u6dfb\u52a0\u7684\u8d26\u53f7\uff1a <pre><code>sudo\u00a0smbpasswd\u00a0-x\u00a0champwang\u00a0\u00a0\nDeleted\u00a0user\u00a0champwang.\n</code></pre></p> <p>\u4ee5\u4e0b\u662f smbpasswd \u7684\u8aaa\u660e\uff1a <pre><code> smbpasswd -h\nWhen run by root:\n    smbpasswd [options] [username]\notherwise:\n    smbpasswd [options]\n\noptions:\n  -L                   local mode (must be first option)\n  -h                   print this usage message\n  -s                   use stdin for password prompt\n  -c smb.conf file     Use the given path to the smb.conf file\n  -D LEVEL             debug level\n  -r MACHINE           remote machine\n  -U USER              remote username (e.g. SAM/user)\nextra options when run by root or in local mode:\n  -a                   add user\n  -d                   disable user\n  -e                   enable user\n  -i                   interdomain trust account\n  -m                   machine trust account\n  -n                   set no password\n  -W                   use stdin ldap admin password\n  -w PASSWORD          ldap admin password\n  -x                   delete user\n  -R ORDER             name resolve order\n</code></pre></p>","tags":["linux","tool"]},{"location":"samba-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/#linuxsamba","title":"linux\u53casamba\u7528\u6237\u7684\u67e5\u770b\u4e0e\u5220\u9664","text":"<p>\u67e5\u770bsamba\u670d\u52a1\u5668\u4e2d\u5df2\u62e5\u6709\u54ea\u4e9b\u7528\u6237\uff1a</p> <pre><code>pdbedit -L\n</code></pre> <p>\u5220\u9664samba\u670d\u52a1\u4e2d\u7684\u67d0\u4e2a\u7528\u6237</p> <pre><code>smbpasswd -x   \u7528\u6237\u540d\n</code></pre> <p>\u67e5\u770bLinux\u4e2d\u6240\u6709\u7528\u6237\uff1a</p> <pre><code>cat  /etc/passwd\n</code></pre> <p>\u67e5\u770bLinux\u4e2d\u6dfb\u52a0\u4e86\u591a\u5c11\u7528\u6237\uff1a</p> <pre><code>cat /etc/passwd|grep -v nologin|grep -v halt|grep -v shutdown|awk-F\":\" '{ print $1\"|\"$3\"|\"$4 }'|more\n</code></pre> <p>\u67e5\u770bLinux\u4e2d\u6240\u6709\u7ec4\uff1a</p> <pre><code>cat  /etc/group\n</code></pre> <p>\u5220\u9664linux\u67d0\u4e2a\u7528\u6237</p> <pre><code>userdel   \u7528\u6237\u540d\n</code></pre> <p>\u5220\u9664linux\u4e2d\u67d0\u4e2a\u7528\u6237\u6240\u6709\u4fe1\u606f</p> <pre><code>userdel   -r  \u7528\u6237\u540d\n</code></pre>","tags":["linux","tool"]},{"location":"samba-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/#_1","title":"\u53c2\u8003","text":"<ul> <li>\u539f\u6587\u94fe\u63a5</li> </ul>","tags":["linux","tool"]},{"location":"ssh-%E5%A6%82%E4%BD%95%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5/","title":"ssh \u5982\u4f55\u5411\u670d\u52a1\u5668\u6dfb\u52a0\u516c\u94a5","text":"","tags":["ssh","tool"]},{"location":"ssh-%E5%A6%82%E4%BD%95%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5/#ssh","title":"\u5982\u4f55\u5411\u670d\u52a1\u5668\u6dfb\u52a0 ssh \u516c\u94a5\u00a0:","text":"","tags":["ssh","tool"]},{"location":"ssh-%E5%A6%82%E4%BD%95%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5/#wondowspub","title":"wondows\u4f20\u8f93pub","text":"<pre><code>type %USERPROFILE%\\.ssh\\id_rsa.pub | ssh ubuntu@192.168.1.8 \u201ccat &gt;&gt; .ssh/authorized_keys\u201d\n</code></pre> <pre><code>type $env:USERPROFILE\\.ssh\\id_rsa.pub | ssh root@192.168.30.31 \"cat &gt;&gt; .ssh/authorized_keys\"\n</code></pre>","tags":["ssh","tool"]},{"location":"ssh-%E5%A6%82%E4%BD%95%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5/#linux","title":"linux","text":"<pre><code>ssh-copy-id -i ~/.ssh/id_rsa.pub YOUR_USER_NAME@IP_ADDRESS_OF_THE_SERVER\n</code></pre>","tags":["ssh","tool"]},{"location":"ssh-%E5%A6%82%E4%BD%95%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5/#linux_1","title":"linux \u624b\u52a8\u6dfb\u52a0","text":"<pre><code>mkdir -p /home/user_name/.ssh &amp;&amp; touch /home/user_name/.ssh/authorized_keys\nvim /home/user_name/.ssh/authorized_keys\n# \u4e3a\u6587\u4ef6\u8bbe\u7f6e\u6743\u9650\nchmod 700 /home/user_name/.ssh &amp;&amp; chmod 600 /home/user_name/.ssh/authorized_keys\n# \u7531\u4e8e\u6211\u4eec\u4f7f\u7528 root \u6216\u6211\u4eec\u81ea\u5df1\u7684\u7ba1\u7406\u5458\u5e10\u6237\u4e3a\u5176\u4ed6\u7528\u6237\u521b\u5efa\u4e86\u8fd9\u4e9b\u6587\u4ef6\uff0c\u6240\u4ee5\u9700\u8981\u66f4\u6539\u7528\u6237\u7684\u6240\u6709\u6743\uff1a\nchown -R username:username /home/username/.ssh\n</code></pre>","tags":["ssh","tool"]},{"location":"ssh-%E5%A6%82%E4%BD%95%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5/#ssh_1","title":"SSH \u4fdd\u6301\u957f\u8fde\u63a5","text":"","tags":["ssh","tool"]},{"location":"ssh-%E5%A6%82%E4%BD%95%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5/#_1","title":"\u5ba2\u6237\u7aef\u4e3b\u52a8\u4fdd\u6301\u8fde\u63a5","text":"<p>\u7f16\u8f91<code>/etc/ssh/ssh_config</code> \u6216\u8005<code>~/.ssh/config</code>\uff0c\u8ffd\u52a0\u4ee5\u4e0b\u5185\u5bb9 <pre><code>TCPKeepAlive=yes \n# Client\u6bcf\u9694 180 \u79d2\u53d1\u9001\u4e00\u6b21KeepAlive\u8bf7\u6c42\u7ed9Server\uff0c\u7136\u540eServer\u54cd\u5e94\u4ece\u800c\u4fdd\u6301\u8fde\u63a5 \nServerAliveInterval 180 \n# Client\u53d1\u51fa\u8bf7\u6c42\u540e\uff0c\u670d\u52a1\u5668\u7aef\u672a\u54cd\u5e94\u6b21\u6570\u8fbe\u52303\uff0c\u5c31\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0cServer\u57fa\u672c\u4f1a\u54cd\u5e94\u3002 \nServerAliveCountMax 3\n</code></pre></p>","tags":["ssh","tool"]},{"location":"ssh-%E5%A6%82%E4%BD%95%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5/#_2","title":"\u670d\u52a1\u7684\u4e3b\u52a8\u4fdd\u6301\u8fde\u63a5","text":"<ul> <li> <p>\u7f16\u8f91<code>/etc/ssh/sshd_config</code>\uff0c\u8ffd\u52a0\u4ee5\u4e0b\u5185\u5bb9 <pre><code># Server\u6bcf\u9694 180 \u79d2\u53d1\u9001\u4e00\u6b21\u5fc3\u8df3\u6570\u636e\u5305\u7ed9Client\uff0c\u7136\u540eClient\u54cd\u5e94\u4ece\u800c\u4fdd\u6301\u8fde\u63a5 \nClientAliveInterval 180 \n# Server\u53d1\u51fa\u8bf7\u6c42\u540e\uff0c\u5ba2\u6237\u7aef\u672a\u54cd\u5e94\u6b21\u6570\u8fbe\u523010\uff0c\u5c31\u81ea\u52a8\u65ad\u5f00\u8fde\u63a5\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0cClient\u57fa\u672c\u4f1a\u54cd\u5e94 \nClientAliveCountMax 10\n</code></pre></p> </li> <li> <p>\u91cd\u542fssh\u670d\u52a1\u4ee5\u4f7f\u914d\u7f6e\u751f\u6548 <pre><code>systemctl restart sshd\n</code></pre></p> </li> </ul>","tags":["ssh","tool"]},{"location":"ssh-%E5%A6%82%E4%BD%95%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5/#scp","title":"scp \u4f20\u8f93\u6587\u4ef6","text":"<pre><code>scp -r ./codespace/repos/tof_demo pi@192.168.0.68:~/\n</code></pre>","tags":["ssh","tool"]},{"location":"ssh-%E5%A6%82%E4%BD%95%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B7%BB%E5%8A%A0%E5%85%AC%E9%92%A5/#_3","title":"\u53c2\u8003","text":"<ul> <li>\u5982\u4f55\u5411\u670d\u52a1\u5668\u6dfb\u52a0 ssh \u516c\u94a5</li> <li>SSH\u4fdd\u6301\u957f\u8fde\u63a5</li> </ul>","tags":["ssh","tool"]},{"location":"ssh-%E5%BF%AB%E9%80%9F%E5%88%A0%E9%99%A4known_hosts%E8%AE%B0%E5%BD%95/","title":"ssh \u5feb\u901f\u5220\u9664known_hosts\u8bb0\u5f55","text":"<pre><code>ssh-keygen -R 192.168.0.10\n\nssh-keygen -R [hostname]\n\nssh-keygen -R [ip_address]\n\nssh-keygen -R [hostname],[ip_address]\n\nssh-keyscan -t rsa [hostname],[ip_address] &gt;&gt; ~/.ssh/known_hosts\n\nssh-keyscan -t rsa [ip_address] &gt;&gt; ~/.ssh/known_hosts\n\nssh-keyscan -t rsa [hostname] &gt;&gt; ~/.ssh/known_hosts\n</code></pre>","tags":["ssh","tool"]},{"location":"ssh-%E5%BF%AB%E9%80%9F%E5%88%A0%E9%99%A4known_hosts%E8%AE%B0%E5%BD%95/#_1","title":"\u53c2\u8003","text":"<p>KNOWN_HOSTS\u5904\u7406</p>","tags":["ssh","tool"]},{"location":"ssh-%E6%B7%BB%E5%8A%A0%E4%BD%BF%E7%94%A8%E7%A7%81%E9%92%A5/","title":"brief","text":"<p>\u6dfb\u52a0\u548c\u4f7f\u7528\u79c1\u94a5,ssh\u6709\u6743\u9650\u8981\u6c42. .ssh \u76ee\u5f55\u6743\u9650\u8bbe\u7f6e700 id_rsa,authiruzed_keys \u6743\u9650\u8bbe\u7f6e600 id_rsa.pub, known_hosts \u6743\u9650\u8bbe\u7f6e644</p> <pre><code># \u67e5\u770b\u79c1\u94a5\u662f\u5426\u53ef\u7528\nssh-add ~/.ssh/mars_rsa\n\n# \u5982\u679c\u51fa\u73b0\u4e0b\u9762\u63d0\u793a\u4fee\u6539\u6743\u9650\u5373\u53ef\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nPermissions **0744** for '**/home/&lt;_username_&gt;/.ssh/id_rsa**' are too open.\nIt is required that your private key files are NOT accessible by others.\nThis private key will be ignored.\n\nsudo chown -R mars ~/.ssh\nsudo chmod 700 ~/.ssh\n\nsudo chmod 600  ~/.ssh/id_rsa\nsudo chmod 600 ~/.ssh/mars_rsa\n</code></pre>","tags":["ssh","tool"]},{"location":"ssh-%E6%B7%BB%E5%8A%A0%E4%BD%BF%E7%94%A8%E7%A7%81%E9%92%A5/#_1","title":"\u53c2\u8003","text":"<ul> <li>ssh\u5bc6\u94a5\u6587\u4ef6\u7684\u6743\u9650</li> <li>Signing Failed: Agent Refused Operation</li> </ul>","tags":["ssh","tool"]},{"location":"ssh-%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/","title":"1. SSH \u7aef\u53e3\u8f6c\u53d1","text":"<ol> <li>\u672c\u5730\u7aef\u53e3\u8f6c\u53d1 <pre><code>ssh -fgN -L \u672c\u673a\u7aef\u53e3:\u76ee\u6807\u5730\u5740:\u76ee\u6807\u7aef\u53e3 \u672c\u673a\u7aef\u53e3\n# example:\nssh -fgN -L 8080:192.168.0.48:80 192.168.137.1\n</code></pre></li> <li>\u8fdc\u7a0b\u7aef\u53e3\u8f6c\u53d1 <pre><code>ssh -fgN -R 2222:\u76ee\u6807\u5730\u5740:\u76ee\u6807\u7aef\u53e3 localhost\n</code></pre></li> <li>\u52a8\u6001\u8f6c\u53d1 <pre><code>ssh -fgN -D 12345 root@\u76ee\u6807\u5730\u5740\n</code></pre></li> </ol>","tags":["ssh","tool"]},{"location":"ssh-%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/#_1","title":"\u53c2\u8003","text":"<ul> <li>Linux\u7aef\u53e3\u8f6c\u53d1\u7684\u51e0\u79cd\u5e38\u7528\u65b9\u6cd5</li> </ul>","tags":["ssh","tool"]},{"location":"ssh-%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/","title":"ssh \u8bbe\u7f6e\u4ee3\u7406","text":"<pre><code>nano ~/.ssh/config\n\nHost *\n  ProxyCommand /usr/bin/nc -X connect -x &lt;PROXY_HOST&gt;:&lt;PROXY_PORT&gt; %h %p\n\nHost github.com\n    User git\n    ProxyCommand nc -v -x 192.168.137.1:7890 %h %p\n</code></pre> <pre><code>1. bash: /usr/bin/nc: No such file or directory\n</code></pre> <p><code>Shell apt install netcat</code></p>","tags":["ssh","tool"]},{"location":"tmux-%E4%BD%BF%E7%94%A8/","title":"tmux \u4e00\u4e9b\u5e38\u7528\u5feb\u6377\u952e","text":"<ol> <li>ctrl+b d   // \u5206\u79bb\u4ed3\u5e93</li> <li>tmux attach-seesion -t 0  // \u56de\u5230\u4f1a\u8bdd</li> <li>tmux at -t 0</li> <li>tmux list-sessions // \u5217\u51fa\u6240\u6709\u4f1a\u8bdd</li> <li>tmux ls</li> </ol>","tags":["tool"]},{"location":"tmux-%E4%BD%BF%E7%94%A8/#_1","title":"\u53c2\u8003","text":"<p>https://www.ruanyifeng.com/blog/2019/10/tmux.html</p>","tags":["tool"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/","title":"trojan \u5b89\u88c5\u8bb0\u5f55","text":"<pre><code># \u521b\u5efa\u7528\u6237\u8d26\u6237\nsudo useradd -m -s /bin/bash trojanuser  \nsudo passwd trojanuser  \nsudo usermod -G sudo trojanuser  \nsu -l trojanuser\n\n# \u521b\u5efa\u670d\u52a1\u8d26\u6237\nsudo groupadd certusers  \nsudo useradd -r -M -G certusers trojan  \nsudo useradd -r -m -G certusers acme\n\n# \u5b89\u88c5\u4f9d\u8d56\n\nsudo apt update\n\n## \u5b89\u88c5acme.sh\u9700\u8981\u7684\u4f9d\u8d56\u3002\nsudo apt install -y socat cron curl\n\n## \u542f\u52a8crontab\nsudo systemctl start cron\nsudo systemctl enable cron\n\n## \u5b89\u88c5Trojan\u9700\u8981\u7684\u4f9d\u8d56\u3002\nsudo apt install -y libcap2-bin xz-utils nano\n\n## \u5b89\u88c5Nginx\u3002\nsudo apt install -y nginx\n</code></pre>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#nginx","title":"\u914d\u7f6eNginx","text":"<p>\u82e5\u4f60\u5df2\u7ecf\u6709\u914d\u7f6eNginx\u865a\u62df\u4e3b\u673a\uff0c\u914d\u7f6eNginx\u4e4b\u524d\u8bf7\uff0c\u53ef\u4ee5\u81ea\u5df1\u4f7f\u7528<code>cp</code>\u547d\u4ee4\u5907\u4efd\u4e00\u4e0b\u539f\u6765\u7684\u865a\u62df\u4e3b\u673a\uff0c\u7b49\u4ecb\u7ecd\u5b8c\u57fa\u672c\u914d\u7f6e\u518d\u8bb2\u5982\u4f55\u4e0e\u73b0\u6709\u670d\u52a1\u96c6\u6210\u3002</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#_1","title":"\u5173\u95ed\u9ed8\u8ba4\u865a\u62df\u4e3b\u673a","text":"<p>\u7531\u4e8eNginx\u914d\u7f6e\u5728Debian\u7cfb\u5217\u7cfb\u7edf\u548cCentOS\u7cfb\u5217\u7cfb\u7edf\u7ec4\u7ec7\u65b9\u5f0f\u4e0d\u540c\uff0c\u6240\u4ee5\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\u548c\u4f7f\u7528\u65b9\u5f0f\u6709\u7ec6\u5fae\u533a\u522b\uff0c\u4e3a\u4e86\u7edf\u4e00\uff0c\u6211\u5c06CentOS\u7cfb\u5217\u7cfb\u7edf\u7684\u7ec4\u7ec7\u7ed3\u6784\u505a\u7ec6\u5fae\u8c03\u6574\u3002</p> <p>\u5728Debian\u7cfb\u5217\u7cfb\u7edf\u4e2d\uff0cNginx\u7684\u865a\u62df\u4e3b\u673a\u914d\u7f6e\u6587\u4ef6\u5728<code>/etc/nginx/sites-available/</code>\u6587\u4ef6\u5939\u4e2d\uff0c\u5982\u679c\u8981\u5f00\u542f\u67d0\u4e00\u4e2a\u865a\u62df\u4e3b\u673a\uff0c\u5219\u5efa\u7acb\u4e00\u4e2a\u8f6f\u8fde\u63a5\u5230<code>/etc/nginx/sites-enabled/</code>\u6587\u4ef6\u5939\u5e76\u91cd\u542fNginx\u5373\u53ef\u3002\u9ed8\u8ba4\u865a\u62df\u4e3b\u673a\u5728<code>/etc/nginx/sites-enabled/</code>\u6587\u4ef6\u5939\uff0c\u9700\u8981\u5173\u95ed\u6389\uff0c\u5426\u5219\u4f1a\u51b2\u7a81\u3002</p> <p>\u5728CentOS\u7cfb\u5217\u7cfb\u7edf\u4e2d\uff0cNginx\u7684\u865a\u62df\u4e3b\u673a\u914d\u7f6e\u6587\u4ef6\u5728<code>/etc/nginx/conf.d/</code>\u6587\u4ef6\u5939\u4e2d\u4ee5<code>.conf</code>\u540e\u7f00\u4fdd\u5b58\uff0c\u5199\u5165\u4e4b\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528\u3002\u9ed8\u8ba4\u865a\u62df\u4e3b\u673a\u96c6\u6210\u5728Nginx\u914d\u7f6e\u6587\u4ef6<code>/etc/nginx/nginx.conf</code>\u4e2d\uff0c\u9700\u8981\u6253\u5f00\u5c06\u5176\u4e2d\u7684server\u5757\u5220\u9664\uff0c\u5426\u5219\u4f1a\u51b2\u7a81\u3002Debian\u7cfb\u5217\u7cfb\u7edf\u4e2d\u7684<code>/etc/nginx/sites-enabled/</code>\u548c<code>/etc/nginx/sites-available/</code>\u6587\u4ef6\u5939\u7ed3\u6784\u5728CentOS\u7cfb\u5217\u7cfb\u7edf\u4e2d\u662f\u6ca1\u6709\u7684\uff0c\u4e0d\u8fc7\u8fd9\u4e2a\u7b56\u7565\u5f88\u4e0d\u9519\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5f00\u542f\u548c\u5173\u95ed\u865a\u62df\u4e3b\u673a\uff0c\u6211\u8fd9\u91cc\u624b\u52a8\u8c03\u6574\u4e00\u4e0b\u3002</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#centos","title":"CentOS","text":"<p>\u6309\u4e0a\u8ff0\u5206\u6790\uff0c\u6211\u4eec\u4f7f\u7528\u4e0b\u9762\u4e24\u6761\u547d\u4ee4\u5728<code>/etc/nginx/</code>\u4e2d\u6dfb\u52a0\u4e24\u4e2a\u6587\u4ef6\u5939\u3002</p> 1  2 sudo mkdir /etc/nginx/sites-available  sudo mkdir /etc/nginx/sites-enabled <p>\u590d\u5236</p> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4f7f\u7528nano\u6253\u5f00Nginx\u914d\u7f6e\u6587\u4ef6\uff0c\u5220\u9664\u5176\u4e2dserver\u5757\uff0c\u5e76\u6dfb\u52a0\u5bf9<code>/etc/nginx/sites-enabled/</code>\u6587\u4ef6\u5939\u7684\u7d22\u5f15\u3002</p> 1 sudo nano /etc/nginx/nginx.conf <p>\u590d\u5236</p> <p>\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u7ed3\u679c\u5982\u4e0b\u56fe\u6240\u793a\u3002</p> <p>CentOS\u53cd\u5411\u4ee3\u7406\u9700\u8981\u914d\u7f6eSELinux\u5141\u8bb8httpd\u6a21\u5757\u53ef\u4ee5\u8054\u7f51\uff0c\u5426\u5219\u670d\u52a1\u5668\u4f1a\u8fd4\u56de502\u9519\u8bef\u3002</p> 1 sudo setsebool -P httpd_can_network_connect true <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#ubuntu-or-debian","title":"Ubuntu or Debian","text":"<p>\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5173\u95edNginx\u9ed8\u8ba4\u865a\u62df\u4e3b\u673a\u3002</p> 1 sudo rm /etc/nginx/sites-enabled/default <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#nginx_1","title":"\u5199\u5165\u865a\u62df\u4e3b\u673a\u5230Nginx\u914d\u7f6e\u6587\u4ef6","text":"<p>1.\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u4f7f\u7528<code>nano</code>\u6dfb\u52a0\u865a\u62df\u4e3b\u673a\u3002(\u6ce8\u610f\u57df\u540d<code>&lt;tdom.ml&gt;</code>\u6539\u4e3a\u4f60\u81ea\u5df1\u7684\u57df\u540d\uff0c\u8fd9\u662f\u865a\u62df\u4e3b\u673a\u7684\u6587\u4ef6\u540d\uff0c\u53ea\u662f\u7528\u6765\u81ea\u5df1\u8bc6\u522b\u7684\u3002)</p> 1 sudo nano /etc/nginx/sites-available/ <p>\u590d\u5236</p> <p>\u57fa\u4e8e\u7efc\u8ff0\u90e8\u5206\u8bb2\u89e3\u7684Trojan\u5de5\u4f5c\u539f\u7406\uff0c\u73b0\u7ed9\u5b9aNginx\u865a\u62df\u4e3b\u673a\u5982\u4e0b\u6240\u793a\u3002\u8fd9\u4e9b\u865a\u62df\u4e3b\u673a\u53ef\u4ee5\u76f4\u63a5\u62f7\u8d1d\u5230\u4e0a\u9762\u865a\u62df\u4e3b\u673a\u914d\u7f6e\u6587\u4ef6\u4e2d\u518d\u4fee\u6539\u4e3a\u4f60\u81ea\u5df1\u7684\uff0c\u5176\u4e2d\u8981\u4fee\u6539\u7684\u5730\u65b9\u5305\u62ec\uff1a</p> <ol> <li>\u7b2c4\u884c\u7684<code>server_name</code>\u7684\u503c<code>&lt;tdom.ml&gt;</code>\u6539\u4e3a\u4f60\u81ea\u5df1\u7684\u57df\u540d\uff1b</li> <li>\u7b2c7\u884c\u7684<code>proxy_pass</code>\u968f\u4fbf\u6307\u5411\u4e00\u4e2a\u6ca1\u6709\u654f\u611f\u4fe1\u606f\u7684\u7f51\u7ad9\u90fd\u53ef\u4ee5\uff0c\u8fd9\u5c31\u662f\u4f60\u8981\u53cd\u5411\u4ee3\u7406\u7684\u7f51\u7ad9\uff0c\u8fd9\u91cc\u6211\u662f\u7528\u4e86RFC\u6587\u6863\u7684\u5730\u5740\uff1b</li> <li>\u7b2c15\u884c\u7684<code>server_name</code>\u7684\u503c<code>&lt;10.10.10.10&gt;</code>\u6539\u4e3a\u4f60\u81ea\u5df1\u7684IP\uff1b</li> <li>\u7b2c17\u884c<code>&lt;tdom.ml&gt;</code>\u6539\u4e3a\u81ea\u5df1\u7684\u57df\u540d\uff0c\u6ce8\u610f\u522b\u586b\u9519\u4e86\u3002</li> </ol> 1  2  3  4  5  6  7  8  9  10  11  12  13  14  15  16  17  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33 server {      listen 127.0.0.1:80 default_server;       server_name ;       location / {          proxy_pass https://www.ietf.org;      }   }   server {      listen 127.0.0.1:80;       server_name &lt;10.10.10.10&gt;;       return 301 https://$request_uri;  }   server {      listen 0.0.0.0:80;      listen [::]:80;       server_name _;       location / {          return 301 https://$host$request_uri;      }       location /.well-known/acme-challenge {         root /var/www/acme-challenge;      }  } <p>\u590d\u5236</p> <p>\u89e3\u91ca\u4e00\u4e0b\u8fd9\u4e9b\u865a\u62df\u4e3b\u673a\u7684\u4e00\u4e9b\u7ec6\u8282\uff1a\u7b2c\u4e00\u4e2aserver\u63a5\u6536\u6765\u81eaTrojan\u7684\u6d41\u91cf\uff0c\u4e0e\u4e0a\u9762Trojan\u914d\u7f6e\u6587\u4ef6\u5bf9\u5e94\uff1b\u7b2c\u4e8c\u4e2aserver\u4e5f\u662f\u63a5\u6536\u6765\u81eaTrojan\u7684\u6d41\u91cf\uff0c\u4f46\u662f\u8fd9\u4e2a\u6d41\u91cf\u5c1d\u8bd5\u4f7f\u7528IP\u800c\u4e0d\u662f\u57df\u540d\u8bbf\u95ee\u670d\u52a1\u5668\uff0c\u6240\u4ee5\u5c06\u5176\u8ba4\u4e3a\u662f\u5f02\u5e38\u6d41\u91cf\uff0c\u5e76\u91cd\u5b9a\u5411\u5230\u57df\u540d\uff1b\u7b2c\u4e09\u4e2aserver\u63a5\u6536\u9664127.0.0.1:80\u5916\u7684\u6240\u670980\u7aef\u53e3\u7684\u6d41\u91cf\u5e76\u91cd\u5b9a\u5411\u5230443\u7aef\u53e3\uff0c\u8fd9\u6837\u4fbf\u5f00\u542f\u4e86\u5168\u7ad9https\uff0c\u53ef\u6709\u6548\u7684\u9632\u6b62\u6076\u610f\u63a2\u6d4b\uff0c\u5176\u4e2d<code>.well-known</code>\u662f\u4e3a\u7533\u8bf7\u8bc1\u4e66\u6240\u51c6\u5907\u7684\uff0c\u4e0b\u6587\u7528\u5230\u7684\u65f6\u5019\u81ea\u7136\u660e\u767d\u3002\u6ce8\u610f\u5230\uff0c\u7b2c\u4e00\u4e2a\u548c\u7b2c\u4e8c\u4e2aserver\u5bf9\u5e94\u7efc\u8ff0\u90e8\u5206\u539f\u7406\u56fe\u4e2d\u7684\u84dd\u8272\u6570\u636e\u6d41\uff0c\u7b2c\u4e09\u4e2aserver\u5bf9\u5e94\u7efc\u8ff0\u90e8\u5206\u539f\u7406\u56fe\u4e2d\u7684\u7ea2\u8272\u6570\u636e\u6d41\uff0c\u7efc\u8ff0\u90e8\u5206\u539f\u7406\u56fe\u4e2d\u7684\u7eff\u8272\u6570\u636e\u6d41\u4e0d\u4f1a\u6d41\u5230Nginx\u3002</p> <p>2.\u4f7f\u80fd\u914d\u7f6e\u6587\u4ef6\u6ce8\u610f\u57df\u540d<code>&lt;tdom.ml&gt;</code>\u6539\u4e3a\u4f60\u81ea\u5df1\u7684\u57df\u540d</p> 1 sudo ln -s /etc/nginx/sites-available/ /etc/nginx/sites-enabled/ <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#nginx_2","title":"\u542f\u52a8Nginx","text":"<p>Nginx\u542f\u52a8\u547d\u4ee4\u548cTrojan\u4e00\u6837\uff0c\u5c31\u4e0d\u8fc7\u591a\u89e3\u91ca\u4e86\u3002</p> 1  2 sudo systemctl restart nginx  sudo systemctl status nginx <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#_2","title":"\u914d\u7f6e\u8bc1\u4e66","text":"<p>\u5f53\u4eceLet\u2019s Encrypt\u83b7\u5f97\u8bc1\u4e66\u65f6\uff0cLet\u2019s Encrypt\u4f1a\u9a8c\u8bc1\u8bc1\u4e66\u4e2d\u57df\u540d\u7684\u63a7\u5236\u6743\u3002\u4e00\u822c\u91c7\u7528HTTP-01\u6216DNS-01\u65b9\u5f0f\u6765\u9a8c\u8bc1\uff0c\u8be6\u60c5\u53c2\u8003\u5b98\u65b9\u6587\u6863\u9a8c\u8bc1\u65b9\u5f0f\u3002\u672c\u6587\u4f7f\u7528HTTP-01\u65b9\u5f0f\u9a8c\u8bc1\uff0c\u82e5\u9700\u8981\u4f7f\u7528DNS-01\u65b9\u5f0f\u9a8c\u8bc1\uff0c\u53c2\u8003acme.sh\u5b98\u65b9\u6587\u6863How to use DNS API\u3002</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#_3","title":"\u521b\u5efa\u8bc1\u4e66\u6587\u4ef6\u5939","text":"<p>\u7b2c\u4e00\u6761\u547d\u4ee4\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939<code>/etc/letsencrypt/live</code>\u7528\u4e8e\u5b58\u653e\u8bc1\u4e66\u3002\u7b2c\u4e8c\u6761\u547d\u4ee4\u5c06\u8bc1\u4e66\u6587\u4ef6\u5939\u6240\u6709\u8005\u6539\u4e3a<code>acme</code>\uff0c\u4f7f\u5f97\u7528\u6237<code>acme</code>\u6709\u6743\u9650\u5199\u5165\u8bc1\u4e66\u3002</p> 1  2 sudo mkdir -p /etc/letsencrypt/live  sudo chown -R acme:acme /etc/letsencrypt/live <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#webroot","title":"\u521b\u5efawebroot\u5e76\u4fee\u6539\u6240\u6709\u8005","text":"<p>\u672c\u6587\u4f7f\u7528acme.sh\u7684http\u65b9\u5f0f\u7533\u8bf7\u8bc1\u4e66\uff0chttp\u65b9\u5f0f\u9700\u8981\u5728\u7f51\u7ad9\u6839\u76ee\u5f55\u4e0b\u653e\u7f6e\u4e00\u4e2a\u6587\u4ef6\u6765\u9a8c\u8bc1\u57df\u540d\u6240\u6709\u6743\uff0c\u6545\u9700\u8981acme.sh\u548cnginx\u5747\u5bf9webroot\u76ee\u5f55\u6709\u6743\u9650\uff0c\u6545\u5c06\u8fd0\u884cNginx\u7684worker\u8fdb\u7a0b\u52a0\u5165certusers\u7ec4\uff0c\u4e0b\u6587\u518d\u5c06webroot\u76ee\u5f55\u9644\u52a0\u7ed9certusers\u7ec4\u5373\u53ef\u3002</p> <p>\u5728\u4e0d\u540c\u7684Linux\u53d1\u65b0\u7248\u672c\u4e2d\uff0cnginx\u53ef\u80fd\u4f7f\u7528\u4e0d\u540c\u7684\u7528\u6237\u8fd0\u884c<code>worker process</code>\uff0c\u53ef\u80fd\u4e3a<code>www-data</code>\uff0c<code>nginx</code>\uff0c<code>nobody</code>\u4e2d\u7684\u4e00\u4e2a\uff0c\u6545\u9700\u8981\u81ea\u5df1\u8fd0\u884c\u4e0b\u8ff0\u547d\u4ee4\u67e5\u627e<code>nginx: worker process</code>\u6240\u5c5e\u7528\u6237\uff1a</p> 1 ps -eo user,command|grep nginx <p>\u590d\u5236</p> <p>\u4e0a\u8ff0\u547d\u4ee4\u8f93\u51fa\u7b2c\u4e8c\u884c\u7b2c\u4e00\u5217\u5373\u4e3a<code>nginx: worker process</code>\u6240\u5c5e\u7528\u6237\uff0c\u7136\u540e\u6839\u636e\u5b9e\u9645\u60c5\u51b5\uff0c\u8fd0\u884c\u4e0b\u9762\u4e09\u4e2a\u547d\u4ee4\u4e4b\u4e00\uff1a</p> 1 sudo usermod -G certusers www-data <p>\u590d\u5236</p> 1 sudo usermod -G certusers nginx <p>\u590d\u5236</p> 1 sudo usermod -G certusers nobody <p>\u590d\u5236</p> <p>\u8fd0\u884c\u4e0b\u9762\u4e24\u6761\u547d\u4ee4\uff0c\u7b2c\u4e00\u6761\u547d\u4ee4\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939<code>/var/www/acme-challenge</code>\u7528\u4e8e\u7ed9acme.sh\u5b58\u653e\u57df\u540d\u9a8c\u8bc1\u6587\u4ef6\u3002\u7b2c\u4e8c\u6761\u547d\u4ee4\u5c06\u8bc1\u4e66\u6587\u4ef6\u5939\u6240\u6709\u8005\u6539\u4e3a<code>acme</code>\uff0c\u4f7f\u5f97\u7528\u6237<code>acme</code>\u6709\u6743\u9650\u5199\u5165\u6587\u4ef6\uff0c\u540c\u65f6\u5f53\u9a8c\u8bc1\u7684\u65f6\u5019Nginx\u53ef\u4ee5\u8bfb\u53d6\u8be5\u6587\u4ef6\u3002</p> 1  2 sudo mkdir -p  /var/www/acme-challenge  sudo chown -R acme:certusers /var/www/acme-challenge <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#acmeshca","title":"\u5b89\u88c5acme.sh\u81ea\u52a8\u7ba1\u7406CA\u8bc1\u4e66\u811a\u672c","text":"<p>\u5206\u522b\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u6ce8\u610f\u770b\u662f\u5426\u62a5\u9519\u3002\u7b2c\u4e00\u6761\u547d\u4ee4\u5207\u6362\u5230\u7528\u6237<code>acme</code>\u3002\u7b2c\u4e8c\u6761\u547d\u4ee4\u5b89\u88c5acme.sh\u3002\u7b2c\u4e09\u6761\u547d\u4ee4\u9000\u51fa\u5f53\u524d\u7528\u6237\u3002\u7b2c\u56db\u6761\u547d\u4ee4\u518d\u6b21\u5207\u6362\u5230\u7528\u6237<code>acme</code>\u3002\u6ce8\u610f\u5230\u8fd9\u91cc\u4e24\u6b21\u5207\u6362\u7528\u6237\u7684\u64cd\u4f5c\u4e0d\u80fd\u7701\u7565\uff0c\u56e0\u4e3a\u5b89\u88c5\u5b8cacme.sh\u4e4b\u540e\u8981\u91cd\u65b0\u767b\u5f55\u5f53\u524d\u7528\u6237\uff0c\u5426\u5219\u65e0\u6cd5\u8bc6\u522b\u51faacme.sh\u547d\u4ee4\u3002</p> 1 sudo su -l -s /bin/bash acme <p>\u590d\u5236</p> 1  2 curl  https://get.acme.sh | sh  exit <p>\u590d\u5236</p> 1 sudo su -l -s /bin/bash acme <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#_4","title":"\u7533\u8bf7\u8bc1\u4e66","text":"<p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5c06\u9ed8\u8ba4CA\u4fee\u6539\u4e3aLet's Encrypt\uff1a</p> 1 acme.sh --set-default-ca  --server  letsencrypt <p>\u590d\u5236</p> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff08\u6ce8\u610f\u57df\u540d<code>&lt;tdom.ml&gt;</code>\u6539\u4e3a\u4f60\u81ea\u5df1\u7684\u57df\u540d\uff09\uff0c\u7b49\u5f85\u4e00\u4f1a\u513f\u3002</p> 1 acme.sh --issue -d  -w /var/www/acme-challenge <p>\u590d\u5236</p> <p>\u770b\u5230\u4e0b\u56fe\u7684\u63d0\u793a\u8868\u793a\u8bc1\u4e66\u7533\u8bf7\u6210\u529f\u3002</p> <p>\u7533\u8bf7\u5931\u8d25\u600e\u4e48\u529e\uff1f\u8bc1\u4e66\u7533\u8bf7\u5931\u8d25\u7684\u53ef\u80fd\u6027\u4e00\u822c\u6709\uff1a1. \u6587\u4ef6\u5939\u6743\u9650\u95ee\u9898\uff0c\u8bf7\u4ed4\u7ec6\u68c0\u67e5\u6bcf\u4e00\u6b65\u662f\u5426\u90fd\u6b63\u786e\uff1b2. \u8bc1\u4e66\u7533\u8bf7\u6b21\u6570\u8d85\u9650\uff0c\u6b64\u65f6\u5207\u5fcc\u53cd\u590d\u5c1d\u8bd5\u3002\u8bc1\u4e66\u6bcf\u4e00\u4e2a\u5468\u7533\u8bf7\u6b21\u6570\u662f\u6709\u9650\u5236\u7684\uff0820\u6b21\uff09\uff0c\u5982\u679c\u8d85\u9650\u4e86\u5c31\u9700\u8981\u7b49\u4e00\u4e2a\u5468\u6216\u8005\u66f4\u6362\u57df\u540d\u4e86\uff08\u8fd9\u4e2a\u9650\u5236\u662f\u4e89\u5bf9\u6bcf\u4e00\u4e2a\u5b50\u57df\u5355\u72ec\u505a\u7684\u9650\u5236\uff0c\u6240\u4ee5\u4e07\u4e00\u8d85\u9650\u4e86\u8fd8\u53ef\u4ee5\u7528\u5b50\u57df\u540d\u7ee7\u7eed\u90e8\u7f72\uff09\u3002\u89e3\u51b3\u65b9\u6848\u662f\uff1a\u5728\u4e0a\u8ff0\u547d\u4ee4\u540e\u52a0<code>--staging</code>\u53c2\u6570\u7ee7\u7eed\u6d4b\u8bd5\u3002\u6d4b\u8bd5\u901a\u8fc7\u4e4b\u540e\uff0c\u5220\u9664\u4e0a\u56fe\u6240\u793a\u56db\u4e2a\u8bc1\u4e66\u6587\u4ef6\u4ee5\u53ca\u8be5\u57df\u540d\u5bf9\u5e94\u6587\u4ef6\u5939\u5e76\u53d6\u6d88<code>--staging</code>\u53c2\u6570\u518d\u6267\u884c\u4e00\u6b21\u3002<code>--staging</code>\u53c2\u6570\u7533\u8bf7\u7684\u8bc1\u4e66\u53ea\u4f5c\u4e3a\u6d4b\u8bd5\u7528\uff0c\u5ba2\u6237\u7aef\u662f\u65e0\u6cd5\u8ba4\u8bc1\u901a\u8fc7\u7684\uff08\u63d0\u793a<code>SSL handshake failed: tlsv1 alert unknown ca</code>\uff09\uff0c\u6240\u4ee5\u4f7f\u7528<code>--staging</code>\u53c2\u6570\u7533\u8bf7\u5230\u4e86\u8bc1\u4e66\u4e4b\u540e\u8981\u53bb\u6389<code>--staging</code>\u53c2\u6570\u91cd\u65b0\u7533\u8bf7\u4e00\u6b21\u3002</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#_5","title":"\u5b89\u88c5\u8bc1\u4e66","text":"<p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff08\u6ce8\u610f\u57df\u540d<code>&lt;tdom.ml&gt;</code>\u6539\u4e3a\u4f60\u81ea\u5df1\u7684\u57df\u540d\uff09\uff0c\u7b2c\u4e00\u6761\u547d\u4ee4\u4f7f\u7528acme.sh\u5c06\u8bc1\u4e66\u5b89\u88c5\u5230<code>certfiles</code>\u76ee\u5f55\uff0c\u8fd9\u6837acme.sh\u66f4\u65b0\u8bc1\u4e66\u7684\u65f6\u5019\u4f1a\u81ea\u52a8\u5c06\u65b0\u7684\u8bc1\u4e66\u5b89\u88c5\u5230\u8fd9\u91cc\u3002\u7b2c\u4e8c\u6761\u547d\u4ee4\u662f\u914d\u7f6eacme.sh\u81ea\u52a8\u66f4\u65b0\u548c\u81ea\u52a8\u66f4\u65b0\u8bc1\u4e66\uff0c\u8fd9\u6837\u914d\u7f6e\u5b8cTrojan\u4e4b\u540e\u4e00\u822c\u4e0d\u7528\u7ba1\u670d\u52a1\u5668\u3002</p> 1 acme.sh --install-cert -d  --key-file /etc/letsencrypt/live/private.key --fullchain-file /etc/letsencrypt/live/certificate.crt <p>\u590d\u5236</p> 1 acme.sh  --upgrade  --auto-upgrade <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#_6","title":"\u4fee\u6539\u6743\u9650","text":"<p>\u6700\u540e\u8fd8\u8981\u5141\u8bb8\u7ec4\u5185\u7528\u6237\u8bbf\u95ee\u8bc1\u4e66\u3002\u53ef\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u5b9e\u73b0\u3002\u7b2c\u4e00\u6761\u547d\u4ee4\u5c06\u8bc1\u4e66\u6587\u4ef6\u5939\u6240\u5728\u7528\u6237\u7ec4\u6539\u4e3a<code>certusers</code>\u3002\u7b2c\u4e8c\u6761\u547d\u4ee4\u662f\u8d4b\u4e88\u8bc1\u4e66\u6587\u4ef6\u5939\u7ec4\u5185\u7528\u6237\u8bfb\u53d6\u6743\u9650\u3002\u8fd0\u884c\u8fd9\u4e24\u6761\u547d\u4ee4\u4e4b\u540e\u7528\u6237<code>trojan</code>\u5c31\u6709\u6743\u9650\u8bfb\u53d6\u8bc1\u4e66\u4e86\u3002\u7b2c\u4e09\u6761\u547d\u4ee4\u9000\u51fa\u7528\u6237<code>acme</code>\uff0c\u56e0\u4e3a\u8bc1\u4e66\u5df2\u7ecf\u5b89\u88c5\u5b8c\u6210\u3002</p> 1  2  3 chown -R acme:certusers /etc/letsencrypt/live  chmod -R 750 /etc/letsencrypt/live  exit <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#trojan_1","title":"\u914d\u7f6eTrojan","text":"","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#trojan_2","title":"\u5b89\u88c5Trojan","text":"<p>\u5206\u522b\u6267\u884c\u5982\u4e0b\u56db\u4e2a\u547d\u4ee4\uff0c\u6ce8\u610f\u770b\u662f\u5426\u62a5\u9519\u3002\u7b2c\u4e00\u4e2a\u547d\u4ee4\u662f\u5b89\u88c5Trojan\uff0c\u5b89\u88c5\u5b8c\u6210\u4e00\u822c\u4f1a\u63d0\u793a\u7248\u672c\u53f7\u6ce8\u610f\u770b\u662f\u5426\u662f\u6700\u65b0\u7248\u672c\u3002\u7b2c\u4e8c\u4e2a\u547d\u4ee4\u662f\u5c06Trojan\u914d\u7f6e\u6587\u4ef6\u7684\u6240\u6709\u8005\u4fee\u6539\u4e3a\u7528\u6237<code>trojan</code>\uff0c\u7531\u4e8e\u4f7f\u7528<code>sudo</code>\u5b89\u88c5\u7684Trojan\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u9ed8\u8ba4\u662f\u5c5e\u4e8e<code>root</code>\u7528\u6237\u7684\uff0c\u800c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u7528\u6237<code>trojan</code>\u8fd0\u884cTrojan\uff0c\u4e0d\u4fee\u6539\u6240\u6709\u8005\u4f1a\u5bfc\u81f4\u542f\u52a8Trojan\u9047\u5230\u6743\u9650\u95ee\u9898\u3002\u7b2c\u4e09\u4e2a\u547d\u4ee4\u5907\u4efdTrojan\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u9632\u4e07\u4e00\u3002\u7b2c\u56db\u4e2a\u547d\u4ee4\u662f\u4f7f\u7528nano\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u3002</p> 1 sudo bash -c \"$(curl -fsSL https://raw.githubusercontent.com/trojan-gfw/trojan-quickstart/master/trojan-quickstart.sh)\" <p>\u590d\u5236</p> 1  2  3 sudo chown -R trojan:trojan /usr/local/etc/trojan  sudo cp /usr/local/etc/trojan/config.json /usr/local/etc/trojan/config.json.bak  sudo nano /usr/local/etc/trojan/config.json <p>\u590d\u5236</p> <p>\u7b2c\u56db\u4e2a\u547d\u4ee4\u6267\u884c\u5b8c\u4e4b\u540e\u5c4f\u5e55\u4f1a\u663e\u793aTrojan\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5b9a\u4f4d\u5230<code>password</code>\u3001<code>cert</code>\u548c<code>key</code>\u5e76\u4fee\u6539\u3002\u5bc6\u7801\u6309\u81ea\u5df1\u559c\u597d\uff0c<code>cert</code>\u548c<code>key</code>\u5206\u522b\u6539\u4e3a<code>/etc/letsencrypt/live/certificate.crt</code>\u548c<code>/etc/letsencrypt/live/private.key</code>\u3002\u7f16\u8f91\u5b8c\u6210\u914d\u7f6e\u6587\u4ef6\u4e4b\u540e\u6309\u5c4f\u5e55\u4e0b\u65b9\u5feb\u6377\u952e\u63d0\u793a\uff08<code>^O</code>\u548c<code>^X</code>\u5373\uff1a<code>Ctrl+O</code>\u548c<code>Ctrl+X</code>\uff09\u4fdd\u5b58\u5e76\u9000\u51fanano\u3002\u4fee\u6539\u4e4b\u540e\u7684config\u6587\u4ef6\u5982\u56fe\u6240\u793a\u3002\u53e6\u5916\uff0c\u5982\u679c\u6709<code>IPv6</code>\u5730\u5740\uff0c\u5c06<code>local_addr</code>\u7684<code>0.0.0.0</code>\u6539\u4e3a<code>::</code>\u624d\u53ef\u4ee5\u4f7f\u7528\u3002</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#trojan_3","title":"\u542f\u52a8Trojan","text":"","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#trojan_4","title":"\u4fee\u6539Trojan\u542f\u52a8\u7528\u6237","text":"<p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u6253\u5f00<code>trojan.service</code>\u6587\u4ef6\uff0c\u5e76\u5c06\u7528\u6237\u4fee\u6539\u4e3a<code>trojan</code>\u3002</p> 1 sudo nano /etc/systemd/system/trojan.service <p>\u590d\u5236</p> <p>\u6dfb\u52a0\u7528\u6237\u6548\u679c\u5982\u56fe\u6240\u793a\uff0c\u6ce8\u610f\u7b49\u53f7\u65c1\u8fb9\u6ca1\u6709\u7a7a\u683c\u3002</p> <p>\u7136\u540e\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u3002</p> 1 sudo systemctl daemon-reload <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#trojan443","title":"\u8d4b\u4e88Trojan\u76d1\u542c443\u7aef\u53e3\u80fd\u529b","text":"<p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u8d4b\u4e88Trojan\u76d1\u542c1024\u4ee5\u4e0b\u7aef\u53e3\u7684\u80fd\u529b\uff0c\u4f7f\u5f97Trojan\u53ef\u4ee5\u76d1\u542c\u5230443\u7aef\u53e3\u3002\u8fd9\u662f\u7531\u4e8e\u6211\u4eec\u4f7f\u7528\u975e<code>root</code>\u7528\u6237\u542f\u52a8Trojan\uff0c\u4f46\u662fLinux\u9ed8\u8ba4\u4e0d\u5141\u8bb8\u975e<code>root</code>\u7528\u6237\u542f\u52a8\u7684\u8fdb\u7a0b\u76d1\u542c1024\u4ee5\u4e0b\u7684\u7aef\u53e3\uff0c\u9664\u975e\u4e3a\u6bcf\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u663e\u5f0f\u58f0\u660e\u3002</p> 1 sudo setcap CAP_NET_BIND_SERVICE=+eip /usr/local/bin/trojan <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#systemdtrojan","title":"\u4f7f\u7528systemd\u542f\u52a8Trojan","text":"<p>Trojan\u542f\u52a8\u3001\u67e5\u770b\u72b6\u6001\u547d\u4ee4\u5206\u522b\u5982\u4e0b\uff0c\u7b2c\u4e00\u6761\u662f\u542f\u52a8Trojan\uff0c\u7b2c\u4e8c\u6761\u662f\u67e5\u770bTrojan\u8fd0\u884c\u72b6\u6001\u3002\u542f\u52a8\u4e4b\u540e\u518d\u67e5\u770b\u4e00\u4e0b\u72b6\u6001\uff0cTrojan\u663e\u793aactive (running)\u5373\u8868\u793a\u6b63\u5e38\u542f\u52a8\u4e86\u3002\u5982\u679c\u51fa\u73b0<code>fatal: config.json(n): invalid code sequence</code>\u9519\u8bef\uff0c\u90a3\u4e48\u662f\u4f60\u7684\u914d\u7f6e\u6587\u4ef6\u7b2c<code>n</code>\u884c\u6709\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u3002\u5982\u679c\u542f\u52a8\u5931\u8d25\uff0c\u8fd8\u53ef\u4ee5\u7528<code>journalctl -f -u trojan</code>\u67e5\u770b<code>systemd</code>\u7684\u65e5\u5fd7\u3002</p> 1  2  3 sudo systemctl enable trojan  sudo systemctl restart trojan  sudo systemctl status trojan <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#_7","title":"\u66f4\u65b0\u8bc1\u4e66","text":"<p>\u5f53acme.sh\u91cd\u65b0\u5b89\u88c5\u8bc1\u4e66\u4e4b\u540e\uff0c\u9700\u8981\u901a\u77e5Trojan\u91cd\u65b0\u52a0\u8f7d\u8bc1\u4e66\u3002\u6700\u7b80\u5355\u7684\u65b9\u6848\u662f\u6bcf\u4e09\u4e2a\u6708\u767b\u5f55\u670d\u52a1\u5668\u91cd\u542fTrojan\uff0c\u4f46\u662f\u4e0d\u591f\u5b8c\u7f8e\uff0c\u6bd5\u7adf\u91cd\u542f\u7684\u65f6\u5019\u4f1a\u5bfc\u81f4\u670d\u52a1\u4e2d\u65ad\u3002\u5176\u5b9eTrojan\u6709\u5b9e\u73b0reload certificate and private key\u529f\u80fd\uff0c\u53ea\u9700\u8981\u5728\u8bc1\u4e66\u66f4\u65b0\u540e\u7ed9Trojan\u53d1\u9001<code>SIGUSR1</code>\u6d88\u606f\u5373\u53ef\u3002Trojan\u6536\u5230<code>SIGUSR1</code>\u6d88\u606f\u540e\u4fbf\u4f1a\u81ea\u52a8\u52a0\u8f7d\u65b0\u7684\u8bc1\u4e66\u548c\u5bc6\u94a5\u6587\u4ef6\uff0c\u8fd9\u6837\u5c31\u4e0d\u7528\u91cd\u542fTrojan\u4e86\u3002\u624b\u52a8\u7ed9Trojan\u53d1\u9001<code>SIGUSR1</code>\u6d88\u606f\u7684\u547d\u4ee4\u662f<code>sudo -u trojan killall -s SIGUSR1 trojan</code>\uff0c\u4f46\u662f\u8fd9\u6837\u4e5f\u4e0d\u591f\u5b8c\u7f8e\uff0c\u4e5f\u5f97\u6bcf\u4e09\u4e2a\u6708\u767b\u5f55\u670d\u52a1\u5668\u8fd0\u884c\u4e00\u6b21\u8be5\u547d\u4ee4\u3002\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u7ed9\u7528\u6237<code>trojan</code>\u6dfb\u52a0\u5b9a\u65f6\u4efb\u52a1\uff0c\u4f7f\u5176\u6bcf\u4e2a\u6708\u8fd0\u884c\u4e00\u6b21\u8be5\u547d\u4ee4\u5373\u53ef\u3002\u5b9e\u73b0\u5982\u4e0b\u3002</p> <p>\u9996\u5148\uff0c\u7f16\u8f91\u7528\u6237<code>trojan</code>\u7684crontab\u6587\u4ef6</p> 1 sudo -u trojan crontab -e <p>\u590d\u5236</p> <p>\u5728\u6587\u4ef6\u672b\u5c3e\u6dfb\u52a0\u4e00\u884c\u5982\u4e0b\uff0c\u8be5\u884c\u8868\u793a\u6bcf\u4e2a\u67081\u53f7\u7684\u65f6\u5019\u8fd0\u884c\u547d\u4ee4<code>killall -s SIGUSR1 trojan</code>\uff0c\u7531\u4e8e\u662f\u4f7f\u7528\u7528\u6237<code>trojan</code>\u8fd0\u884c\u7684\uff0c\u6545\u4e0d\u9700\u8981\u5728\u524d\u9762\u52a0<code>sudo -u trojan</code>\u3002</p> 1 0 0 1 * * killall -s SIGUSR1 trojan <p>\u590d\u5236</p> <p>\u6700\u540e\u67e5\u770bcrontab\u662f\u5426\u751f\u6548\u3002</p> 1 sudo -u trojan crontab -l <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#trojan_5","title":"\u66f4\u65b0Trojan","text":"<p>\u5982\u679cTrojan\u7248\u672c\u6709\u66f4\u65b0\uff08\u53ef\u4ee5\u53bb\u8fd9\u91cc\u67e5\u770b\u662f\u5426\u6709\u66f4\u65b0\uff09\uff0c\u90a3\u4e48\u4f7f\u7528\u672c\u6559\u7a0b\u642d\u5efa\u7684\u670d\u52a1\u5668\u7aef\u66f4\u65b0Trojan\u7248\u672c\u53ea\u9700\u8981\u4e09\u6761\u547d\u4ee4\u5373\u53ef\uff0c\u4e0d\u8fc7\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7b2c\u4e00\u6761\u547d\u4ee4\u4f1a\u63d0\u793a\u662f\u5426\u8986\u76d6\u914d\u7f6e\u6587\u4ef6\uff0c\u5982\u679c\u6ca1\u6709\u5fc5\u8981\u8bf7\u56de\u7b54n\uff0c\u5426\u5219\u914d\u7f6e\u6587\u4ef6\u5c06\u4f1a\u88ab\u8986\u76d6\uff08\u5982\u679c\u4e0d\u5c0f\u5fc3\u8986\u76d6\u4e86\u5c31\u5f97\u81ea\u5df1\u91cd\u65b0\u7f16\u8f91\u4e86\uff09\u3002\u7b2c\u4e8c\u6761\u547d\u4ee4\u91cd\u65b0\u8d4b\u4e88Trojan\u76d1\u542c443\u7aef\u53e3\u7684\u80fd\u529b\u3002\u7b2c\u4e09\u6761\u547d\u4ee4\u91cd\u542fTrojan\u3002</p> 1 sudo bash -c \"$(curl -fsSL https://raw.githubusercontent.com/trojan-gfw/trojan-quickstart/master/trojan-quickstart.sh)\" <p>\u590d\u5236</p> 1  2 sudo setcap CAP_NET_BIND_SERVICE=+eip /usr/local/bin/trojan  sudo systemctl restart trojan <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#trojannginx","title":"\u914d\u7f6eTrojan\u548cNginx\u5f00\u673a\u81ea\u542f","text":"<p>\u867d\u7136\u5f00\u673a\u81ea\u542f\u4e00\u822c\u7528\u4e0d\u7740\uff0c\u9664\u975evultr\u673a\u623f\u505c\u7535\uff0c\u4f46\u662f\u53cd\u6b63\u4e5f\u6ca1\u4ec0\u4e48\u4ee3\u4ef7\uff0c\u5f04\u4e00\u4e0b\u5427\u3002</p> 1  2 sudo systemctl enable trojan  sudo systemctl enable nginx <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#_8","title":"\u68c0\u67e5\u670d\u52a1\u5668\u662f\u5426\u914d\u7f6e\u6210\u529f","text":"<p>\u5230\u8fd9\u91cc\u670d\u52a1\u5668\u5c31\u914d\u7f6e\u5b8c\u6210\u4e86\u3002\u6b64\u65f6\u4f60\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u91cc\u9762\u8bbf\u95ee\u4f60\u7684\u7f51\u7ad9\u770b\u662f\u5426\u80fd\u591f\u8bbf\u95ee\uff0c\u5982\u679c\u4f60\u7684\u7f51\u7ad9\u53ef\u4ee5\u8bbf\u95ee\u4e86\uff0c\u90a3\u4e48\u5c31\u4e00\u5207\u6b63\u5e38\u5566\u3002</p> <p>\u53e6\u5916\uff0c\u57fa\u4e8e\u4ee5\u4e0a\u8003\u8651\u5230\u7684\u53ef\u80fd\u7684\u6076\u610f\u63a2\u6d4b\uff0c\u53ef\u4ee5\u9a8c\u8bc1\u4e00\u4e0b\u4ee5\u4e0b\u60c5\u51b5\u662f\u5426\u6b63\u5e38\u3002</p> <ol> <li>\u6d4f\u89c8\u5668\u4e2d\u4f7f\u7528ip\u8bbf\u95ee\uff1a\u91cd\u5b9a\u5411\u5230https://tdom.ml;</li> <li>\u6d4f\u89c8\u5668\u4e2d\u4f7f\u7528https://ip\u8bbf\u95ee\uff1a\u91cd\u5b9a\u5411\u5230https://tdom.ml(\u8df3\u8f6c\u7684\u65f6\u5019\u6d4f\u89c8\u5668\u53ef\u80fd\u63d0\u793a\u4e0d\u5b89\u5168\u662f\u6b63\u5e38\u7684);</li> <li>\u6d4f\u89c8\u5668\u4e2d\u4f7f\u7528tdom.ml\u8bbf\u95ee\uff1a\u91cd\u5b9a\u5411\u5230https://tdom.ml\u3002</li> </ol>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#bbr","title":"\u542f\u52a8bbr\uff08\u53ef\u9009\uff0c\u5efa\u8bae\uff09","text":"<p>\u542f\u52a8bbr\u9700\u8981Linux\u5185\u6838\u7248\u672c\u57284.10\u53ca\u4ee5\u4e0a\uff0c\u5982\u679c\u4f4e\u4e8e\u8be5\u7248\u672c\u9700\u8981\u81ea\u5df1\u5347\u7ea7\uff08\u8fd9\u4e0d\u5728\u672c\u6559\u7a0b\u8303\u56f4\u4e4b\u540e\uff09\u5185\u6838\u7248\u672c\uff0c\u4fdd\u8bc1\u5185\u6838\u7248\u672c\u4e0d\u4f4e\u4e8e4.10\u3002\u67e5\u770b\u7cfb\u7edf\u5185\u6838\u7248\u672c\u547d\u4ee4\u5982\u4e0b\u3002</p> 1 uname -a <p>\u590d\u5236</p> <p>bbr\u662f\u8c37\u6b4c\u5f00\u53d1\u7684\u7f51\u7edc\u63a7\u5236\u7b97\u6cd5\uff0c\u53ef\u4ee5\u52a0\u5feb\u8bbf\u95ee\u901f\u5ea6\u3002\u6267\u884c\u4e0b\u9762\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u662f\u5426\u542f\u7528bbr\u3002</p> 1 sudo sysctl net.ipv4.tcp_congestion_control <p>\u590d\u5236</p> <p>\u6267\u884c\u5b8c\u6210\u4e4b\u540e\u5982\u679c\u63d0\u793a<code>net.ipv4.tcp_congestion_control = bbr</code>\u5373\u8868\u793a\u542f\u52a8\u4e86bbr\uff0c\u53ef\u4ee5\u8df3\u8fc7\u4e0b\u9762\u542f\u52a8bbr\u7684\u6b65\u9aa4\u3002</p> <p>\u76f4\u63a5\u5c06\u4e0b\u9762\u4e09\u6761\u547d\u4ee4\u62f7\u8d1d\u7c98\u8d34\u5230Xshell\u91cc\u9762\u6267\u884c\u5373\u53ef\u542f\u52a8bbr\uff0c\u68c0\u67e5\u542f\u52a8\u72b6\u6001\u540c\u4e0a\u3002</p> 1  2  3 sudo bash -c 'echo \"net.core.default_qdisc=fq\" &gt;&gt; /etc/sysctl.conf'  sudo bash -c 'echo \"net.ipv4.tcp_congestion_control=bbr\" &gt;&gt; /etc/sysctl.conf'  sudo sysctl -p <p>\u590d\u5236</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#_9","title":"\u914d\u7f6e\u9632\u706b\u5899\uff08\u53ef\u9009\uff09","text":"<p>\u53ea\u6253\u5f0022\u300180\u548c443\u7aef\u53e3\u53ef\u4ee5\u6709\u6548\u7684\u963b\u6b62\u5916\u90e8\u6076\u610f\u6d41\u91cf\uff0c\u964d\u4f4e\u670d\u52a1\u5668\u66b4\u9732\u7684\u98ce\u9669\u3002\u6b64\u6b65\u9aa4\u975e\u5fc5\u987b\uff0c\u800c\u4e14\u81ea\u5df1\u6709\u5176\u4ed6\u670d\u52a1\u8bb0\u5f97\u5176\u4ed6\u670d\u52a1\u7684\u7aef\u53e3\u4e5f\u8981\u5904\u7406\u3002</p> <p>\u672c\u6587\u4ee5ufw\u4e3a\u4f8b\u914d\u7f6e\u9632\u706b\u5899\uff0cufw\u662f\u4e00\u4e2a\u5f88\u597d\u7528\u7684\u9632\u706b\u5899\u914d\u7f6e\u547d\u4ee4\uff0c\u53ef\u4ee5\u7b80\u5316\u64cd\u4f5c\uff0c\u51cf\u5c11\u9519\u8bef\u7684\u53d1\u751f\u3002</p> <p>Debian or Ubuntu\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5b89\u88c5ufw</p> 1 sudo apt install -y ufw <p>\u590d\u5236</p> <p>CentOS\u6267\u884c\u5982\u4e0b\u4e24\u4e2a\u547d\u4ee4\u5b89\u88c5ufw</p> 1  2 sudo yum install -y epel-release  sudo yum install -y ufw <p>\u590d\u5236</p> <p>\u5982\u679c\u670d\u52a1\u5668\u65e0IPv6\u5730\u5740\u90a3\u4e48\u9700\u8981\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u5c06IPV6=yes\u4fee\u6539\u4e3aIPV6=no\u3002</p> 1 sudo nano /etc/default/ufw <p>\u590d\u5236</p> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5373\u53ef\u6210\u529f\u914d\u7f6e\u9632\u706b\u5899\u3002\u6ce8\u610f\uff0c\u5982\u679cssh\u7aef\u53e3\u4e0d\u662f22\u90a3\u4e48\u7b2c\u4e00\u884c\u9700\u8981\u8c03\u6574\uff08\u5c06ssh\u6539\u4e3a\u7aef\u53e3\u53f7\uff09\u3002</p> 1  2  3  4  5 sudo ufw disable  sudo ufw allow ssh  sudo ufw allow https  sudo ufw allow http  sudo ufw enable <p>\u590d\u5236</p> 1  2 sudo ufw status  sudo ufw status verbose <p>\u590d\u5236</p> <p>\u53e6\u5916\uff0c\u5982\u679c\u5bf9Trojan\u4e0d\u653e\u5fc3\uff0c\u90a3\u4e48\u53ef\u4ee5\u53c2\u8003trojan wiki\uff0c\u4f18\u5316\u9632\u706b\u5899\u914d\u7f6e\uff0c\u4f7f\u5f97Trojan\u53ea\u80fd\u7ed9127.0.0.1:80\u53d1\u9001\u6570\u636e\u548c\u54cd\u5e94\u5916\u90e8\u8bf7\u6c42\u3002</p>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#nginx_3","title":"\u4e0e\u73b0\u6709Nginx\u670d\u52a1\u96c6\u6210","text":"<p>\u5982\u679c\u4f60\u672c\u673a\u5df2\u7ecf\u6709Nginx\u670d\u52a1\uff0c\u90a3\u4e48Nginx\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u505a\u9002\u5f53\u4fee\u6539\u4ee5\u548c\u73b0\u6709\u670d\u52a1\u517c\u5bb9\u3002</p> <ol> <li> <p>\u5728\u539f\u670d\u52a1\u4e0eTrojan\u4f7f\u7528\u540c\u4e00\u4e2a\u57df\u540d\u4e14\u539f\u6765\u662f\u76d1\u542c443\u7aef\u53e3\u7684\u60c5\u51b5\u4e0b\uff0c\u90a3\u4e48\u9700\u8981\u5c06\u4f60\u7684ssl\u914d\u7f6e\u5220\u9664\u5e76\u5c06\u76d1\u542c\u5730\u5740\u6539\u4e3a\u7b2c\u4e00\u4e2aserver\u76d1\u542c\u7684\u5730\u5740127.0.0.1:80\uff0c\u7136\u540e\u76f4\u63a5\u7528\u4fee\u6539\u597d\u7684server\u4ee3\u66ff\u4e0a\u8ff0\u914d\u7f6e\u6587\u4ef6\u4e2d\u7b2c\u4e00\u4e2aserver\u5373\u53ef\u3002\u8fd9\u6837https\u52a0\u5bc6\u90e8\u5206\u5c06\u4f1a\u7531Trojan\u5904\u7406\u4e4b\u540e\u8f6c\u53d1\u7ed9Nginx\u800c\u4e0d\u662f\u7531Nginx\u5904\u7406\uff0c\u539f\u6765\u7684\u670d\u52a1\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\u5c31\u6ca1\u6709\u53d8\u5316\u3002</p> </li> <li> <p>\u5982\u679c\u539f\u6765\u7684\u670d\u52a1\u4e0eTrojan\u4f7f\u7528\u4e0d\u540c\u7684\u57df\u540d\uff0c\u5efa\u8bae\u662f\u4fee\u6539Trojan\u4e0e\u539f\u6765\u7684\u670d\u52a1\u4f7f\u7528\u540c\u4e00\u4e2a\u57df\u540d\uff0c\u5982\u679c\u975e\u8981\u4f7f\u7528\u4e0d\u540c\u7684\u57df\u540d\uff0c\u8bf7\u53c2\u8003\u7b2c3\u70b9\u3002</p> </li> <li> <p>\u5982\u679c\u539f\u6765\u7684\u670d\u52a1\u5c31\u76d1\u542c\u4e86\u591a\u4e2a\u57df\u540d\uff0c\u90a3\u4e48\u8bf7\u81ea\u5df1\u7422\u78e8Nginx\u7684sni\uff0c\u53c2\u8003\u8fde\u63a5\uff1angx_stream_ssl_preread_module\u3002</p> </li> <li> <p>\u5982\u679c\u539f\u6765\u7684\u670d\u52a1\u662f\u76d1\u542c80\u7aef\u53e3\uff0c\u60f3\u8981\u7ee7\u7eed\u76d1\u542c80\u7aef\u53e3\u90a3\u4e48\u76f4\u63a5\u53bb\u9664\u7b2c\u4e09\u4e2aserver\u5373\u53ef\uff08\u5c06\u57df\u540d\u9a8c\u8bc1\u76f8\u5173location\u4e0e\u81ea\u5df1\u7684\u865a\u62df\u4e3b\u673a\u7ec4\u5408\uff0c\u5426\u5219\u65e0\u6cd5\u66f4\u65b0\u8bc1\u4e66\uff09\uff0c\u5982\u679c\u8981\u6539\u4e3a\u76d1\u542c443\u7aef\u53e3\u53c2\u8003\u7b2c1\u70b9\u3002</p> </li> </ol>","tags":["linux"]},{"location":"trojan-gfw-%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/#_10","title":"\u53c2\u8003","text":"<p>\u81ea\u5efa\u68af\u5b50\u6559\u7a0b --Trojan\u7248\u672c</p>","tags":["linux"]},{"location":"ubuntu-%E8%AE%BE%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%98%BE%E7%A4%BA%E5%99%A8%E8%BE%93%E5%87%BA/","title":"ubuntu \u8bbe\u7f6e\u865a\u62df\u663e\u793a\u5668\u8f93\u51fa","text":"","tags":["linux"]},{"location":"ubuntu-%E8%AE%BE%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%98%BE%E7%A4%BA%E5%99%A8%E8%BE%93%E5%87%BA/#_1","title":"\u5b89\u88c5\u7a0b\u5e8f","text":"<pre><code>$ sudo apt-get install  xserver-xorg-core-hwe-18.04\n$ sudo apt-get install  xserver-xorg-video-dummy-hwe-18.04  --fix-missing\n</code></pre>","tags":["linux"]},{"location":"ubuntu-%E8%AE%BE%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%98%BE%E7%A4%BA%E5%99%A8%E8%BE%93%E5%87%BA/#_2","title":"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6","text":"<p>Section \"Device\"     Identifier  \"Configured Video Device\"     Driver      \"dummy\" EndSection Section \"Monitor\"     Identifier  \"Configured Monitor\"     HorizSync 31.5-48.5     VertRefresh 50-70 EndSection Section \"Screen\"     Identifier  \"Default Screen\"     Monitor     \"Configured Monitor\"     Device      \"Configured Video Device\"     DefaultDepth 24     SubSection \"Display\"     Depth 24     Modes \"1920x1080\"     EndSubSection EndSection</p> <pre><code>$ sudo nano /etc/X11/xorg.conf.d/xorg.conf\n\nSection \"Monitor\"\n    Identifier \"Monitor0\"\n    HorizSync 28.0-80.0\n    VertRefresh 48.0-75.0\n    # https://arachnoid.com/modelines/\n    # 1920x1080 @ 60.00 Hz (GTF) hsync: 67.08 kHz; pclk: 172.80 MHz\n    Modeline \"1920x1080_60.00\" 172.80 1920 2040 2248 2576 1080 1081 1084 1118 -HSync +Vsync\nEndSection\nSection \"Device\"\n    Identifier \"Card0\"\n    Driver \"dummy\"\n    VideoRam 256000\nEndSection\nSection \"Screen\"\n    DefaultDepth 24\n    Identifier \"Screen0\"\n    Device \"Card0\"\n    Monitor \"Monitor0\"\n    SubSection \"Display\"\n        Depth 24\n        Modes \"1920x1080_60.00\"\n    EndSubSection\nEndSection\n</code></pre>","tags":["linux"]},{"location":"ubuntu-%E8%AE%BE%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%98%BE%E7%A4%BA%E5%99%A8%E8%BE%93%E5%87%BA/#_3","title":"\u914d\u7f6e\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e","text":"<pre><code>/etc/X11/xorg.conf.d/xorg.conf\n/usr/share/X11/xorg.conf.d/xorg.conf\n</code></pre>","tags":["linux"]},{"location":"ubuntu-%E8%AE%BE%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%98%BE%E7%A4%BA%E5%99%A8%E8%BE%93%E5%87%BA/#_4","title":"\u53c2\u8003","text":"<p>ubuntu18.04\u5b89\u88c5\u865a\u62df\u663e\u793a\u5668\uff0c\u4e0d\u63a5\u663e\u793a\u5668\u53ef\u8fdc\u7a0b\u684c\u9762_AIchiNiurou\u7684\u535a\u5ba2-CSDN\u535a\u5ba2_xrandr\u00a0\u4e0d\u63a5\u663e\u793a\u5668 Ubuntu 20.04 \u865a\u62df\u663e\u793a\u5668 1080P \u914d\u7f6e archlinux \u663e\u793a\u5668\u8bbe\u7f6e archlinux nvidia</p>","tags":["linux"]},{"location":"v2ray%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/","title":"v2ray\u4e00\u952e\u811a\u672c\u6536\u96c6\u6574\u7406","text":"<p>\u672c\u6587\u4e3b\u8981\u6536\u96c6\u7f51\u7edc\u4e0a\u7684v2ray\u811a\u672c\uff0c\u8be5\u9875\u9762\u7684\u811a\u672c\u90fd\u7ecf\u8fc7\u672c\u4eba\u9a8c\u8bc1\u4f7f\u7528\u6ca1\u95ee\u9898\u3002</p> <p>\u6700\u540e\u66f4\u65b0\u65f6\u95f4\uff1a2018-03-06</p>","tags":["linux"]},{"location":"v2ray%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/#v2ray-nginx-vmesswstls","title":"V2Ray \u57fa\u4e8e Nginx \u7684 vmess+ws+tls \u4e00\u952e\u5b89\u88c5\u811a\u672c","text":"<p>from: https://github.com/wulabing/V2Ray_ws-tls_bash_onekey</p>","tags":["linux"]},{"location":"v2ray%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/#_1","title":"\u5b89\u88c5\u65b9\u5f0f","text":"<pre><code>git clone https://github.com/wulabing/V2Ray_ws-tls_bash_onekey.git temp &amp;&amp; cd temp &amp;&amp; bash install.sh | tee v2log.txt\n</code></pre>","tags":["linux"]},{"location":"v2ray%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/#v2ray-core","title":"V2ray core \u66f4\u65b0\u65b9\u5f0f","text":"<pre><code>\u6267\u884c\uff1a bash &lt;(curl -L -s https://install.direct/go.sh)\n</code></pre>","tags":["linux"]},{"location":"v2ray%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/#_2","title":"\u542f\u52a8\u65b9\u5f0f","text":"<pre><code>\u542f\u52a8 V2ray\uff1asystemctl start v2ray\n\u542f\u52a8 Nginx\uff1asystemctl start nginx\n</code></pre>","tags":["linux"]},{"location":"v2ray%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/#v2ray-nginx-vmesswstlswebsiteuse-host","title":"V2RAY \u57fa\u4e8e NGINX \u7684 VMESS+WS+TLS+Website(Use Host)","text":"<p>from: https://github.com/dylanbai8/V2Ray_ws-tls_Website_onekey</p> <p><pre><code>bash &lt;(curl https://raw.githubusercontent.com/dylanbai8/V2Ray_ws-tls_Website_onekey/master/install.sh)\n</code></pre> \u5c3d\u91cf\u4f7f\u7528 Debian8 , \u5982\u679c\u9700\u8981\u4fee\u6539\u914d\u7f6e\uff0c\u8fd0\u884c\u811a\u672c\u91cd\u65b0\u5b89\u88c5\u4e00\u6b21\u5373\u53ef\u3002</p>","tags":["linux"]},{"location":"v2ray%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/#v2ray","title":"\u6700\u597d\u7528\u7684 V2Ray \u4e00\u952e\u5b89\u88c5\u811a\u672c &amp; \u7ba1\u7406\u811a\u672c","text":"","tags":["linux"]},{"location":"v2ray%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/#_3","title":"\u5b89\u88c5","text":"<pre><code>bash &lt;(curl -s -L https://233blog.com/v2ray.sh)\n</code></pre>","tags":["linux"]},{"location":"v2ray%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/#_4","title":"\u5feb\u901f\u7ba1\u7406","text":"<pre><code>v2ray info \u67e5\u770b V2Ray \u914d\u7f6e\u4fe1\u606f\nv2ray config \u4fee\u6539 V2Ray \u914d\u7f6e\nv2ray link \u751f\u6210 V2Ray \u914d\u7f6e\u6587\u4ef6\u94fe\u63a5\nv2ray infolink \u751f\u6210 V2Ray \u914d\u7f6e\u4fe1\u606f\u94fe\u63a5\nv2ray qr \u751f\u6210 V2Ray \u914d\u7f6e\u4e8c\u7ef4\u7801\u94fe\u63a5\nv2ray ss \u4fee\u6539 Shadowsocks \u914d\u7f6e\nv2ray ssinfo \u67e5\u770b Shadowsocks \u914d\u7f6e\u4fe1\u606f\nv2ray ssqr \u751f\u6210 Shadowsocks \u914d\u7f6e\u4e8c\u7ef4\u7801\u94fe\u63a5\nv2ray status \u67e5\u770b V2Ray \u8fd0\u884c\u72b6\u6001\nv2ray start \u542f\u52a8 V2Ray\nv2ray stop \u505c\u6b62 V2Ray\nv2ray restart \u91cd\u542f V2Ray\nv2ray log \u67e5\u770b V2Ray \u8fd0\u884c\u65e5\u5fd7\nv2ray update \u66f4\u65b0 V2Ray\nv2ray update.sh \u66f4\u65b0 V2Ray \u7ba1\u7406\u811a\u672c\nv2ray uninstall \u5378\u8f7d V2Ray\n</code></pre>","tags":["linux"]},{"location":"v2ray%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/#_5","title":"\u914d\u7f6e\u6587\u4ef6\u8def\u5f84","text":"<p>from\uff1a https://233blog.com/post/16</p> <pre><code>V2Ray \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a/etc/v2ray/config.json\nCaddy \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a/etc/caddy/Caddyfile\n\u811a\u672c\u914d\u7f6e\u6587\u4ef6\u8def\u5f84: /etc/v2ray/233blog_v2ray_backup.txt\n</code></pre>","tags":["linux"]},{"location":"v2ray%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/#_6","title":"\u5907\u6ce8","text":"<p>V2Ray \u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6\u89e3\u538b\u5bc6\u7801\u4e3a 233blog.com\uff0cSOCKS \u76d1\u542c\u7aef\u53e3\u4e3a 2333\uff0c HTTP \u76d1\u542c\u7aef\u53e3\u4e3a 6666 \u53ef\u80fd\u67d0\u4e9b V2Ray \u5ba2\u6237\u7aef\u7684\u9009\u9879\u6216\u63cf\u8ff0\u7565\u6709\u4e0d\u540c\uff0c\u4f46\u4e8b\u5b9e\u4e0a\uff0c\u6b64\u811a\u672c\u663e\u793a\u7684 V2Ray \u914d\u7f6e\u4fe1\u606f\u5df2\u7ecf\u8db3\u591f\u8be6\u7ec6\uff0c\u7531\u4e8e\u5ba2\u6237\u7aef\u7684\u4e0d\u540c\uff0c\u8bf7\u5bf9\u53f7\u5165\u5ea7\u3002</p>","tags":["linux"]},{"location":"v2ray%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/#_7","title":"\u53c2\u8003","text":"<ul> <li>v2ray\u4e00\u952e\u811a\u672c\u6536\u96c6\u6574\u7406</li> </ul>","tags":["linux"]},{"location":"vscode-%E8%AE%BE%E7%BD%AE-compare-view/","title":"vscode \u8bbe\u7f6e compare view","text":"<ol> <li>\u9009\u62e9\u5de6\u8fb9\u6bd4\u8f83\u6587\u4ef6     \u53f3\u952e\u9009\u62e9select for compare</li> <li>\u9009\u62e9\u53f3\u8fb9\u6bd4\u8f83\u6587\u4ef6     \u53f3\u952e\u9009\u62e9compare with seleted</li> <li>\u8bbe\u7f6e\u6bd4\u8f83\u89c6\u56fe     \u6309\u4e0b shitf + ctrl + p, \u8f93\u5165 compare .\u5728\u4e0b\u62c9\u6846\u4e2d\u9009\u62e9 compare: toggle inline view</li> </ol>","tags":["vscode","tool"]},{"location":"vscode-%E8%AE%BE%E7%BD%AE-compare-view/#_1","title":"\u53c2\u8003","text":"<ul> <li>vscode\u4ee3\u7801\u5bf9\u6bd4\u5dee\u5f02\u89c6\u56fe\u7a97\u53e3\u5207\u6362\u65b9\u6cd5(\u5de6\u53f3\u6587\u4ef6\u4f4d\u7f6e\u5207\u6362)</li> </ul>","tags":["vscode","tool"]},{"location":"windows-%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95---%E5%9C%A8vscode-%E4%B8%AD%E6%89%93%E5%BC%80/","title":"windows \u4e2d\u6dfb\u52a0\u53f3\u952e\u83dc\u5355 - \u5728vscode \u4e2d\u6253\u5f00","text":"<ol> <li><code>win+r</code> \u8f93\u5165regedit, \u6253\u5f00\u6ce8\u518c\u8868</li> <li>\u6253\u5f00\u6587\u4ef6\u5939, \u627e\u5230 <code>HKEY_CLASSES_ROOT\\Directory\\shell</code> \u76ee\u5f55<ol> <li>\u53f3\u952eShell \u65b0\u5efavscode \u76ee\u5f55, \u65b0\u5efa -&gt; \u9879</li> <li>\u4fee\u6539 default \u503c -&gt; <code>vscode \u4e2d\u6253\u5f00</code> , \u8be5\u9879\u4e3a\u53f3\u952e\u83dc\u5355\u540d</li> <li>\u6dfb\u52a0\u56fe\u6807,\u65b0\u5efa -&gt; \u5b57\u7b26\u4e32\u503c, \u6570\u503c\u540d\u79f0 Icon, \u6570\u503c\u6570\u636e  <code>\"C:\\Program Files\\VSCodium\\VSCodium.exe\"</code> </li> <li>\u65b0\u5efacommand \u76ee\u5f55, \u65b0\u5efa-&gt; \u9879</li> <li>\u4fee\u6539command \u76ee\u5f55\u9ed8\u8ba4\u503c, <code>\"C:\\Program Files\\VSCodium\\VSCodium.exe\" \"%1\"</code> </li> </ol> </li> <li>\u6253\u5f00\u6587\u4ef6, \u627e\u5230 <code>HKEY_CLASSES_ROOT\\*\\shell</code> \u76ee\u5f55, \u64cd\u4f5c\u540c\u4e0a</li> </ol>","tags":["tool"]},{"location":"wireguard-%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/","title":"wireguard \u90e8\u7f72\u8bb0\u5f55","text":"","tags":["linux"]},{"location":"wireguard-%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/#_1","title":"\u7f51\u7edc\u7c7b\u578b","text":"<p>NAT0: OpenInternet\uff0c\u6ca1\u6709\u7ecf\u8fc7NAT\u5730\u5740\u8f6c\u6362\uff0c\u516c\u7f51IP</p> <p>NAT1: Full Cone NAT\uff0c\u52a8\u6001\u5bb6\u5bbd\u53ef\u4ee5\u8fbe\u5230\u6700\u4f18\u7684\u72b6\u6001\uff0c\u5916\u7f51\u8bbe\u5907\u53ef\u4ee5\u4e3b\u52a8\u53d1\u4fe1\u606f\u7ed9NAT1\u7f51\u7edc\u5185\u7684\u8bbe\u5907\u3002</p> <p>NAT2: Address-Restricted Cone NAT\uff0c\u53ea\u6709\u5185\u7f51\u8bbe\u5907(\u5730\u5740:\u4efb\u610f\u7aef\u53e3)\u4e3b\u52a8\u53d1\u8fc7\u4fe1\u606f\u7ed9\u5916\u7f51\u8bbe\u5907\uff0c\u5916\u7f51\u8bbe\u5907\u624d\u80fd\u4e3b\u52a8\u8fde\u63a5NAT2\u7684\u8be5\u8bbe\u5907\u7684\u5730\u5740(\u5730\u5740:\u4efb\u610f\u7aef\u53e3) NAT3: Port-Restricted Cone NAT\uff0c\u53ea\u6709\u5185\u7f51\u8bbe\u5907(\u5730\u5740:\u6307\u5b9a\u7aef\u53e3)\u4e3b\u52a8\u53d1\u8fc7\u4fe1\u606f\u7ed9\u5916\u7f51\u8bbe\u5907\uff0c\u5916\u7f51\u8bbe\u5907\u624d\u80fd\u4e3b\u52a8\u8fde\u63a5NAT3\u7684\u8be5\u8bbe\u5907\u7684\u5730\u5740(\u5730\u5740:\u6307\u5b9a\u7aef\u53e3)\uff0c\u9650\u5236\u4e3a\u901a\u4fe1\u8fc7\u7684\u7aef\u53e3</p> <p>NAT4: Symmetric NAT\uff0c\u53ea\u80fd\u548cNAT0\u8bbe\u5907\u901a\u8baf</p>","tags":["linux"]},{"location":"wireguard-%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/#_2","title":"\u53c2\u8003","text":"<ul> <li>\u4f7f\u7528 Phantun \u5c06 WireGuard \u7684 UDP \u6d41\u91cf\u4f2a\u88c5\u6210 TCP</li> <li>How to install PhantomJS on Ubuntu</li> <li>OpenWRT\u8def\u7531\u73af\u5883\u4e0b\u4f7f\u7528Cloudflare\u7684\u52a8\u6001DNS\uff08DDNS\uff09\u670d\u52a1</li> <li>WireGuard Endpoint Discovery and NAT Traversal using DNS-SD</li> <li>P2P\u6280\u672f\u8be6\u89e3(\u4e00)\uff1aNAT\u8be6\u89e3\u2014\u2014\u8be6\u7ec6\u539f\u7406\u3001P2P\u7b80\u4ecb</li> <li>Open source STUN server software</li> <li>WireGuard \u7684\u642d\u5efa\u4f7f\u7528\u4e0e\u914d\u7f6e\u8be6\u89e3</li> <li>peertopeer_behind_nat</li> <li>Wireguard \u4f53\u9a8c</li> <li>\u5982\u4f55\u5feb\u901f\u5224\u65ad\u81ea\u5df1\u7684\u7f51\u7edcNAT\u7c7b\u578b</li> <li>Wireguard\uff1a\u65b0\u4e00\u4ee3\u9b54\u6cd5\u4e0a\u7f51\u5de5\u5177</li> <li>tool n2n</li> </ul>","tags":["linux"]},{"location":"zsh-%E5%A2%9E%E5%8A%A0%E5%91%BD%E4%BB%A4%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95/","title":"zsh \u589e\u52a0\u547d\u4ee4\u5386\u53f2\u8bb0\u5f55","text":"","tags":["tool"]},{"location":"zsh-%E5%A2%9E%E5%8A%A0%E5%91%BD%E4%BB%A4%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95/#_1","title":"\u53c2\u8003","text":"<p>history isn't preserved in zsh</p>","tags":["tool"]},{"location":"%E4%BD%BF%E7%94%A8uefi-shell%E5%BC%95%E5%AF%BCu%E7%9B%98%E5%90%AF%E5%8A%A8/","title":"\u4f7f\u7528UEFI Shell\u5f15\u5bfcU\u76d8\u542f\u52a8","text":"<p>\u9996\u5148\u786e\u8ba4\u4f60\u7684\u4e3b\u677f\u96c6\u6210\u7684UEFI\u81ea\u5e26Shell\u6a21\u5f0f\uff0c\u4e00\u822c\u5f00\u673a\u65f6\u6309F2\u5373\u53ef\u8fdb\u5165Shell\u6a21\u5f0f\uff0c\u6216\u8005\u5728bios\u4e2d\u9009\u62e9\u5f15\u5bfc\uff0c\u5f85\u51fa\u73b0\u201dshell\u201d\u63d0\u793a\u7b26\u65f6\u5373\u8868\u660e\u4f60\u5df2\u8fdb\u5165efi shell\u73af\u5883\u4e2d\u3002 \u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u547d\u4ee4\u884c\u624b\u52a8\u52a0\u8f7d\u542f\u52a8\u6587\u4ef6\uff0c\u4e00\u822cUEFI\u542f\u52a8\u5206\u533a\u662f\u786c\u76d8\u6700\u524d\u7aef\u7684FAT\u5206\u533a\u3002\u56e0\u6b64\u9996\u5148\u6211\u4eec\u8981\u627e\u5230\u5b58\u653e\u542f\u52a8\u6587\u4ef6\u7684\u5206\u533a\uff0c\u4f9d\u6b21\u8f93\u5165\u4e0b\u5217\u547d\u4ee4\uff1a</p> <pre><code>fs0:\uff08ufeshell\u4f7f\u7528fs:x\u65b9\u5f0f\u8868\u793a\u9a71\u52a8\u5668\uff0c\u5e8f\u53f7\u4ece0\u5f00\u59cb\uff09fs_:(\u8bb0\u5f97\u5192\u53f7)\n\nls\uff08\u67e5\u770b\u6587\u4ef6\u7ed3\u6784\uff0c\u786e\u4fdd\u5176\u4e2d\u6709EFI\u76ee\u5f55\uff0c\u5982\u679c\u6ca1\u6709\u5219\u91cd\u65b0\u9009\u62e9\u5176\u4ed6fs\u9a71\u52a8\u5668\uff09\n\ncd EFI\\Boot\uff08\u8fdb\u5165\u5f15\u5bfc\u76ee\u5f55\uff0c\u67e5\u770b\u5f15\u5bfc\u6587\u4ef6\uff09\n\nBOOTX64.efi\uff08\u76f4\u63a5\u8fd0\u884cuefi\u53ef\u6267\u884c\u7a0b\u5e8f\uff09\n</code></pre>","tags":["tool"]},{"location":"%E4%BD%BF%E7%94%A8uefi-shell%E5%BC%95%E5%AF%BCu%E7%9B%98%E5%90%AF%E5%8A%A8/#_1","title":"\u53c2\u8003","text":"<ul> <li>\u4f7f\u7528UEFI Shell\u5f15\u5bfcU\u76d8\u542f\u52a8</li> </ul>","tags":["tool"]},{"location":"%E5%86%85%E6%A0%B8%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","title":"\u5185\u6838\u5185\u5b58\u7ba1\u7406","text":"","tags":["kernel"]},{"location":"%E5%86%85%E6%A0%B8%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#_1","title":"\u8bb0\u5f55","text":"<ul> <li> <p>\u7528 Kconfig \u914d \u7f6e \u811a \u672c \u548c Makefile \u811a \u672c \u7f16 \u5199 \u7684 \u66f4 \u8be6 \u7ec6 \u4fe1 \u606f\uff0c \u53ef \u4ee5 \u5206 \u522b \u53c2 \u89c1 \u5185 \u6838 \u6587 \u6863Documentation \u76ee\u5f55\u5185\u7684 kbuild \u5b50\u76ee\u5f55\u4e0b\u7684 Kconfig-language.txt \u548c Makefiles.txt \u6587\u4ef6 </p> </li> <li> <p>Linux \u6709\u72ec\u7279\u7684\u7f16\u7801\u98ce\u683c\uff0c\u5728\u5185\u6838\u6e90\u4ee3\u7801\u4e0b\u5b58\u5728\u4e00\u4e2a\u6587\u4ef6 Documentation/CodingStyle\uff0c\u8fdb\u884c\u4e86\u6bd4\u8f83\u8be6\u7ec6\u7684\u63cf\u8ff0</p> </li> <li> <p><code>(void) (&amp;_x == &amp;_y);</code> \u5224\u65ad _x \u548c _y \u7684\u7c7b\u578b\u662f\u5426\u4e00\u81f4, \u8fd9\u6761\u8bed\u53e5\u7684\u4f5c\u7528\u4e3b\u8981\u662f\u4e3a\u4e86\u4ea7\u751f\u4e00\u4e2a\u7f16\u8bd1\u5668\u8b66\u544a\uff0c\u4ee5\u63d0\u793a\u7a0b\u5e8f\u5458\u53ef\u80fd\u5b58\u5728\u7684\u6f5c\u5728\u95ee\u9898\u3002 <pre><code>#def ine min(x,y) ({  \\\nconst typeof(x) _x = (x); \\\nconst typeof(y) _y = (y); \\\n(void) (&amp;_x == &amp;_y); \\\n_x &lt; _y ? _x : _y; })\n</code></pre></p> </li> <li> <p>GNU C \u9884\u5b9a\u4e49\u4e86\u4e24\u4e2a\u6807\u8bc6\u7b26\u4fdd\u5b58\u5f53\u524d\u51fd\u6570\u7684\u540d\u5b57\uff0c_ FUNCTION _ \u4fdd\u5b58\u51fd\u6570\u5728\u6e90\u7801\u4e2d\u7684\u540d\u5b57\uff0c__PRETTY_FUNCTION__ \u4fdd\u5b58\u5e26\u8bed\u8a00\u7279\u8272\u7684\u540d\u5b57\u3002\u5728 C \u51fd\u6570\u4e2d\uff0c\u8fd9\u4e24\u4e2a\u540d\u5b57\u662f\u76f8\u540c\u7684\u3002C99 \u5df2\u7ecf\u652f\u6301 __func__ \u5b8f\uff0c\u56e0\u6b64\u5efa\u8bae\u5728 Linux \u7f16\u7a0b\u4e2d\u4e0d\u518d\u4f7f\u7528 __FUNCTION__\uff0c\u800c\u8f6c\u800c\u4f7f\u7528 __func__</p> </li> <li> <p>\u5728\u4f7f\u7528 gcc \u7f16\u8bd1 C \u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u5982\u679c\u4f7f\u7528\u201c-ansi \u2013pedantic\u201d\u7f16\u8bd1\u9009\u9879\uff0c\u5219\u4f1a\u544a\u8bc9\u7f16\u8bd1\u5668\u4e0d\u4f7f\u7528 GNU \u6269\u5c55\u8bed\u6cd5\u3002</p> </li> <li> <p>\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u7684\u4ee3\u7801\u533a\u57df\u79f0\u4e3a\u4e34\u754c\u533a(Critical Section),\u4e34\u754c\u533a\u9700\u8981\u88ab\u4ee5\u67d0\u79cd\u4e92\u65a5\u673a\u5236\u52a0\u4ee5\u4fdd\u62a4.==\u4e2d\u65ad\u5c4f\u853d\\\u539f\u5b50\u64cd\u4f5c\\\u81ea\u65cb\u9501\\\u4fe1\u53f7\u91cf\\\u4e92\u65a5\u4f53\u7b49==\u662fLinux\u8bbe\u5907\u9a71\u52a8\u4e2d\u53ef\u91c7\u7528\u7684\u4e92\u65a5\u9014\u5f84.</p> </li> <li> <p>\u67e5\u770b\u4e2d\u65ad\u7edf\u8ba1\u4fe1\u606f <pre><code>cat /proc/interrupts\n</code></pre></p> </li> <li> <p>\u786c\u4e2d\u65ad,\u8f6f\u4e2d\u65ad\u548c\u4fe1\u53f7\u7684\u533a\u522b: \u786c\u4e2d\u65ad\u662f\u5916\u90e8\u8bbe\u5907\u5bf9CPU\u7684\u4e2d\u65ad, \u8f6f\u4e2d\u65ad\u662f\u4e2d\u65ad\u5e95\u534a\u90e8\u7684\u4e00\u79cd\u5904\u7406\u673a\u5236, \u800c\u4fe1\u53f7\u5219\u662f\u7531\u5185\u6838(\u6216\u5176\u4ed6\u8fdb\u7a0b)\u5bf9\u67d0\u4e2a\u8fdb\u7a0b\u7684\u4e2d\u65ad. </p> </li> <li> <p>\u5ef6\u8fdf\u6709<code>\u5fd9\u7b49\u5f85</code>\u548c<code>\u7761\u7720\u7b49\u5f85</code>,\u5bf9\u5ef6\u8fdf\u8981\u6c42\u4e0d\u662f\u5f88\u7cbe\u786e\u7684\u8bdd\u4f7f\u7528\u7761\u7720\u7b49\u5f85,<code>ndelay(), udelay()</code> \u5fd9\u7b49\u5f85\u901a\u5e38\u4e3a\u4e86\u914d\u5408\u786c\u4ef6\u4e0a\u7684\u77ed\u65f6\u5ef6\u8fdf</p> </li> </ul>","tags":["kernel"]},{"location":"%E5%86%85%E6%A0%B8%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#_2","title":"\u5185\u5b58\u7ba1\u7406","text":"<pre><code>                                            4GB +---------------------------+\n                                                |  \u4fdd\u7559\u533a                  |\n                                                +---------------------------+\n                                                |  \u4e13\u7528\u9875\u9762\u6620\u5c04\u533a           |\n                                 /--------------+---------------------------+\n                                /               |  \u9ad8\u7aef\u5185\u5b58\u6620\u5c04\u533a           |\n    4GB     +----------------+-/    /-----------+---------------------------+\n            |                |    /             +---------------------------+\n            |                |   /              |  vmalloc \u865a\u62df\u5185\u5b58\u5206\u914d\u5668\u533a |\n    896MB   +----------------+==/               +---------------------------+\n            +----------------+  \\---------------+---------------------------+\n                \u7269\u7406\u5185\u5b58       \\                | \u7269\u7406\u5185\u5b58\u6620\u5c04\u533a             |\n                                \\---------------+---------------------------+\n                                                        Linux \u5185\u6838\u7a7a\u95f4\n\n                            32\u4f4dx86\u7cfb\u7edfLinux \u5185\u6838\u7684\u5730\u5740\u7a7a\u95f4\n</code></pre> <p>32\u4f4d\u7684x86,3~4GB \u4e4b\u95f4\u7684\u5185\u6838\u7a7a\u95f4\u4e2d,\u4ece\u4f4e\u5730\u5740\u5230\u9ad8\u5730\u5740\u4f9d\u6b21\u4e3a: \u7269\u7406\u5185\u5b58\u6620\u5c04\u533a-&gt;\u9694\u79bb\u5e26-&gt;vmalloc \u865a\u62df\u5185\u5b58\u5206\u914d\u53bb -&gt; \u9694\u79bb\u5e26-&gt; \u9ad8\u7aef\u5185\u5b58\u6620\u5c04\u533a-&gt;\u4e13\u7528\u9875\u9762\u6620\u5c04\u533a-&gt;\u4fdd\u7559\u533a</p> <ul> <li> <p>\u7269\u7406\u5185\u5b58\u6620\u5c04\u533a,\u4f4e\u4e8e16MB\u7684\u533a\u57df\u4e3aDMA\u533a\u57df,16~896MB\u4e4b\u95f4\u4e3a\u5e38\u89c4\u5185\u5b58\u533a\u57df,\u9ad8\u4e8e896MB\u79f0\u4e3a\u9ad8\u7aef\u5185\u5b58\u533a\u57df</p> <ul> <li>\u7269\u7406\u5185\u5b58\u6620\u5c04\u533a\u53ef\u4ee5\u7528\u4e8e\u8bbf\u95ee\u786c\u4ef6\u8bbe\u5907\uff0c\u4f8b\u5982\u663e\u5361\u3001\u7f51\u7edc\u63a5\u53e3\u5361\u7b49\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u8bbe\u5907\u901a\u5e38\u88ab\u6620\u5c04\u5230\u7269\u7406\u5185\u5b58\u5730\u5740\u7a7a\u95f4\u4e2d\u3002\u901a\u8fc7\u5c06\u8fd9\u4e9b\u5730\u5740\u6620\u5c04\u5230\u8fdb\u7a0b\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\uff0c\u8fdb\u7a0b\u5c31\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u786c\u4ef6\u8bbe\u5907\uff0c\u800c\u65e0\u9700\u8fdb\u884c\u590d\u6742\u7684I/O\u64cd\u4f5c\u3002</li> </ul> </li> <li> <p>\u865a\u62df\u5185\u5b58\u5206\u914d\u533a\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\uff1a</p> <ol> <li>\u5185\u6838\u4ee3\u7801\u6bb5\uff08kernel text\uff09\uff1a\u5185\u6838\u4ee3\u7801\u6240\u5728\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u5305\u62ec\u64cd\u4f5c\u7cfb\u7edf\u7684\u6838\u5fc3\u4ee3\u7801\u548c\u9a71\u52a8\u7a0b\u5e8f\u7b49\u3002</li> <li>\u5185\u6838\u6570\u636e\u6bb5\uff08kernel data\uff09\uff1a\u5185\u6838\u6570\u636e\u6240\u5728\u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff0c\u5305\u62ec\u5185\u6838\u6570\u636e\u7ed3\u6784\u3001\u5168\u5c40\u53d8\u91cf\u7b49\u3002</li> <li>\u5185\u6838\u5806\uff08kernel heap\uff09\uff1a\u5185\u6838\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u7531kmalloc\u7b49\u51fd\u6570\u7ba1\u7406\u3002</li> <li>\u5185\u6838\u6808\uff08kernel stack\uff09\uff1a\u5185\u6838\u51fd\u6570\u8c03\u7528\u65f6\u7684\u5c40\u90e8\u53d8\u91cf\u548c\u8fd4\u56de\u5730\u5740\u6240\u5728\u7684\u7a7a\u95f4\u3002</li> <li>\u5185\u5b58\u6620\u5c04\u533a\uff08mapped memory\uff09\uff1a\u5c06\u6587\u4ef6\u6620\u5c04\u5230\u865a\u62df\u5185\u5b58\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u6307\u9488\u8bbf\u95ee\u6587\u4ef6\u5185\u5bb9\u3002</li> <li>\u786c\u4ef6\u6620\u5c04\u533a\uff08hardware mappings\uff09\uff1a\u5c06\u786c\u4ef6\u8bbe\u5907\u7684\u7269\u7406\u5730\u5740\u6620\u5c04\u5230\u5185\u6838\u865a\u62df\u5730\u5740\u7a7a\u95f4\u4e2d\uff0c\u4ee5\u4fbf\u5185\u6838\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u786c\u4ef6\u8bbe\u5907\u3002</li> </ol> </li> <li> <p>\u9ad8\u7aef\u9875\u9762\u6620\u5c04\u533a</p> <ul> <li>\u8d85\u8fc7\u7269\u7406\u5185\u5b58\u6620\u5c04\u533a\u7684\u7269\u7406\u5185\u5b58\u901a\u5e38\u88ab\u79f0\u4e3a\u9ad8\u7aef\u5185\u5b58,\u5728\u7269\u7406\u5185\u5b58\u533a\u57df\u88ab\u79f0\u4e3a\u5e38\u89c4\u5185\u5b58</li> </ul> </li> <li> <p>\u4e13\u7528\u9875\u9762\u6620\u5c04\u533a</p> </li> <li> <p>\u7cfb\u7edf\u4fdd\u7559\u6620\u5c04\u533a</p> </li> </ul> <pre><code>                                                    \u865a\u62df\u5730\u5740\n                                                +---------------------+\n                                                |  \u5411\u91cf\u8868            |\n                                                +---------------------+\n                                                +---------------------+\n                                                |  vmalloc            |\n                                                +---------------------+\n                                     /----------+---------------------+\n                \u7269\u7406\u5730\u5740            /           |                     |\n            +----------------+-\\  /             |  DMA +\u5e38\u89c4\u5185\u5b58\u533a\u57df  |\n            |  \u9ad8\u7aef\u5185\u5b58      |   x              |    \u5185\u5b58\u6620\u5c04         |\n            +----------------+=&lt;  \\             |                     |\n            |  \u5e38\u89c4 +        |   \\ /============+---------------------+\n            |  DMA\u533a\u57df       |   /\\             |  \u9ad8\u7aef\u5185\u5b58\u6620\u5c04\u533a     | 3GB\n            +----------------+-/   \\------------+---------------------+ 3GB-2MB\n                                                | \u5185\u6838\u6a21\u5757            | 3GB-16MB\n                                                +---------------------+ \n\n                            32\u4f4dARM \u7cfb\u7edfLinux \u5185\u6838\u7684\u5730\u5740\u7a7a\u95f4\n</code></pre> <ul> <li> <p>devm \u5f00\u5934\u7684\u51fd\u6570,\u4f1a\u5728\u7533\u8bf7\u8d44\u6e90\u5931\u8d25\u540e\u81ea\u52a8\u8c03\u7528 \u91ca\u653e\u51fd\u6570</p> </li> <li> <p>\u9700\u8981\u6ce8\u610f DMA \u4e0e Cache \u4e00\u81f4\u6027 <pre><code>/* \u4f7f cache \u65e0\u6548 */\n\"mov    r0, #0\\n\"\n\"mcr    p15, 0, r0, c7, c7 0\\n\"       /* \u4f7f\u6570\u636e\u548c\u6307\u4ee4cache \u65e0\u6548 */\n\"mcr    p15, 0, r0, c7, c10, 4\\n\"     /* \u653e\u7a7a\u5199\u7f13\u5b58 */\n\"mcr    p15, 0, r0, c8, c7, 0\\n\"      /* \u4f7f TLB \u65e0\u6548 */\n</code></pre></p> </li> </ul>","tags":["kernel"]},{"location":"%E5%86%85%E6%A0%B8%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#_3","title":"\u968f\u60f3","text":"<ul> <li>\u4efb\u52a1\u8c03\u5ea6\u53ef\u4ee5\u4f7f\u7528\u4fe1\u53f7\u91cf\u5b9e\u73b0, \u6b7b\u5faa\u73af\u4e2d\u7b49\u5f85\u4fe1\u53f7\u91cf\u4f11\u7720</li> </ul>","tags":["kernel"]},{"location":"%E5%86%85%E6%A0%B8%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8/","title":"\u5185\u6838\u7f51\u7edc\u8bbe\u5907\u9a71\u52a8","text":"<pre><code>graph TB\n    subgraph  \u7f51\u7edc\u8bbe\u5907\u4e0e\u5a92\u4ecb\u5c42\n        id6[\"\u7f51\u7edc\u7269\u7406\u8bbe\u5907\u5a92\u4ecb\"]\n    end\n\n    subgraph \u8bbe\u5907\u9a71\u52a8\u529f\u80fd\u5c42\n        id4[\"\u6570\u636e\u5305\u53d1\u9001 hard_start_xmit()\"]\n        id5[\"\u4e2d\u65ad\u5904\u7406 (\u6570\u636e\u5305\u63a5\u6536)\"]\n    end\n\n    subgraph \u7f51\u7edc\u8bbe\u5907\u63a5\u53e3\u5c42\n        id3[\u7ed3\u6784\u4f53 net_device]\n    end\n\n    subgraph \u7f51\u7edc\u534f\u8bae\u63a5\u53e3\u5c42\n        id1[\"\u6570\u636e\u5305\u53d1\u9001 dev_queue_xmit()\"]\n        id2[\"\u6570\u636e\u5305\u63a5\u6536 netif_rx()\"]\n    end\n    id3--&gt;id2\n    id1--&gt;id3\n    id3--&gt;id4\n    id5--&gt;id3\n    id4--&gt;id6\n    id6--&gt;id5\n</code></pre>","tags":["kernel"]},{"location":"%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%BA%E5%BA%8F/","title":"\u5185\u6838\u9a71\u52a8\u521d\u59cb\u5316\u987a\u5e8f","text":"<pre><code>// /kernel/include/linux/platform_device.h \n#define module_platform_driver(__platform_driver) \\\n        module_driver(__platform_driver, platform_driver_register, \\\n                        platform_driver_unregister)\n// device.h\n#define module_driver(__driver, __register, __unregister, ...) \\\nstatic int __init __driver##_init(void) \\\n{ \\\n        return __register(&amp;(__driver) , ##__VA_ARGS__); \\\n} \\\nmodule_init(__driver##_init); \\\nstatic void __exit __driver##_exit(void) \\\n{ \\\n        __unregister(&amp;(__driver) , ##__VA_ARGS__); \\\n} \\\nmodule_exit(__driver##_exit);\n\n// module.h\n#define module_init(x)     __initcall(x);              \n// init.h\n#define __initcall(fn) device_initcall(fn)\n\n#define device_initcall(fn)                 __define_initcall(\"6\",fn,6)\n\n// init.h\n#define pure_initcall(fn)                __define_initcall(fn, 0)\n\n#define core_initcall(fn)                __define_initcall(fn, 1)\n#define core_initcall_sync(fn)                __define_initcall(fn, 1s)\n#define postcore_initcall(fn)                __define_initcall(fn, 2)\n#define postcore_initcall_sync(fn)        __define_initcall(fn, 2s)\n#define arch_initcall(fn)                __define_initcall(fn, 3)\n#define arch_initcall_sync(fn)                __define_initcall(fn, 3s)\n#define subsys_initcall(fn)                __define_initcall(fn, 4)\n#define subsys_initcall_sync(fn)        __define_initcall(fn, 4s)\n#define fs_initcall(fn)                        __define_initcall(fn, 5)\n#define fs_initcall_sync(fn)                __define_initcall(fn, 5s)\n#define rootfs_initcall(fn)                __define_initcall(fn, rootfs)\n#define device_initcall(fn)                __define_initcall(fn, 6)\n#define device_initcall_sync(fn)        __define_initcall(fn, 6s)\n#define late_initcall(fn)                __define_initcall(fn, 7)\n#define late_initcall_sync(fn)                __define_initcall(fn, 7s)\n</code></pre> <p><pre><code>//module_platform_driver(XXX_driver);\nstatic int __init XXX_driver_init(void)\n{\n    return platform_driver_register(&amp;XXX_driver);\n}\nlate_initcall(XXX_driver_init);\nstatic void __exit XXX_driver_exit(void)\n{\n    platform_driver_unregister(&amp;XXX_driver);\n}\nmodule_exit(XXX_driver_exit);\n#\u4fee\u6539\u7684\u52a0\u8f7d\u987a\u5e8f\u4ee3\u7801\n</code></pre> https://blog.csdn.net/qq_44710568/article/details/124356552</p>","tags":["linux"]},{"location":"%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%BA%E5%BA%8F/#_2","title":"\u5185\u6838\u5ef6\u8fdf\u542f\u52a8","text":"<p>https://docs.kernel.org/driver-api/driver-model/driver.html#callbacks</p>","tags":["linux"]},{"location":"%E5%88%9B%E5%BB%BAascii%E7%A0%81%E7%9A%84%E7%9B%AE%E5%BD%95%E6%A0%91/","title":"\u521b\u5efaASCII\u7801\u7684\u76ee\u5f55\u6811","text":"<pre><code> ls -R | grep \":$\" | sed -e 's/:$//' -e 's/[^-][^\\/]*\\//--/g' -e 's/^/   /' -e 's/-/|/'\n# or\ntree .\n</code></pre>","tags":["Shell","tool"]},{"location":"%E5%88%A0%E9%99%A4ubunut-pro/","title":"\u5220\u9664Ubunut Pro","text":"<p>how-to-get-rid-of-ubuntu-pro-advertisement-when-updating-apt</p>","tags":["linux"]},{"location":"%E5%8E%BB%E6%8E%89%E5%AE%8F__file__%E7%9A%84%E8%B7%AF%E5%BE%84/","title":"\u53bb\u6389\u5b8f__FILE__\u7684\u8def\u5f84","text":"<p>\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u53bb\u6389\u5b8f__FILE__\u7684\u8def\u5f84\uff0c\u53ea\u663e\u793a\u6587\u4ef6\u540d\u3002</p> <p>\u5b8f__FILE__\u5c55\u5f00\u540e\u4f1a\u5e26\u6709\u8def\u5f84\u4fe1\u606f\uff0c\u6bd4\u5982\u4e0b\u9762\u7684\u4ee3\u7801\uff1a</p> <pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n    printf(\"file_name:%s\\n\", __FILE__);\n    return 0;\n}\n</code></pre> <p>\u5982\u679cMakefile\u5185\u5bb9\u5982\u4e0b:</p> <pre><code>CFALG = -Wall\n\nall: /home/helloworld/test.c\n    gcc $(CFALG) $&lt; -o test\n</code></pre> <p>\u7f16\u8bd1\u8fd0\u884c\uff0c\u7a0b\u5e8f\u8f93\u51fa\u4e3a\uff1a</p> <pre><code>file_name:/home/helloworld/test.c\n</code></pre> <p>\u4e3a\u4e86\u4e0d\u8ba9\u5b8f__FILE__\u5e26\u6709\u8def\u5f84\u4fe1\u606f\uff0c\u53ef\u4ee5\u5728Makefile\u4e2d\u91cd\u5b9a\u4e49\u5b8f__FILE__\uff1a</p> <pre><code>CFALG = -Wall\nCFALG += -U__FILE__ -D__FILE__='\"$(subst $(dir $&lt;),,$&lt;)\"'\n\nall: /home/helloworld/test.c\n    gcc $(CFALG) $&lt; -o test\n</code></pre> <p>\u7f16\u8bd1\u8fd0\u884c\uff0c\u7a0b\u5e8f\u8f93\u51fa\u4e3a\uff1a</p> <pre><code>file_name:test.c\n</code></pre> <p>\u53d6\u6d88\u5b8f__FILE__\u4f1a\u4ea7\u751f\u7f16\u8bd1\u8b66\u544a\uff0c\u5982\u679c\u4e0d\u60f3\u4ea7\u751f\u8b66\u544a\uff0c\u53ef\u4ee5\u8003\u8651\u65b0\u5efa\u4e00\u4e2a\u5b8f\uff0c \u6bd4\u5982__FILENAME__\u3002</p>","tags":["c/cpp"]},{"location":"%E5%8E%BB%E6%8E%89%E5%AE%8F__file__%E7%9A%84%E8%B7%AF%E5%BE%84/#_1","title":"\u53c2\u8003","text":"<p>\u53bb\u6389\u5b8f__FILE__\u7684\u8def\u5f84</p>","tags":["c/cpp"]},{"location":"linux/%E5%9C%A8-freebsd-13-%E4%B8%8A%E5%AE%89%E8%A3%85-gitea/","title":"\u5728 FreeBSD 13 \u4e0a\u5b89\u88c5 gitea","text":"","tags":["tool"]},{"location":"linux/%E5%9C%A8-freebsd-13-%E4%B8%8A%E5%AE%89%E8%A3%85-gitea/#_1","title":"\u64cd\u4f5c","text":"<pre><code># \u5b89\u88c5git\nsudo pkg install git git-lfs\n\n# \u4e0b\u8f7dgitea\nwget https://dl.gitea.io/gitea/1.18.3/gitea-1.18.3-freebsd12-amd64\n\nmv gitea-*-freebsd12-amd64 /usr/local/bin/gitea\nchmod +x /usr/local/bin/gitea\n\n# \u521b\u5efa\u7528\u6237\n[root@freebsd ~]# adduser\nUsername: git\nFull name:\nUid (Leave empty for default):\nLogin group [git]:\nLogin group is git. Invite git into other groups? []:\nLogin class [default]:\nShell (sh csh tcsh bash rbash git-shell nologin) [sh]:\nHome directory [/home/git]:\nHome directory permissions (Leave empty for default):\nUse password-based authentication? [yes]: no\nLock out the account after creation? [no]:\nUsername   : git\nPassword   : &lt;disabled&gt;\nFull Name  :\nUid        : 1002\nClass      :\nGroups     : git\nHome       : /home/git\nHome Mode  :\nShell      : /bin/sh\nLocked     : no\nOK? (yes/no): yes\nadduser: INFO: Successfully added (git) to the user database.\nAdd another user? (yes/no): no\nGoodbye!\n\n# \u542f\u52a8\u670d\u52a1\nmkdir -p /var/lib/gitea/{custom,data,log}\nchown -R git:git /var/lib/gitea\nchmod -R 750 /var/lib/gitea\n# \u7f16\u5199rc \u542f\u52a8\u811a\u672c /usr/local/etc/rc.d/gitea\n#!/bin/sh\n#\n# $FreeBSD$\n#\n# PROVIDE: gitea\n# REQUIRE: NETWORKING SYSLOG\n# KEYWORD: shutdown\n#\n# Add the following lines to /etc/rc.conf to enable gitea:\n#\n#   gitea_enable=\"YES\"\n#\n# https://github.com/go-gitea/gitea/blob/main/contrib/init/freebsd/gitea\n\n. /etc/rc.subr\n\nname=\"gitea\"\nrcvar=\"gitea_enable\"\n\nload_rc_config $name\n\n: ${gitea_user:=\"git\"}\n: ${gitea_enable:=\"NO\"}\n: ${gitea_directory:=\"/var/lib/gitea\"}\n\ncommand=\"/usr/local/bin/gitea web\"\nprocname=\"$(echo $command |cut -d' ' -f1)\"\n\npidfile=\"${gitea_directory}/${name}.pid\"\n\nstart_cmd=\"${name}_start\"\nstop_cmd=\"${name}_stop\"\n\ngitea_start() {\n    cd ${gitea_directory}\n    export USER=${gitea_user}\n    export HOME=/home/${gitea_user}\n    export GITEA_WORK_DIR=${gitea_directory}\n    /usr/sbin/daemon -f -u ${gitea_user} -p ${pidfile} $command\n}\n\ngitea_stop() {\n    if [ ! -f $pidfile ]; then\n        echo \"GITEA PID File not found. Maybe GITEA is not running?\"\n    else\n        kill $(cat $pidfile)\n    fi\n}\n\nrun_rc_command \"$1\"\n\n# \u7f16\u8f91rc\u811a\u672c\u6743\u9650\n\nchmod 755 /usr/local/etc/rc.d/gitea\n\n# \u542f\u52a8\u670d\u52a1\n\nsysrc 'gitea_enable=YES'\nservice gitea start\n# \u8bbf\u95eeweb \u7ad9\u70b9\u521d\u59cb\u5316\n\nhttp://192.168.1.3:3000\n</code></pre>","tags":["tool"]},{"location":"linux/%E5%9C%A8-freebsd-13-%E4%B8%8A%E5%AE%89%E8%A3%85-gitea/#trubleshooting","title":"trubleshooting","text":"<pre><code>(.venv) [mars@mapc ~/workspace/pyground/encrypted_bin]$ git push upstream master\nEnumerating objects: 21, done.\nCounting objects: 100% (21/21), done.\nDelta compression using up to 16 threads\nCompressing objects: 100% (19/19), done.\nWriting objects: 100% (21/21), 222.82 KiB | 4.55 MiB/s, done.\nTotal 21 (delta 6), reused 0 (delta 0), pack-reused 0 (from 0)\nremote: env: bash: No such file or directory\nTo 192.168.1.3:workspace/encrypted_bin.git\n ! [remote rejected] master -&gt; master (pre-receive hook declined)\nerror: failed to push some refs to '192.168.1.3:workspace/encrypted_bin.git'\n# freebse \u6ca1\u6709bash, \u9700\u8981\u624b\u52a8\u5b89\u88c5\nsudo pkg install bash\n</code></pre>","tags":["tool"]},{"location":"linux/%E5%9C%A8-freebsd-13-%E4%B8%8A%E5%AE%89%E8%A3%85-gitea/#_2","title":"\u53c2\u8003","text":"<p>\u5728 FreeBSD 12 \u4e0a\u5b89\u88c5 Gitea</p>","tags":["tool"]},{"location":"%E6%89%8B%E6%8A%8A%E6%89%8B%E8%A7%A3%E6%9E%90elf%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E4%BB%8Ehello-world%E5%88%B0%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%A5%A5%E7%A7%98/","title":"\u624b\u628a\u624b\u89e3\u6790ELF\u6587\u4ef6\u683c\u5f0f\uff1a\u4eceHello World\u5230\u4e8c\u8fdb\u5236\u5965\u79d8","text":"<p>\u5927\u4f19\u5e94\u8be5\u90fd\u77e5\u9053\u65e0\u8bba\u662fLinux\u4e0b\u7684\u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u8fd8\u662f\u5171\u4eab\u5e93\uff08<code>.so</code>\uff09\u3001\u6838\u5fc3\u8f6c\u50a8\u6587\u4ef6\uff08<code>core</code>\uff09\uff0c\u5b83\u4eec\u7684\u5e95\u5c42\u683c\u5f0f\u90fd\u662f ELF\uff08Executable and Linkable Format\uff09\u3002\u7406\u89e3ELF\u6587\u4ef6\uff0c\u80fd\u8ba9\u4f60\u83b7\u5f97\u54ea\u4e9b\u80fd\u529b\u5462\uff1f\u6211\u60f3\u5e94\u8be5\u6709\u5982\u4e0b\u51e0\u70b9  </p> <p>\u2022 \u9006\u5411\u5206\u6790\uff1a\u7834\u89e3\u7a0b\u5e8f\u903b\u8f91\uff0c\u5206\u6790\u6076\u610f\u4ee3\u7801\u3002</p> <p>\u2022 \u8c03\u8bd5\u5b9a\u4f4d\uff1a\u901a\u8fc7\u5d29\u6e83\u7684core\u6587\u4ef6\u5feb\u901f\u5b9a\u4f4d\u95ee\u9898\u3002</p> <p>\u2022 \u6027\u80fd\u4f18\u5316\uff1a\u5206\u6790\u5185\u5b58\u5e03\u5c40\u548c\u51fd\u6570\u8c03\u7528\u5173\u7cfb\u3002</p> <p>\u672c\u6587\u5c06\u4ee5\u4e00\u4e2a\u5305\u542b \u5168\u5c40\u53d8\u91cf\u3001\u5c40\u90e8\u53d8\u91cf\u3001\u5b57\u7b26\u4e32\u5e38\u91cf \u7684\u201cHello World\u201d\u7a0b\u5e8f\u4e3a\u4f8b\uff0c\u751f\u6210ELF\u6587\u4ef6\uff0c\u5e76\u9010\u5b57\u8282\u89e3\u6790\u5176\u7ed3\u6784\uff01</p> <p>\u7b2c\u4e00\u6b65\uff1a\u751f\u6210\u793a\u4f8bELF\u6587\u4ef6 </p> <p>\u6211\u4eec\u7f16\u5199\u4e00\u4e2a\u5305\u542b\u591a\u79cd\u6570\u636e\u7c7b\u578b\u7684\u7a0b\u5e8f\uff0c\u786e\u4fdd\u751f\u6210\u4e30\u5bcc\u7684ELF\u6bb5\uff08section\uff09\u3002</p> <p>1. \u793a\u4f8b\u4ee3\u7801</p> <pre><code>// hello_elf.c#include\u00a0&lt;stdio.h&gt;int\u00a0global_init =\u00a042; \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\u00a0// \u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\uff08.data\u6bb5\uff09int\u00a0global_uninit; \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0// \u672a\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\uff08.bss\u6bb5\uff09constchar\u00a0*str =\u00a0\"Hello ELF!\";\u00a0// \u5b57\u7b26\u4e32\u5e38\u91cf\uff08.rodata\u6bb5\uff09int\u00a0main()\u00a0{\u00a0 \u00a0\u00a0int\u00a0local_var =\u00a0100; \u00a0 \u00a0 \u00a0 \u00a0// \u5c40\u90e8\u53d8\u91cf\uff08\u6808\u4e2d\uff0cELF\u4e0d\u76f4\u63a5\u5b58\u50a8\uff09\u00a0 \u00a0\u00a0staticint\u00a0static_var =\u00a00; \u00a0// \u9759\u6001\u53d8\u91cf\uff08.data\u6216.bss\u6bb5\uff09\u00a0 \u00a0\u00a0printf(\"%s\\n\", str);\u00a0 \u00a0\u00a0return0;}\n</code></pre> <p>2. \u7f16\u8bd1\u751f\u6210ELF\u6587\u4ef6</p> <pre><code>gcc -g -no-pie hello_elf.c -o hello_elf \u00a0# -g\u751f\u6210\u8c03\u8bd5\u4fe1\u606f\uff0c-no-pie\u7981\u7528\u5730\u5740\u968f\u673a\u5316\n</code></pre> <p>\u7b2c\u4e8c\u6b65\uff1aELF\u6587\u4ef6\u5168\u666f\u901f\u89c8 </p> <p>\u4f7f\u7528\u5de5\u5177\u5feb\u901f\u67e5\u770bELF\u6587\u4ef6\u7ed3\u6784\uff1a</p> <pre><code>file hello_elf \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\u00a0# \u67e5\u770b\u6587\u4ef6\u7c7b\u578breadelf -h hello_elf \u00a0 \u00a0 \u00a0 \u00a0\u00a0# \u67e5\u770bELF\u5934readelf -l hello_elf \u00a0 \u00a0 \u00a0 \u00a0\u00a0# \u67e5\u770b\u7a0b\u5e8f\u5934\u8868\uff08\u52a0\u8f7d\u4fe1\u606f\uff09readelf -S hello_elf \u00a0 \u00a0 \u00a0 \u00a0\u00a0# \u67e5\u770b\u8282\u5934\u8868\uff08\u6bb5\u4fe1\u606f\uff09objdump -d hello_elf \u00a0 \u00a0 \u00a0 \u00a0\u00a0# \u53cd\u6c47\u7f16\u4ee3\u7801\u6bb5\n</code></pre> <p>\u7b2c\u4e09\u6b65\uff1a\u9010\u5b57\u8282\u89e3\u6790ELF\u6587\u4ef6\u7ed3\u6784 </p> <p>\u6211\u4eec\u5c06\u4ece\u4e8c\u8fdb\u5236\u5c42\u9762\u89e3\u6790ELF\u6587\u4ef6\uff0c\u91cd\u70b9\u5173\u6ce8\u4ee5\u4e0b\u90e8\u5206\uff1a</p> <ol> <li> <p>ELF\u5934\uff08ELF Header\uff09</p> </li> <li> <p>\u7a0b\u5e8f\u5934\u8868\uff08Program Header Table\uff09</p> </li> <li> <p>\u4ee3\u7801\u6bb5\uff08.text\uff09</p> </li> <li> <p>\u6570\u636e\u6bb5\uff08.data\u3001.bss\u3001.rodata\uff09</p> </li> <li> <p>\u7b26\u53f7\u8868\uff08.symtab\uff09</p> </li> <li> <p>\u8c03\u8bd5\u4fe1\u606f\uff08.debug_*\uff09</p> </li> </ol> <p>1. ELF\u5934\uff08ELF Header\uff09 </p> <p>ELF\u5934\u4f4d\u4e8e\u6587\u4ef6\u8d77\u59cb\u4f4d\u7f6e\uff080x0~0x40\u5b57\u8282\uff09\uff0c\u63cf\u8ff0\u6587\u4ef6\u57fa\u672c\u4fe1\u606f\u3002</p> <pre><code>hexdump -C hello_elf -n 64 \u00a0# \u67e5\u770bELF\u5934\uff08\u524d64\u5b57\u8282\uff09\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>00000000 \u00a07f 45 4c 46 02 01 01 00 \u00a000 00 00 00 00 00 00 00 \u00a0|.ELF............|00000010 \u00a002 00 3e 00 01 00 00 00 \u00a0a0 04 40 00 00 00 00 00 \u00a0|..&gt;.......@.....|00000020 \u00a040 00 00 00 00 00 00 00 \u00a010 3e 00 00 00 00 00 00 \u00a0|@........&gt;......|00000030 \u00a000 00 00 00 40 00 38 00 \u00a009 00 40 00 1f 00 1c 00 \u00a0|....@.8...@.....|\n</code></pre> <p>\u5173\u952e\u5b57\u6bb5\u89e3\u6790\uff1a \u2022 Magic\uff1a<code>7F 45 4C 46</code>\uff08<code>0x7F</code>+<code>ELF</code>\uff09\u3002</p> <p>\u2022 Class\uff1a<code>02</code>\u8868\u793a64\u4f4d\u6587\u4ef6\u3002</p> <p>\u2022 Type\uff1a<code>01 00</code>\uff08<code>0x0001</code>\uff09\u8868\u793a\u53ef\u6267\u884c\u6587\u4ef6\uff08<code>ET_EXEC</code>\uff09\u3002</p> <p>\u2022 Machine\uff1a<code>3e 00</code>\uff08<code>0x003e</code>\uff09\u8868\u793ax86-64\u67b6\u6784\u3002</p> <p>\u2022 Entry point\uff1a<code>a0 04 40 00</code>\uff08<code>0x4004a0</code>\uff09\uff0c\u7a0b\u5e8f\u5165\u53e3\u5730\u5740\u3002</p> <p>\u2022 Start of program headers\uff1a<code>40 00</code>\uff08<code>0x40</code>\uff09\uff0c\u7a0b\u5e8f\u5934\u8868\u8d77\u59cb\u4f4d\u7f6e\u3002</p> <p>2. \u7a0b\u5e8f\u5934\u8868\uff08Program Header Table\uff09 </p> <p>\u7a0b\u5e8f\u5934\u8868\u6307\u5bfc\u64cd\u4f5c\u7cfb\u7edf\u5982\u4f55\u52a0\u8f7d\u7a0b\u5e8f\u5230\u5185\u5b58\u3002</p> <pre><code>readelf -l hello_elf\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>Program Headers:\u00a0 Type \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Offset \u00a0 VirtAddr \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 PhysAddr \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 FileSiz \u00a0MemSiz \u00a0 Flg Align\u00a0 LOAD \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 0x000000 0x0000000000400000 0x0000000000400000 0x0006b4 0x0006b4 R E 0x200000\u00a0 LOAD \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 0x000e00 0x0000000000600e00 0x0000000000600e00 0x000228 0x000230 RW \u00a00x200000\u00a0 DYNAMIC \u00a0 \u00a0 \u00a0 \u00a00x000e18 0x0000000000600e18 0x0000000000600e18 0x0001d0 0x0001d0 RW \u00a00x8\n</code></pre> <p>\u2022 LOAD\u6bb5\uff1a</p> <p>\u2022 \u7b2c\u4e00\u4e2a<code>LOAD</code>\u6bb5\u4e3a\u4ee3\u7801\u6bb5\uff08<code>.text</code>\uff09\uff0c\u6743\u9650<code>R E</code>\uff08\u53ef\u8bfb\u53ef\u6267\u884c\uff09\u3002</p> <p>\u2022 \u7b2c\u4e8c\u4e2a<code>LOAD</code>\u6bb5\u4e3a\u6570\u636e\u6bb5\uff08<code>.data</code>\u3001<code>.bss</code>\uff09\uff0c\u6743\u9650<code>RW</code>\uff08\u53ef\u8bfb\u53ef\u5199\uff09\u3002</p> <p>3. \u4ee3\u7801\u6bb5\uff08.text\uff09 </p> <p>\u4ee3\u7801\u6bb5\u5b58\u653e\u53ef\u6267\u884c\u6307\u4ee4\uff0c\u5bf9\u5e94<code>main</code>\u51fd\u6570\u548c\u5e93\u51fd\u6570\u8c03\u7528\u3002</p> <pre><code>objdump -d hello_elf\n</code></pre> <p>\u53cd\u6c47\u7f16\u8f93\u51fa\uff1a</p> <pre><code>00000000004004a0 &lt;main&gt;:\u00a0 4004a0: \u00a0 55 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0push \u00a0 %rbp\u00a0 4004a1: \u00a0 48 89 e5 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0mov \u00a0 \u00a0%rsp,%rbp\u00a0 4004a4: \u00a0 48 83 ec 10 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 sub \u00a0 \u00a0$0x10,%rsp\u00a0 4004a8: \u00a0 c7 45 fc 64 00 00 00 \u00a0 \u00a0movl \u00a0 $0x64,-0x4(%rbp) \u00a0# local_var=100\u00a0 4004af: \u00a0 48 8b 05 6a 0b 20 00 \u00a0 \u00a0mov \u00a0 \u00a00x200b6a(%rip),%rax # 601020 &lt;str&gt;\u00a0 4004b6: \u00a0 48 89 c7 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0mov \u00a0 \u00a0%rax,%rdi\u00a0 4004b9: \u00a0 e8 92 fe ff ff \u00a0 \u00a0 \u00a0 \u00a0 \u00a0call \u00a0 400350 &lt;puts@plt&gt;\u00a0 4004be: \u00a0 b8 00 00 00 00 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0mov \u00a0 \u00a0$0x0,%eax\u00a0 4004c3: \u00a0 c9 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0leave \u00a0\u00a0 4004c4: \u00a0 c3 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0ret \u00a0 \u00a0\n</code></pre> <p>\u2022 \u673a\u5668\u7801\uff1a\u5982<code>55 48 89 e5</code>\u5bf9\u5e94<code>push %rbp; mov %rsp, %rbp</code>\u3002</p> <p>\u2022 \u51fd\u6570\u8c03\u7528\uff1a<code>call 400350</code>\u8df3\u8f6c\u5230<code>puts@plt</code>\uff08\u52a8\u6001\u94fe\u63a5\u5e93\u51fd\u6570\uff09\u3002</p> <p>4. \u6570\u636e\u6bb5\uff08.data\u3001.bss\u3001.rodata\uff09 </p> <p>\uff081\uff09.data\u6bb5 \u5b58\u50a8\u5df2\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\u3002</p> <pre><code>readelf -x .data hello_elf \u00a0# \u67e5\u770b.data\u6bb5\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>Hex dump of section '.data':\u00a0 0x00601020 00000000 00000000 20064000 00000000 ........ .@.....\u00a0 0x00601030 2a000000 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 *... \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\n</code></pre> <p>\u2022\u00a0<code>0x2a</code>\uff08\u5341\u8fdb\u523642\uff09\u5bf9\u5e94<code>global_init = 42</code>\u3002</p> <p>\u2022\u00a0<code>0x20064000</code>\u662f\u5b57\u7b26\u4e32<code>\"Hello ELF!\"</code>\u7684\u5730\u5740\uff08\u5728.rodata\u6bb5\uff09\u3002</p> <p>\uff082\uff09.rodata\u6bb5 \u5b58\u50a8\u53ea\u8bfb\u6570\u636e\uff08\u5982\u5b57\u7b26\u4e32\u5e38\u91cf\uff09\u3002</p> <pre><code>readelf -x .rodata hello_elf\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>Hex dump of section '.rodata':\u00a0 0x004005e0 01000200 48656c6c 6f20454c 462100 \u00a0 \u00a0....Hello ELF!.\n</code></pre> <p>\u2022 \u5b57\u7b26\u4e32<code>\"Hello ELF!\"</code>\u4ee5ASCII\u5f62\u5f0f\u5b58\u50a8\u3002</p> <p>\uff083\uff09.bss\u6bb5 \u5b58\u50a8\u672a\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\uff08\u7a0b\u5e8f\u52a0\u8f7d\u65f6\u521d\u59cb\u5316\u4e3a0\uff09\u3002</p> <pre><code>readelf -x .bss hello_elf\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>Hex dump of section '.bss':\u00a0 0x00601038 00000000 00000000 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ........ \u00a0 \u00a0 \u00a0 \u00a0\n</code></pre> <p>\u2022\u00a0<code>global_uninit</code>\u5728\u6b64\u6bb5\uff0c\u521d\u59cb\u503c\u4e3a0\u3002</p> <p>5. \u7b26\u53f7\u8868\uff08.symtab\uff09 </p> <p>\u8bb0\u5f55\u51fd\u6570\u548c\u53d8\u91cf\u7684\u5730\u5740\u548c\u7c7b\u578b\u3002</p> <pre><code>readelf -s hello_elf\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>Symbol table '.symtab' contains 64 entries:\u00a0 \u00a0Num: \u00a0 \u00a0Value \u00a0 \u00a0 \u00a0 \u00a0 \u00a0Size Type \u00a0 \u00a0Bind \u00a0 Vis \u00a0 \u00a0 \u00a0Ndx Name\u00a0 \u00a0 \u00a01: 0000000000000000 \u00a0 \u00a0 0 FILE \u00a0 \u00a0LOCAL \u00a0DEFAULT \u00a0ABS hello_elf.c\u00a0 \u00a0 \u00a08: 0000000000601038 \u00a0 \u00a0 4 OBJECT \u00a0GLOBAL DEFAULT \u00a0 23 global_uninit\u00a0 \u00a0 \u00a09: 0000000000601020 \u00a0 \u00a0 8 OBJECT \u00a0GLOBAL DEFAULT \u00a0 21 str\u00a0 \u00a0 10: 0000000000601028 \u00a0 \u00a0 4 OBJECT \u00a0GLOBAL DEFAULT \u00a0 21 global_init\u00a0 \u00a0 15: 00000000004004a0 \u00a0 \u00a037 FUNC \u00a0 \u00a0GLOBAL DEFAULT \u00a0 13 main\n</code></pre> <p>\u2022\u00a0<code>main</code>\u51fd\u6570\u5730\u5740\u4e3a<code>0x4004a0</code>\u3002</p> <p>\u2022\u00a0<code>str</code>\u53d8\u91cf\u5730\u5740\u4e3a<code>0x601020</code>\uff0c\u5bf9\u5e94.rodata\u6bb5\u7684\u5b57\u7b26\u4e32\u5730\u5740\u3002</p> <p>6. \u8c03\u8bd5\u4fe1\u606f\uff08.debug_*\uff09 </p> <p>\u7f16\u8bd1\u65f6\u6dfb\u52a0<code>-g</code>\u9009\u9879\u4f1a\u751f\u6210\u8c03\u8bd5\u4fe1\u606f\uff0c\u7528\u4e8e\u5173\u8054\u6e90\u4ee3\u7801\u548c\u4e8c\u8fdb\u5236\u6307\u4ee4\u3002</p> <pre><code>readelf -S hello_elf | grep debug \u00a0# \u67e5\u770b\u8c03\u8bd5\u6bb5\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>\u00a0 [27] .debug_aranges \u00a0 \u00a0PROGBITS \u00a0 \u00a0 \u00a0 \u00a00000000000000000 000010a0\u00a0 [28] .debug_info \u00a0 \u00a0 \u00a0 PROGBITS \u00a0 \u00a0 \u00a0 \u00a00000000000000000 000010d0\u00a0 [29] .debug_abbrev \u00a0 \u00a0 PROGBITS \u00a0 \u00a0 \u00a0 \u00a00000000000000000 000013a0\n</code></pre> <p>\u2022 .debug_info\uff1a\u8bb0\u5f55\u53d8\u91cf\u7c7b\u578b\u3001\u51fd\u6570\u53c2\u6570\u7b49\u6e90\u7801\u7ea7\u4fe1\u606f\u3002</p> <p>\u7b2c\u56db\u6b65\uff1a\u52a8\u624b\u5b9e\u9a8c\u2014\u2014\u4fee\u6539ELF\u6587\u4ef6 </p> <p>\u901a\u8fc7\u4fee\u6539ELF\u6587\u4ef6\uff0c\u76f4\u89c2\u611f\u53d7\u5176\u7ed3\u6784\uff1a</p> <ol> <li> <p>\u4fee\u6539\u5b57\u7b26\u4e32\u5e38\u91cf\uff1a</p> <pre><code>printf\u00a0\"Hello HACK!\"\u00a0| dd of=hello_elf bs=1 seek=$((0x4005e4)) conv=notrunc\n</code></pre> <p>\u8fd0\u884c\u7a0b\u5e8f\uff0c\u8f93\u51fa\u5c06\u53d8\u4e3a<code>Hello HACK!</code>\u3002</p> </li> <li> <p>\u4fee\u6539\u5168\u5c40\u53d8\u91cf\uff1a</p> <pre><code>printf\u00a0\"\\x2b\\x00\\x00\\x00\"\u00a0| dd of=hello_elf bs=1 seek=$((0x601028)) conv=notrunc\n</code></pre> <p><code>global_init</code>\u7684\u503c\u4ece42\uff080x2a\uff09\u53d8\u4e3a43\uff080x2b\uff09\u3002</p> </li> </ol> <p>\u7b2c\u4e94\u6b65\uff1aELF\u6587\u4ef6\u7ed3\u6784\u603b\u7ed3</p> \u7ed3\u6784 \u4f5c\u7528 ELF\u5934 \u6807\u8bc6\u6587\u4ef6\u7c7b\u578b\u3001\u67b6\u6784\u3001\u5165\u53e3\u70b9\u3001\u7a0b\u5e8f\u5934\u8868\u4f4d\u7f6e\u3002 \u7a0b\u5e8f\u5934\u8868 \u6307\u5bfc\u64cd\u4f5c\u7cfb\u7edf\u52a0\u8f7d\u6bb5\u5230\u5185\u5b58\u3002 .text\u6bb5 \u5b58\u50a8\u53ef\u6267\u884c\u6307\u4ee4\uff08\u5982<code>main</code>\u51fd\u6570\uff09\u3002 .data\u6bb5 \u5b58\u50a8\u5df2\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\u3002 .bss\u6bb5 \u5b58\u50a8\u672a\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\uff08\u7a0b\u5e8f\u52a0\u8f7d\u65f6\u521d\u59cb\u5316\u4e3a0\uff09\u3002 .rodata\u6bb5 \u5b58\u50a8\u53ea\u8bfb\u6570\u636e\uff08\u5982\u5b57\u7b26\u4e32\u5e38\u91cf\uff09\u3002 .symtab\u6bb5 \u7b26\u53f7\u8868\uff0c\u8bb0\u5f55\u51fd\u6570\u548c\u53d8\u91cf\u7684\u5730\u5740\u3002 .debug_*\u6bb5 \u8c03\u8bd5\u4fe1\u606f\uff0c\u5173\u8054\u6e90\u4ee3\u7801\u548c\u4e8c\u8fdb\u5236\u6307\u4ee4\u3002 <p>\u597d\u4e86\uff0c\u7b80\u5355\u4ecb\u7ecd\u5230\u8fd9\u91cc\u5427\uff0c\u4e00\u65e6\u638c\u63e1ELF\u6587\u4ef6\u7684\u6838\u5fc3\u7ed3\u6784\u3002\u65e0\u8bba\u662f\u8c03\u8bd5\u5d29\u6e83\u7684\u7a0b\u5e8f\uff0c\u8fd8\u662f\u9006\u5411\u5206\u6790\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0cELF\u6587\u4ef6\u90fd\u662f\u4f60\u7684\u201c\u5730\u56fe\u201d</p>","tags":["linux"]},{"location":"%E6%90%AD%E5%BB%BAclash-%E5%B9%B6%E4%B8%94%E5%88%86%E4%BA%AB%E7%BD%91%E7%BB%9C/","title":"\u642d\u5efaclash \u5e76\u4e14\u5206\u4eab\u7f51\u7edc","text":"","tags":["linux","tool"]},{"location":"%E6%90%AD%E5%BB%BAclash-%E5%B9%B6%E4%B8%94%E5%88%86%E4%BA%AB%E7%BD%91%E7%BB%9C/#clash","title":"\u4e0b\u8f7d&amp;\u5b89\u88c5clash","text":"<pre><code>sudo apt install git iproute2 iptables nftables jq -y\nsudo git clone  https://github.com/Kr328/clash-premium-installer\ncd clash-premium-installer/\nsudo wget https://github.com/Dreamacro/clash/releases/download/v1.11.4/clash-linux-amd64-v3-v1.11.4.gz\nsudo gzip -d clash-linux-amd64-v3-v1.11.4.gz\nsudo mv clash-linux-amd64-v3-v1.11.4 clash\nsudo chmod 775 clash\nsudo cp clash /usr/bin\nsudo ./installer.sh  install\nsudo cp config.yaml  /srv/clash/config.yaml\n\nsystemctl start clash\nsystemctl status clash\nsystemctl enable clash\n</code></pre>","tags":["linux","tool"]},{"location":"%E6%90%AD%E5%BB%BAclash-%E5%B9%B6%E4%B8%94%E5%88%86%E4%BA%AB%E7%BD%91%E7%BB%9C/#clash-dashboard","title":"\u642d\u5efaclash-dashboard","text":"<pre><code>sudo git clone -b gh-pages --depth 1 https://github.com/Dreamacro/clash-dashboard ~/app/clash-dashboard\nsudo /srv/clash/config.yaml # \u7f16\u8f91clash\u914d\u7f6e\u6587\u4ef6\n</code></pre>","tags":["linux","tool"]},{"location":"%E6%90%AD%E5%BB%BAclash-%E5%B9%B6%E4%B8%94%E5%88%86%E4%BA%AB%E7%BD%91%E7%BB%9C/#_1","title":"\u5728\u6587\u4e2d\u4fee\u6539\u6216\u589e\u52a0\u4ee5\u4e0b\u5185\u5bb9","text":"<pre><code>external-controller: 0.0.0.0:9090 # \u4fee\u6539ip\u5730\u5740\u548c\u7aef\u53e3\nexternal-ui: /etc/clash/clash-dashboard # clash-dashboard\u7684\u8def\u5f84\nsecret:'112233' # 112233\u662f\u8fde\u63a5\u7684\u5bc6\u94a5\uff0c\u81ea\u884c\u8bbe\u7f6e\n</code></pre> <p>\u91cd\u542f <pre><code>systemctl restart clash\n</code></pre></p>","tags":["linux","tool"]},{"location":"%E6%90%AD%E5%BB%BAclash-%E5%B9%B6%E4%B8%94%E5%88%86%E4%BA%AB%E7%BD%91%E7%BB%9C/#iptable","title":"iptable \u8bbe\u7f6e\u7aef\u53e3\u8f6c\u53d1\u5171\u4eab\u7f51\u7edc","text":"","tags":["linux","tool"]},{"location":"%E6%90%AD%E5%BB%BAclash-%E5%B9%B6%E4%B8%94%E5%88%86%E4%BA%AB%E7%BD%91%E7%BB%9C/#linux","title":"Linux:","text":"<pre><code>echo \"1\" &gt; /proc/sys/net/ipv4/ip_forward\niptables -F  #\u6e05\u7a7a\u89c4\u5219\niptables -P INPUT ACCEPT\n#iptables -P INPUT -i eth1 -j ACCEPT\niptables -P FORWARD ACCEPT\n#eth0 \u4e3a\u6709\u7f51\u7edc\u7684\u7aef\u53e3\niptables -t nat -A POSTROUTING -s 192.168.*.0/24 -o eth0 -j MASQUERADE\n</code></pre>","tags":["linux","tool"]},{"location":"%E6%90%AD%E5%BB%BAclash-%E5%B9%B6%E4%B8%94%E5%88%86%E4%BA%AB%E7%BD%91%E7%BB%9C/#windows","title":"Windows:","text":"<p>\u624b\u52a8\u8bbe\u7f6eIP\u5730\u5740\u548c\u7f51\u5173\u8bbe\u7f6e\u4e3alinux\u4e3b\u673a\u7684IP  \u624b\u52a8\u8bbe\u7f6eDNS 114.114.114.114 8.8.8.8 4.4.4.4</p>","tags":["linux","tool"]},{"location":"%E6%90%AD%E5%BB%BAclash-%E5%B9%B6%E4%B8%94%E5%88%86%E4%BA%AB%E7%BD%91%E7%BB%9C/#_2","title":"\u53c2\u8003","text":"<ul> <li>clash \u5b89\u88c5</li> <li>iptables\u5b9e\u73b0\u7f51\u7edc\u6570\u636e\u8f6c\u53d1\u548c\u7f51\u7edc\u6570\u636e\u5171\u4eab\u529f\u80fd</li> <li>iptable\u8bed\u6cd5</li> <li>Debian \u90e8\u7f72 Clash Web \u7ba1\u7406\u9875</li> <li>\u8bbe\u7f6eIP\u5730\u5740\u3001\u7f51\u5173\u3001DNS</li> </ul>","tags":["linux","tool"]},{"location":"%E6%9F%A5%E7%9C%8Blinux-%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF--%E6%9B%B4%E6%94%B9%E5%AF%86%E7%A0%81/","title":"\u67e5\u770blinux \u7248\u672c\u4fe1\u606f & \u66f4\u6539\u5bc6\u7801","text":"","tags":["linux"]},{"location":"%E6%9F%A5%E7%9C%8Blinux-%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF--%E6%9B%B4%E6%94%B9%E5%AF%86%E7%A0%81/#linux","title":"\u67e5\u770blinux \u5185\u5bb9\u4fe1\u606f","text":"<pre><code># \u5f53\u524d\u7cfb\u7edf\u7684\u5185\u6838\u7248\u672c\u53f7\u53ca\u7cfb\u7edf\u540d\u79f0\n$ cat /proc/version\nLinux version 5.15.32-v7l+ (dom@buildbot) (arm-linux-gnueabihf-gcc-8 (Ubuntu/Linaro 8.4.0-3ubuntu1) 8.4.0, GNU ld (GNU Binutils for Ubuntu) 2.34) #1538 SMP Thu Mar 31 19:39:41 BST 2022\n$ uname -a\nLinux raspberrypi 5.15.32-v7l+ #1538 SMP Thu Mar 31 19:39:41 BST 2022 armv7l GNU/Linux\n# \u67e5\u770b\u786c\u4ef6\n$ cat /proc/cpuinfo\nHardware    : BCM2711\nRevision    : d03114\nSerial      : 100000002019bf00\nModel       : Raspberry Pi 4 Model B Rev 1.4\n</code></pre>","tags":["linux"]},{"location":"%E6%9F%A5%E7%9C%8Blinux-%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF--%E6%9B%B4%E6%94%B9%E5%AF%86%E7%A0%81/#ubuntu","title":"Ubuntu\u66f4\u6539\u5bc6\u7801","text":"<ol> <li>\u8fdb\u5165Ubuntu\uff0c\u6253\u5f00\u4e00\u4e2a\u7ec8\u7aef\uff0c\u8f93\u5165\u00a0sudo\u00a0su\u8f6c\u4e3aroot\u7528\u6237\u3002\u00a0\u6ce8\u610f\uff0c\u5fc5\u987b\u5148\u8f6c\u4e3aroot\u7528\u6237\uff01\uff01\uff01</li> <li>sudo\u00a0passwd\u00a0user(user\u00a0\u662f\u5bf9\u5e94\u7684\u7528\u6237\u540d)</li> <li>\u8f93\u5165\u65b0\u5bc6\u7801\uff0c\u786e\u8ba4\u5bc6\u7801\u3002</li> <li>\u4fee\u6539\u5bc6\u7801\u6210\u529f\uff0c\u91cd\u542f\uff0c\u8f93\u5165\u65b0\u5bc6\u7801\u8fdb\u5165Ubuntu\u3002</li> </ol>","tags":["linux"]},{"location":"%E6%9F%A5%E7%9C%8Bpython%E6%89%80%E6%94%AF%E6%8C%81%E7%9A%84wheel%E5%8C%85/","title":"\u67e5\u770bpython\u6240\u652f\u6301\u7684wheel\u5305","text":"<pre><code>pi@testpi2:~ $ python\nPython 3.9.2 (default, Mar 12 2021, 04:06:34)\n[GCC 10.2.1 20210110] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from pip._internal.utils.compatibility_tags import get_supported\n&gt;&gt;&gt; print(get_supported())\n[&lt;cp39-cp39-linux_armv6l @ 3058276136&gt;, &lt;cp39-abi3-linux_armv6l @ 3058276200&gt;, &lt;cp39-none-linux_armv6l @ 3058276552&gt;, &lt;cp38-abi3-linux_armv6l @ 3058275912&gt;, &lt;cp37-abi3-linux_armv6l @ 3058276648&gt;, &lt;cp36-abi3-linux_armv6l @ 3058276712&gt;, &lt;cp35-abi3-linux_armv6l @ 3058276808&gt;, &lt;cp34-abi3-linux_armv6l @ 3058276904&gt;, &lt;cp33-abi3-linux_armv6l @ 3058277000&gt;, &lt;cp32-abi3-linux_armv6l @ 3058277096&gt;, &lt;py39-none-linux_armv6l @ 3058277320&gt;, &lt;py3-none-linux_armv6l @ 3058275976&gt;, &lt;py38-none-linux_armv6l @ 3058277352&gt;, &lt;py37-none-linux_armv6l @ 3058277480&gt;, &lt;py36-none-linux_armv6l @ 3058277544&gt;, &lt;py35-none-linux_armv6l @ 3058277640&gt;, &lt;py34-none-linux_armv6l @ 3058277736&gt;, &lt;py33-none-linux_armv6l @ 3058277832&gt;, &lt;py32-none-linux_armv6l @ 3058277928&gt;, &lt;py31-none-linux_armv6l @ 3058278024&gt;, &lt;py30-none-linux_armv6l @ 3058278120&gt;, &lt;cp39-none-any @ 3058278312&gt;, &lt;py39-none-any @ 3058278216&gt;, &lt;py3-none-any @ 3058315368&gt;, &lt;py38-none-any @ 3058315528&gt;, &lt;py37-none-any @ 3058315624&gt;, &lt;py36-none-any @ 3058315752&gt;, &lt;py35-none-any @ 3058315880&gt;, &lt;py34-none-any @ 3058316008&gt;, &lt;py33-none-any @ 3058316136&gt;, &lt;py32-none-any @ 3058316264&gt;, &lt;py31-none-any @ 3058316392&gt;, &lt;py30-none-any @ 3058316520&gt;]\n&gt;&gt;&gt;\n</code></pre>","tags":["tool"]},{"location":"%E6%9F%A5%E7%9C%8Bpython%E6%89%80%E6%94%AF%E6%8C%81%E7%9A%84wheel%E5%8C%85/#_1","title":"\u53c2\u8003","text":"<ul> <li>python\u7684wheel</li> </ul>","tags":["tool"]},{"location":"%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81-ip-%E5%9C%B0%E5%9D%80/","title":"\u4f7f\u7528\u7ec8\u7aef \u8bbe\u7f6e\u9759\u6001IP","text":"","tags":["linux"]},{"location":"%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81-ip-%E5%9C%B0%E5%9D%80/#_1","title":"\u67e5\u770b\u53ef\u7528\u7684\u7f51\u7edc\u63a5\u53e3","text":"<pre><code>ip link\n1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n2: enP4p65s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 00:e0:4c:68:02:0e brd ff:ff:ff:ff:ff:ff\n</code></pre>","tags":["linux"]},{"location":"%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81-ip-%E5%9C%B0%E5%9D%80/#nano-etcnetworkinterfaces","title":"\u4f7f\u7528nano \u7f16\u8f91 <code>/etc/network/interfaces</code> \u6587\u4ef6","text":"<pre><code>cat /etc/network/interfaces\n# interfaces(5) file used by ifup(8) and ifdown(8)\n# Include files from /etc/network/interfaces.d:\nsource /etc/network/interfaces.d/*\n</code></pre> <p>\u5982\u679c\u770b\u5230interfaces \u6587\u4ef6\u5185\u5bb9\u5982\u4e0a\u6240\u793a, \u53ef\u4ee5\u5728<code>/etc/network/interfaces.d/</code> \u6587\u4ef6\u5939\u4e0b\u65b0\u5efa\u914d\u7f6e\u6587\u4ef6 <pre><code>sudo nano  /etc/network/interfaces.d/enP4p65s0.conf\n\n# \u6587\u4ef6\u5185\u586b\u5199\nauto enP4p65s0\niface enP4p65s0 inet static\naddress 192.168.137.110\nnetmask 255.255.255.0\ngateway 192.168.137.1\ndns-nameservers 192.168.137.1 114.114.114.114\n\n#\u4fdd\u5b58\u5e76\u9000\u51fa,\u91cd\u542f\u670d\u52a1\nsudo systemctl restart NetworkManager\n</code></pre></p>","tags":["linux"]},{"location":"%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81-ip-%E5%9C%B0%E5%9D%80/#_2","title":"\u53c2\u8003","text":"<ul> <li>\u5982\u4f55\u5728 Debian 11 \u4e0a\u8bbe\u7f6e\u4e00\u4e2a\u9759\u6001 IP \u5730\u5740</li> </ul>","tags":["linux"]},{"location":"%E9%92%89%E9%92%89%E6%97%A0%E6%B3%95%E8%BE%93%E5%85%A5%E4%B8%AD%E6%96%87/","title":"\u9489\u9489\u65e0\u6cd5\u8f93\u5165\u4e2d\u6587","text":"<p>\u6253\u5f00 /opt/apps/com.alibabainc.dingtalk/files/Elevatot.sh \u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9: <pre><code>export GTK_IM_MODULE=\"ibus\"  \nexport QT_IM_MODULE=\"ibus\"  \nexport XMODIFIERS=\"@im=ibus\"  \nexport QT_QPA_PLATFORM=xcb  \n</code></pre></p>","tags":["linux","tool"]},{"location":"archive/2025/03/","title":"2025/08","text":""},{"location":"archive/2025/02/","title":"2025/04","text":""},{"location":"archive/2025/01/","title":"2025/01","text":""},{"location":"archive/2024/04/","title":"2024/11","text":""},{"location":"archive/2024/03/","title":"2024/08","text":""},{"location":"archive/2024/02/","title":"2024/06","text":""},{"location":"archive/2024/01/","title":"2024/02","text":""},{"location":"archive/2023/04/","title":"2023/12","text":""},{"location":"archive/2023/03/","title":"2023/09","text":""},{"location":"archive/2023/02/","title":"2023/06","text":""},{"location":"archive/2018/01/","title":"2018/03","text":""},{"location":"category/linux/","title":"linux","text":""},{"location":"page/2/","title":"Blog","text":""},{"location":"page/3/","title":"Blog","text":""},{"location":"page/4/","title":"Blog","text":""},{"location":"page/5/","title":"Blog","text":""},{"location":"page/6/","title":"Blog","text":""},{"location":"page/7/","title":"Blog","text":""},{"location":"page/8/","title":"Blog","text":""},{"location":"page/9/","title":"Blog","text":""},{"location":"archive/2023/03/page/2/","title":"2023/09","text":""},{"location":"archive/2023/02/page/2/","title":"2023/06","text":""},{"location":"archive/2023/02/page/3/","title":"2023/06","text":""},{"location":"archive/2023/02/page/4/","title":"2023/06","text":""},{"location":"blog/tags/","title":"Tags","text":"<p>Following is a list of relevant tags:</p>"},{"location":"blog/tags/#shell","title":"Shell","text":"<ul> <li>\u521b\u5efaASCII\u7801\u7684\u76ee\u5f55\u6811</li> </ul>"},{"location":"blog/tags/#wip","title":"WIP","text":"<ul> <li>OpenWrt \u4f7f\u7528\u8bb0\u5f55</li> </ul>"},{"location":"blog/tags/#apt","title":"apt","text":"<ul> <li>add-apt-repository \u547d\u4ee4\u5b89\u88c5,\u5378\u8f7d\u548c\u4f7f\u7528</li> <li>apt certificate verification failed</li> <li>apt \u547d\u4ee4\u4f7f\u7528\u4ee3\u7406</li> <li>apt-key \u6dfb\u52a0\u516c\u94a5</li> </ul>"},{"location":"blog/tags/#ccpp","title":"c/cpp","text":"<ul> <li>\u53bb\u6389\u5b8f__FILE__\u7684\u8def\u5f84</li> </ul>"},{"location":"blog/tags/#cheatsheet","title":"cheatsheet","text":"<ul> <li>Markdown \u901f\u67e5\u8868</li> <li>c \u6587\u4ef6IO</li> <li>c \u9884\u5904\u7406\u5668</li> </ul>"},{"location":"blog/tags/#git","title":"git","text":"<ul> <li>git  Merge vs Rebase</li> <li>git diff \u751f\u6210patch \u5e76\u5e94\u7528</li> <li>git pull request</li> <li>git \u4fee\u526a\u5206\u652f</li> <li>git \u4fee\u6539\u7b2c\u4e00\u4e2acommit \u4fe1\u606f</li> <li>git \u4fee\u6539\u914d\u7f6e\u6587\u4ef6</li> <li>git \u5206\u5757\u63a8\u9001</li> <li>git \u5408\u5e76commit</li> <li>git \u540c\u6b65Fork \u6e90\u4ed3\u5e93</li> <li>git \u5c06token \u6dfb\u52a0\u5230\u8fdc\u7a0b\u4ed3\u5e93\u94fe\u63a5\u4e2d</li> <li>\u4f7f\u7528git \u6253\u5305\u4ed3\u5e93</li> <li>git \u67e5\u770b\u5386\u53f2\u8bb0\u5f55</li> <li>git \u8bbe\u7f6e\u548c\u53d6\u6d88\u4ee3\u7406</li> <li>git\u5206\u5272commit \u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93</li> </ul>"},{"location":"blog/tags/#kernel","title":"kernel","text":"<ul> <li>CMOS Sensor \u7684\u4e00\u4e9b\u57fa\u672c\u6982\u5ff5</li> <li>Linux \u5185\u6838\u5f00\u53d1</li> <li>imx8mm sai rx \u65f6\u949f\u7ebf\u914d\u7f6e</li> <li>\u5185\u6838\u5185\u5b58\u7ba1\u7406</li> <li>\u5185\u6838\u7f51\u7edc\u8bbe\u5907\u9a71\u52a8</li> </ul>"},{"location":"blog/tags/#linux","title":"linux","text":"<ul> <li>Arch Linux \u786c\u76d8\u6269\u5bb9</li> <li>Arch linux ext4 \u6587\u4ef6\u7cfb\u7edf\u8f6c Btrfs</li> <li>Buildroot \u4f7f\u7528 crontab \u548c crond \u5b8c\u6210\u5b9a\u65f6\u4efb\u52a1</li> <li>ELF \u6587\u4ef6\u67e5\u770b</li> <li>Gentoo Linux \u5b89\u88c5\u6307\u5357</li> <li>LFS \u8bb0\u5f55</li> <li>OpenWrt \u4f7f\u7528\u8bb0\u5f55</li> <li>Shell \u547d\u4ee4\u53bb\u9664\u5b57\u7b26\u4e32\u4e2d\u56de\u8f66\u7b26</li> <li>Ubuntu \u5f7b\u5e95\u79fb\u9664Snap</li> <li>Ubuntu \u6ca1\u6709\u7f51\u7edc\u8fde\u63a5</li> <li>Yocoto \u8c03\u8bd5\u603b\u7ed3</li> <li>buildroot \u5982\u4f55\u4ec5\u83b7\u53d6 toolchain</li> <li>cloudflared \u5185\u7f51\u4ee3\u7406</li> <li>gentoo \u6e90\u8bbe\u7f6e</li> <li>linux Fan driver</li> <li>linux \u4e2d\u4f7f\u7528 ctrl+z \u505c\u6b62\u4efb\u52a1\u540e\u5982\u4f55\u6062\u590d\u4efb\u52a1</li> <li>linux \u7528\u6237\u4f7f\u7528</li> <li>linux \u7f29\u5c0f\u5206\u533a\u5927\u5c0f</li> <li>linux \u7f51\u7edc\u6392\u67e5</li> <li>openocd \u4f7f\u7528</li> <li>openvpn \u5c40\u57df\u7f51\u5185\u5206\u4eab\u7f51\u7edc</li> <li>repo \u521d\u59cb\u5316\u4ed3\u5e93</li> <li>rock5b \u8bbe\u7f6e\u8bb0\u5f55</li> <li>samba \u5206\u4eab\u6587\u4ef6</li> <li>samba \u7528\u6237\u7ba1\u7406</li> <li>trojan-gfw \u5b89\u88c5\u8bb0\u5f55</li> <li>ubuntu \u8bbe\u7f6e\u865a\u62df\u663e\u793a\u5668\u8f93\u51fa</li> <li>v2ray\u4e00\u952e\u811a\u672c\u6536\u96c6\u6574\u7406</li> <li>wireguard \u90e8\u7f72\u8bb0\u5f55</li> <li>\u5185\u6838\u9a71\u52a8\u521d\u59cb\u5316\u987a\u5e8f</li> <li>\u5220\u9664Ubunut Pro</li> <li>\u624b\u628a\u624b\u89e3\u6790ELF\u6587\u4ef6\u683c\u5f0f\uff1a\u4eceHello World\u5230\u4e8c\u8fdb\u5236\u5965\u79d8</li> <li>\u642d\u5efaclash \u5e76\u4e14\u5206\u4eab\u7f51\u7edc</li> <li>\u67e5\u770blinux \u7248\u672c\u4fe1\u606f &amp; \u66f4\u6539\u5bc6\u7801</li> <li>\u8bbe\u7f6e\u9759\u6001 IP \u5730\u5740</li> <li>\u9489\u9489\u65e0\u6cd5\u8f93\u5165\u4e2d\u6587</li> </ul>"},{"location":"blog/tags/#python","title":"python","text":"<ul> <li>python pip \u8bbe\u7f6e\u4ee3\u7406</li> <li>python \u67e5\u770b\u52a8\u6001\u94fe\u63a5\u5e93\u5730\u5740</li> </ul>"},{"location":"blog/tags/#ssh","title":"ssh","text":"<ul> <li>ssh \u5982\u4f55\u5411\u670d\u52a1\u5668\u6dfb\u52a0\u516c\u94a5</li> <li>ssh \u5feb\u901f\u5220\u9664known_hosts\u8bb0\u5f55</li> <li>ssh \u6dfb\u52a0\u4f7f\u7528\u79c1\u94a5</li> <li>ssh \u7aef\u53e3\u8f6c\u53d1</li> <li>ssh \u8bbe\u7f6e\u4ee3\u7406</li> </ul>"},{"location":"blog/tags/#system","title":"system","text":"<ul> <li>archlinux install record</li> </ul>"},{"location":"blog/tags/#tool","title":"tool","text":"<ul> <li>add-apt-repository \u547d\u4ee4\u5b89\u88c5,\u5378\u8f7d\u548c\u4f7f\u7528</li> <li>apt certificate verification failed</li> <li>apt \u547d\u4ee4\u4f7f\u7528\u4ee3\u7406</li> <li>apt-key \u6dfb\u52a0\u516c\u94a5</li> <li>cloudflared \u5185\u7f51\u4ee3\u7406</li> <li>freebsd 13 \u5b89\u88c5 samba server</li> <li>git  Merge vs Rebase</li> <li>git diff \u751f\u6210patch \u5e76\u5e94\u7528</li> <li>git \u4fee\u526a\u5206\u652f</li> <li>git \u4fee\u6539\u7b2c\u4e00\u4e2acommit \u4fe1\u606f</li> <li>git \u4fee\u6539\u914d\u7f6e\u6587\u4ef6</li> <li>git \u5206\u5757\u63a8\u9001</li> <li>git \u5408\u5e76commit</li> <li>git \u540c\u6b65Fork \u6e90\u4ed3\u5e93</li> <li>git \u5c06token \u6dfb\u52a0\u5230\u8fdc\u7a0b\u4ed3\u5e93\u94fe\u63a5\u4e2d</li> <li>\u4f7f\u7528git \u6253\u5305\u4ed3\u5e93</li> <li>git \u67e5\u770b\u5386\u53f2\u8bb0\u5f55</li> <li>git \u8bbe\u7f6e\u548c\u53d6\u6d88\u4ee3\u7406</li> <li>git\u5206\u5272commit \u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93</li> <li>samba \u5206\u4eab\u6587\u4ef6</li> <li>samba \u7528\u6237\u7ba1\u7406</li> <li>ssh \u5982\u4f55\u5411\u670d\u52a1\u5668\u6dfb\u52a0\u516c\u94a5</li> <li>ssh \u5feb\u901f\u5220\u9664known_hosts\u8bb0\u5f55</li> <li>ssh \u6dfb\u52a0\u4f7f\u7528\u79c1\u94a5</li> <li>ssh \u7aef\u53e3\u8f6c\u53d1</li> <li>ssh \u8bbe\u7f6e\u4ee3\u7406</li> <li>tmux \u4f7f\u7528</li> <li>vscode \u8bbe\u7f6e compare view</li> <li>windows \u4e2d\u6dfb\u52a0\u53f3\u952e\u83dc\u5355 - \u5728vscode \u4e2d\u6253\u5f00</li> <li>zsh \u589e\u52a0\u547d\u4ee4\u5386\u53f2\u8bb0\u5f55</li> <li>\u4f7f\u7528UEFI Shell\u5f15\u5bfcU\u76d8\u542f\u52a8</li> <li>\u521b\u5efaASCII\u7801\u7684\u76ee\u5f55\u6811</li> <li>\u5728 FreeBSD 13 \u4e0a\u5b89\u88c5 gitea</li> <li>\u642d\u5efaclash \u5e76\u4e14\u5206\u4eab\u7f51\u7edc</li> <li>\u67e5\u770bpython\u6240\u652f\u6301\u7684wheel\u5305</li> <li>\u9489\u9489\u65e0\u6cd5\u8f93\u5165\u4e2d\u6587</li> </ul>"},{"location":"blog/tags/#vscode","title":"vscode","text":"<ul> <li>vscode \u8bbe\u7f6e compare view</li> </ul>"},{"location":"blog/tags/#windows","title":"windows","text":"<ul> <li>Windows 10 \u5206\u4eab\u7f51\u7edc\u8bbe\u7f6e</li> </ul>"}]}